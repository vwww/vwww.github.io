(()=>{"use strict";var e,t,i,n,a={153:function(e,t,i){let n;i(1);var a=i(2);function l(e,t,i=!1){let n=a.state(a.proxy(t));function r(e){return"undefined"===e?void 0:JSON.parse(e)}if(window.localStorage){let l=localStorage.getItem(e);null!==l&&a.set(n,r(l),!0),a.user_effect(()=>localStorage.setItem(e,void 0===a.get(n)?"undefined":JSON.stringify(a.get(n)))),i&&window.addEventListener("storage",i=>i.storageArea===localStorage&&i.key===e&&a.set(n,null==i.newValue?t:r(i.newValue),!0))}return{get value(){return a.get(n)},set value(newVal){a.set(n,newVal,!0)}}}var r=i(5),s=i(154),o=a.from_html('<label class="form-check form-check-inline"><input type="radio" class="form-check-input"/> <span class="form-check-label"> </span></label>'),d=a.from_html('<label class="form-check form-check-inline"><input type="radio" class="form-check-input"/> <span class="form-check-label"> </span></label>'),c=a.from_html('<tr><th scope="row"></th><td> </td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td></tr>'),g=a.from_html('<tr><th scope="row"></th><td> </td><td> </td><td> </td></tr>'),h=a.from_html('<div style="container-type: inline-size"><div class="my-2" style="width: min(100cqw, 200cqh); height: min(50cqw, 100cqh)"><canvas></canvas></div></div> <h2>Settings</h2> <div class="row row-cols-sm-auto g-3 align-items-center my-2"><div class="col-12"><b>Trajectories</b></div> <div class="col-12"><label class="form-check form-check-inline"><input type="checkbox" class="form-check-input"/> draw path</label></div> <div class="col-12"><input type="number" class="form-control" min="0"/></div></div> <div><b class="me-3">Show velocity</b> <!> <!> <!> <!></div> <div><b class="me-3">Show acceleration</b> <!> <!> <!> <!></div> <h2>Orbs</h2> <h3>Properties <button class="btn btn-outline-primary">Randomize</button></h3> <table class="table table-striped table-bordered table-hover w-auto"><thead><tr><th>Index</th><th>orbitBaseAng</th><th>distX</th><th>distYMin</th><th>distYRange</th><th>baseDistYCycleAng</th><th>distYChangeSpeed</th></tr></thead><tbody></tbody></table> <h3>Kinematics at Time</h3> <input type="number" class="form-control" step="0.1"/> <input type="range" class="form-range" min="0" step="0.001"/> <table class="table table-striped table-bordered table-hover w-auto"><thead><tr><th>Index</th><th>Position</th><th>Velocity</th><th>Acceleration</th></tr></thead><tbody></tbody></table> <h3>Import/Export</h3> <div class="input-group mb-3"><button class="btn btn-outline-primary">Import from JSON</button> <button class="btn btn-outline-danger">Export to JSON</button></div> <textarea class="form-control"></textarea>',1);a.delegate(["mousedown","mousemove","change","click"]),n=document.getElementById("app"),(0,r.Or)(function(e,t){let i;a.push(t,!0);let n=[],u=[],b=2*Math.PI,f=["#dc143c","#da70d6","#6666cd","#00bfff","#00ff7f","#ee0","#ff9912","#c67171"],v=l("misc/orbs/orbs",[]),p=l("misc/orbs/drawPaths",!0),m=l("misc/orbs/drawPathDuration",8),_=l("misc/orbs/modeV",1),y=l("misc/orbs/modeA",1),x=-1,M=a.state(""),w=a.state(void 0),k=a.state(0),S=Date.now(),Y=Date.now(),D=a.state(0),A=s.Ik({distX:s.ai,distYMin:s.ai,distYRange:s.ai,baseDistYCycleAng:s.ai,distYChangeSpeed:s.ai}),C=s.Ik({orbitDist:A,orbitBaseAng:s.ai,_protected:s.lq(s.zM)}),$=s.Ik({orbs:s.YO(C)});function T(e,t,i){let n=t-i/15,a=Math.abs(Math.cos(e.baseDistYCycleAng+e.distYChangeSpeed*i)),l=e.distYMin+e.distYRange*a;return[e.distX*Math.cos(n),l*Math.sin(n)]}function R(e,t,i){let n=t-i/15,a=e.baseDistYCycleAng+e.distYChangeSpeed*i,l=Math.cos(a),r=Math.abs(l),s=e.distYMin+e.distYRange*r,o=-e.distYRange*Math.sign(l)*Math.sin(a)*e.distYChangeSpeed;return[e.distX*Math.sin(n)/15,-(s*Math.cos(n)/15)+Math.sin(n)*o]}function B(e,t,i){let n=t-i/15,a=e.baseDistYCycleAng+e.distYChangeSpeed*i,l=Math.cos(a),r=Math.abs(l),s=e.distYMin+e.distYRange*r,o=-e.distYRange*Math.sign(l)*Math.sin(a)*e.distYChangeSpeed,d=-e.distYRange*r*e.distYChangeSpeed;return[-(e.distX*Math.cos(n)/225),-(o*Math.cos(n)*2/15)+-(s*Math.sin(n)/225)+Math.sin(n)*d]}function O(e,t){return[e[0]-t[0],e[1]-t[1]]}function P(e,t,i){return O(T(e,t,i+.5),T(e,t,i-.5))}function I(e,t,i){return O(P(e,t,i+.5),P(e,t,i-.5))}function E(e,t,i){return O(P(e,t,i),R(e,t,i))}function X(e,t,i){return O(I(e,t,i),B(e,t,i))}function q(){v.value=Array.from({length:24},(e,t)=>({orbitDist:{distX:1200+1e3*Math.random()|0,baseDistYCycleAng:b*Math.random(),distYMin:499.98+(1314.6-499.98)*Math.random(),distYRange:103.464+(775-103.464)*Math.random(),distYChangeSpeed:.01+.01*Math.random()},orbitBaseAng:t*b/24})),x=-1,K()}function J(){a.get(k)||(S=Date.now()-(Y-S),function e(){a.set(k,requestAnimationFrame(e),!0),F()}())}function N(){cancelAnimationFrame(a.get(k)),Y=Date.now(),a.set(k,0),F()}function j(){a.get(w).width=a.get(w).parentElement.clientWidth,a.get(w).height=a.get(w).parentElement.clientHeight}function W(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,b),e.closePath(),e.fill()}function z(e,t,i,n,a,l,r=Math.PI/6){let s=Math.atan2(a-i,n-t);e.beginPath(),e.moveTo(t,i),e.lineTo(n,a),e.lineTo(n-l*Math.cos(s-r),a-l*Math.sin(s-r)),e.moveTo(n,a),e.lineTo(n-l*Math.cos(s+r),a-l*Math.sin(s+r)),e.closePath(),e.stroke()}let V=0;function F(){let e=i;if(!e)return N();V=L?G:((a.get(k)?Date.now():Y)-S)/1e3;let{width:t,height:n}=a.get(w);e.fillStyle="#0d0d0d",e.fillRect(0,0,t,n);let l=t/8e3,r=64*l,s=t/2/l,o=n/2/l;e.lineWidth=2,e.strokeStyle="#0e0e0e";for(let i=-5*t%500-500;i<=t+1;i+=500)e.beginPath(),e.moveTo(i,0),e.lineTo(i,n),e.stroke();for(let i=-5*n%500-500;i<=n+1;i+=500)e.beginPath(),e.moveTo(0,i),e.lineTo(t,i),e.stroke();e.lineWidth=1,e.strokeStyle="#2b2b2b";for(let i=-5*t%500-25.5;i<=t+1;i+=50)e.beginPath(),e.moveTo(i,0),e.lineTo(i,n),e.stroke();for(let i=-5*n%50-25.5;i<=n+1;i+=50)e.beginPath(),e.moveTo(0,i),e.lineTo(t,i),e.stroke();if(e.fillStyle="#ff0",W(e,.5*t,.5*n,80*l),p.value){let t=V-m.value/2;e.strokeStyle="#777",v.value.forEach(i=>{e.beginPath();for(let n=0;n<=512;n++){let[a,r]=T(i.orbitDist,i.orbitBaseAng,t+n*m.value/512);e[n?"lineTo":"moveTo"]((a+s)*l,(r+o)*l)}e.stroke()})}v.value.forEach((t,i)=>{let[n,a]=T(t.orbitDist,t.orbitBaseAng,V),d=i%3?-1:+"04361527"[i/3];e.fillStyle=d<0?"#aaa":f[d];let c=(n+s)*l,g=(a+o)*l,h=35+2/3;if(W(e,c,g,25*l),t._protected&&(e.globalAlpha=.75,W(e,c,g,h*l),e.globalAlpha=1),x==i){e.fillStyle="#fff";let t=h-4.5;for(let i=0;i<16;i++){let n=i/16*b+V/2;W(e,c+t*Math.cos(n)*l,g+t*Math.sin(n)*l,4.5*l)}}if(_.value){let[i,d]=[R,P,E][_.value-1](t.orbitDist,t.orbitBaseAng,V),c=_.value>=3?16384:4;e.strokeStyle="#00f",z(e,(n+s)*l,(a+o)*l,(n+i*c+s)*l,(a+d*c+o)*l,r)}if(y.value){let[i,d]=[B,I,X][y.value-1](t.orbitDist,t.orbitBaseAng,V),c=y.value>=3?128:16;e.strokeStyle="#f00",z(e,(n+s)*l,(a+o)*l,(n+i*c+s)*l,(a+d*c+o)*l,r)}d>=0&&(e.font="11px Arial",e.textAlign="center",e.textBaseline="alphabetic",e.fillStyle="#fff",e.fillText(`player${d}`,(n+s)*l,(a+o-80)*l))});let d=.91*n|0,c=.04*t|0,g=(.05*n|0)-2,h=L?H:a.get(k);e.lineWidth=4,e.strokeStyle=h?"#7f0000":"#007f00",e.fillStyle="#000",e.strokeRect(2,d,c,g),e.fillRect(2,d,c,g),e.font=`${.012*t}px sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#fff",e.fillText(h?"⏹️":"▶️",.02*t,.935*n),e.textAlign="start",e.fillText(`${V.toFixed(3)}`,.06*t,.935*n);let u=.96*n|0,M=.04*n|0;e.lineWidth=2,e.strokeStyle="#777",e.beginPath(),e.moveTo(0,u),e.lineTo(t,u),e.closePath(),e.stroke(),e.fillStyle="#000",e.fillRect(0,u+1,t,M),e.fillStyle="#f00",e.fillRect(0,u+1,V/600*t,M)}function K(){a.get(k)||F()}let L=!1,H=!1,G=0,Q=0,U=0,Z=0;(0,r.Rc)(()=>{i=a.get(w).getContext("2d"),j(),(v.value.length?K:q)()});var ee=h();a.event("resize",a.window,function(){j(),F()}),a.event("mouseup",a.window,function(){L&&(S=0,Y=1e3*G,L=!1,H&&J())});var et=a.first_child(ee),ei=a.child(et),en=a.child(ei);en.__mousedown=function(e){let t,{width:i,height:n}=a.get(w),l=e.x-a.get(w).getBoundingClientRect().left,r=e.y-a.get(w).getBoundingClientRect().top;if(r>.95*n)return void(L=!0,(H=!!a.get(k))&&N());if(r>.9*n&&l<.04*i)return void(a.get(k)?N:J)();let s=1/0;function o(e,i,n,a){let o=l-i,d=r-n,c=o*o+d*d;c<s&&c<=a*a&&(t=e,s=c)}let d=i/8e3,c=i/2/d,g=n/2/d;o(-1,.5*i,.5*n,80*d),v.value.forEach((e,t)=>{let[i,n]=T(e.orbitDist,e.orbitBaseAng,V);o(t,(i+c)*d,(n+g)*d,25*d)}),void 0!==t&&(x==t&&t>=0&&(v.value[t]._protected=!v.value[t]._protected),x=t,K())},en.__mousemove=function(e){var t,i;if(!L)return;let{left:n,top:l}=a.get(w).getBoundingClientRect(),r=(t=(e.x-n)/a.get(w).width,0>t?0:t<1?t:1),s=(i=(e.y-l)/a.get(w).height,0>i?0:i<1?i:1);if(s>.95)G=600*(Z=r),Q=r,U=1;else{let e=Math.min(s/.95,1),t=Math.pow(e,2.5);s<U&&(Z=(G/600-Q*t)/(1-t)),G=(Z+(r-Z)*t)*600,Q=r,U=e}F()},a.bind_this(en,e=>a.set(w,e),()=>a.get(w)),a.reset(ei),a.reset(et);var ea=a.sibling(et,4),el=a.sibling(a.child(ea),2),er=a.child(el),es=a.child(er);a.remove_input_defaults(es),es.__change=K,a.next(),a.reset(er),a.reset(el);var eo=a.sibling(el,2),ed=a.child(eo);a.remove_input_defaults(ed),ed.__change=K,a.reset(eo),a.reset(ea);var ec=a.sibling(ea,2);{let e=(e,t=a.noop,i=a.noop)=>{var l,r=o(),s=a.child(r);a.remove_input_defaults(s),s.__change=K;var d=a.sibling(s,2),c=a.child(d,!0);a.reset(d),a.reset(r),a.template_effect(()=>{l!==(l=t())&&(s.value=(s.__value=t())??""),a.set_text(c,i())}),a.bind_group(n,[],s,()=>(t(),_.value),e=>_.value=e),a.append(e,r)};var eg=a.sibling(a.child(ec),2);e(eg,()=>0,()=>"off");var eh=a.sibling(eg,2);e(eh,()=>1,()=>"4 * actual");var eu=a.sibling(eh,2);e(eu,()=>2,()=>"4 * approx"),e(a.sibling(eu,2),()=>3,()=>"16384 * (actual - approx)"),a.reset(ec)}var eb=a.sibling(ec,2);{let e=(e,t=a.noop,i=a.noop)=>{var n,l=d(),r=a.child(l);a.remove_input_defaults(r),r.__change=K;var s=a.sibling(r,2),o=a.child(s,!0);a.reset(s),a.reset(l),a.template_effect(()=>{n!==(n=t())&&(r.value=(r.__value=t())??""),a.set_text(o,i())}),a.bind_group(u,[],r,()=>(t(),y.value),e=>y.value=e),a.append(e,l)};var ef=a.sibling(a.child(eb),2);e(ef,()=>0,()=>"off");var ev=a.sibling(ef,2);e(ev,()=>1,()=>"16 * actual");var ep=a.sibling(ev,2);e(ep,()=>2,()=>"16 * approx"),e(a.sibling(ep,2),()=>3,()=>"128 * (approx - actual)"),a.reset(eb)}var em=a.sibling(eb,4);a.sibling(a.child(em)).__click=q,a.reset(em);var e_=a.sibling(em,2),ey=a.sibling(a.child(e_));a.each(ey,21,()=>v.value,a.index,(e,t,i)=>{var n=c(),l=a.child(n);l.textContent=i;var r=a.sibling(l),s=a.child(r);a.reset(r);var o=a.sibling(r),d=a.child(o);a.remove_input_defaults(d),a.reset(o);var g=a.sibling(o),h=a.child(g);a.remove_input_defaults(h),a.reset(g);var u=a.sibling(g),b=a.child(u);a.remove_input_defaults(b),a.reset(u);var f=a.sibling(u),p=a.child(f);a.remove_input_defaults(p),a.reset(f);var m=a.sibling(f),_=a.child(m);a.remove_input_defaults(_),a.reset(m),a.reset(n),a.template_effect(()=>a.set_text(s,`${i}/${v.value.length??""} τ`)),a.bind_value(d,()=>a.get(t).orbitDist.distX,e=>a.get(t).orbitDist.distX=e),a.bind_value(h,()=>a.get(t).orbitDist.distYMin,e=>a.get(t).orbitDist.distYMin=e),a.bind_value(b,()=>a.get(t).orbitDist.distYRange,e=>a.get(t).orbitDist.distYRange=e),a.bind_value(p,()=>a.get(t).orbitDist.baseDistYCycleAng,e=>a.get(t).orbitDist.baseDistYCycleAng=e),a.bind_value(_,()=>a.get(t).orbitDist.distYChangeSpeed,e=>a.get(t).orbitDist.distYChangeSpeed=e),a.append(e,n)}),a.reset(ey),a.reset(e_);var ex=a.sibling(e_,4);a.remove_input_defaults(ex);var eM=a.sibling(ex,2);a.remove_input_defaults(eM),a.set_attribute(eM,"max",600);var ew=a.sibling(eM,2),ek=a.sibling(a.child(ew));a.each(ek,21,()=>v.value,a.index,(e,t,i)=>{let n=a.derived(()=>T(a.get(t).orbitDist,a.get(t).orbitBaseAng,a.get(D))),l=a.derived(()=>R(a.get(t).orbitDist,a.get(t).orbitBaseAng,a.get(D))),r=a.derived(()=>P(a.get(t).orbitDist,a.get(t).orbitBaseAng,a.get(D))),s=a.derived(()=>O(a.get(r),a.get(l))),o=a.derived(()=>B(a.get(t).orbitDist,a.get(t).orbitBaseAng,a.get(D))),d=a.derived(()=>I(a.get(t).orbitDist,a.get(t).orbitBaseAng,a.get(D))),c=a.derived(()=>O(a.get(d),a.get(o)));var h=g(),u=a.child(h);u.textContent=i;var b=a.sibling(u),f=a.child(b);a.reset(b);var v=a.sibling(b),p=a.child(v);a.reset(v);var m=a.sibling(v),_=a.child(m);a.reset(m),a.reset(h),a.template_effect(()=>{a.set_text(f,`${a.get(n)[0]??""}, ${a.get(n)[1]??""}`),a.set_attribute(v,"title",`approx
(${a.get(r)[0]??""}, ${a.get(r)[1]??""})
actual
(${a.get(l)[0]??""}, ${a.get(l)[1]??""})
error
(${a.get(s)[0]??""}, ${a.get(s)[1]??""})`),a.set_text(p,`${a.get(l)[0]??""}, ${a.get(l)[1]??""}`),a.set_attribute(m,"title",`approx
(${a.get(d)[0]??""}, ${a.get(d)[1]??""})
actual
(${a.get(o)[0]??""}, ${a.get(o)[1]??""})
error
(${a.get(c)[0]??""}, ${a.get(c)[1]??""})`),a.set_text(_,`${a.get(o)[0]??""}, ${a.get(o)[1]??""}`)}),a.append(e,h)}),a.reset(ek),a.reset(ew);var eS=a.sibling(ew,4),eY=a.child(eS);eY.__click=function(){try{let e=JSON.parse(a.get(M));v.value=$.verify(e,s.KS).orbs,x=-1}catch(e){alert(e)}},a.sibling(eY,2).__click=function(){a.set(M,JSON.stringify({orbs:v.value}),!0)},a.reset(eS);var eD=a.sibling(eS,2);a.remove_textarea_child(eD),a.bind_checked(es,()=>p.value,e=>p.value=e),a.bind_value(ed,()=>m.value,e=>m.value=e),a.bind_value(ex,()=>a.get(D),e=>a.set(D,e)),a.bind_value(eM,()=>a.get(D),e=>a.set(D,e)),a.bind_value(eD,()=>a.get(M),e=>a.set(M,e)),a.append(e,ee),a.pop()},{target:n}),document.getElementById("appLoading")?.remove()}},l={};function r(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return a[e](i,i.exports,r),i.exports}r.m=a,r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],r.O=(t,i,n,a)=>{if(i){a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[i,n,a];return}for(var s=1/0,l=0;l<e.length;l++){for(var[i,n,a]=e[l],o=!0,d=0;d<i.length;d++)(!1&a||s>=a)&&Object.keys(r.O).every(e=>r.O[e](i[d]))?i.splice(d--,1):(o=!1,a<s&&(s=a));if(o){e.splice(l--,1);var c=n();void 0!==c&&(t=c)}}return t},r.rv=()=>"1.5.8",t={96:0},r.O.j=e=>0===t[e],i=(e,i)=>{var n,a,[l,s,o]=i,d=0;if(l.some(e=>0!==t[e])){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(o)var c=o(r)}for(e&&e(i);d<l.length;d++)a=l[d],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(c)},(n=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n)),r.ruid="bundler=rspack@1.5.8";var s=r.O(void 0,["11","1","4","9","2","28","14","44","51"],function(){return r(153)});s=r.O(s)})();