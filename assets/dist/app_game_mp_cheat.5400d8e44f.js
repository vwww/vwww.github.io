(()=>{"use strict";var e,t,s,i,n={148(e,t,s){s(1);var i,n,a,r,o,l,d,c,p,h,m=s(2),u=s(127),g=s(128),v=s(129),_=s(130),f=s(131),k=s(132),C=s(133),b=s(134),R=s(137);function T(e){return e.reduce((e,t)=>e+t,0n)}var M=s(144),I=s(138),y=s(141),N=s(140),A=s(145);let x=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optCallTime","i",3e3,"Call Time / ms","guaranteed time to call cheat, in milliseconds",2e3,1e4],["optDecks","I",1,"Decks","number of decks",1,0x8000000000000],["optCheck","e",2,"Check","how to resolve challenges",["arbiter","caller","public","public+"]],["optTricks","e",0,"Tricks","passing in tricks",["forced (no passing)","pass turn","pass trick","single turn"]],["optCountSame","b",!0,"Count (same)","can play same count as previous move"],["optCountMore","b",!0,"Count (more)","can play more cards than previous move"],["optCountLess","b",!0,"Count (less)","can play fewer cards than previous move, but not zero"],["optCountZero","b",!0,"Count (zero)","can play zero cards"],["optRankStartA","b",!0,"Trick Rank Start (Ace)","can start with Ace"],["optRankStartO","b",!0,"(others)","can start with rank other than Ace or King"],["optRankStartK","b",!0,"(King)","can start with King"],["optRank0","b",!0,"Trick Rank Subsequent (same)","can play same rank as previous move"],["optRank1u","b",!0,"(up 1)","previous plus one, when not wrapping"],["optRank1uw","b",!0,"(up 1 wrap)","previous plus one, when wrapping"],["optRank1d","b",!0,"(down 1)","previous minus one, when not wrapping"],["optRank1dw","b",!0,"(down 1 wrap)","previous minus one, when wrapping"],["optRank2u","b",!1,"(up 2)","previous plus two, when not wrapping"],["optRank2uw","b",!1,"(up 2 wrap)","previous plus two, when wrapping"],["optRank2d","b",!1,"(down 2)","previous minus two, when not wrapping"],["optRank2dw","b",!1,"(down 2 wrap)","previous minus two, when wrapping"],["optRankother","b",!1,"(others)","other ranks not covered above"]];function E(e){let t=e.optCountLess?e.optCountSame?e.optCountMore?"*":"≤":e.optCountMore?"≠":"<":e.optCountSame?e.optCountMore?"≥":"=":">";return e.optCallTime+"/"+e.optTurnTime+"/"+e.optDecks+"/"+e.optCheck+"/"+t+e.optTricks+(e.optRank1uw?"U":"u")+(e.optRank2uw?"U":"u")+(e.optRank2d?"D":"d")+(e.optRank1d?"D":"d")+(e.optRank0?"S":"s")+(e.optRank1u?"U":"u")+(e.optRank2u?"U":"u")+(e.optRank2dw?"D":"d")+(e.optRank1dw?"D":"d")+(e.optRankother?"O":"o")}(i=l||(l={}))[i.WELCOME=0]="WELCOME",i[i.JOIN=1]="JOIN",i[i.LEAVE=2]="LEAVE",i[i.RESET=3]="RESET",i[i.RENAME=4]="RENAME",i[i.PING=5]="PING",i[i.PING_TIME=6]="PING_TIME",i[i.CHAT=7]="CHAT",i[i.ACTIVE=8]="ACTIVE",i[i.ROUND_WAIT=9]="ROUND_WAIT",i[i.ROUND_INTERM=10]="ROUND_INTERM",i[i.ROUND_START=11]="ROUND_START",i[i.READY=12]="READY",i[i.END_ROUND=13]="END_ROUND",i[i.MOVE_CONFIRM=14]="MOVE_CONFIRM",i[i.END_TURN=15]="END_TURN",i[i.CALL_WIN=16]="CALL_WIN",i[i.CALL_FAIL=17]="CALL_FAIL",i[i.PLAYER_ELIMINATE=18]="PLAYER_ELIMINATE",i[i.PLAYER_ELIMINATE_EARLY=19]="PLAYER_ELIMINATE_EARLY",i[i.PLAYER_PRIVATE_INFO_HAND=20]="PLAYER_PRIVATE_INFO_HAND",i[i.PLAYER_PRIVATE_INFO_MOVE=21]="PLAYER_PRIVATE_INFO_MOVE",i[i.PLAYER_PRIVATE_INFO_PENALTY=22]="PLAYER_PRIVATE_INFO_PENALTY",i[i.PLAYER_PRIVATE_INFO_REVEAL=23]="PLAYER_PRIVATE_INFO_REVEAL",(n=d||(d={}))[n.RESET=0]="RESET",n[n.RENAME=1]="RENAME",n[n.PONG=2]="PONG",n[n.CHAT=3]="CHAT",n[n.ACTIVE=4]="ACTIVE",n[n.READY=5]="READY",n[n.MOVE=6]="MOVE",n[n.MOVE_CALL=7]="MOVE_CALL",n[n.MOVE_END=8]="MOVE_END";class w extends A.Iu{#e=m.state(0);get score(){return m.get(this.#e)}set score(e){m.set(this.#e,e,!0)}#t=m.state(0);get streak(){return m.get(this.#t)}set streak(e){m.set(this.#t,e,!0)}#s=m.state(0);get wins(){return m.get(this.#s)}set wins(e){m.set(this.#s,e,!0)}#i=m.state(0);get losses(){return m.get(this.#i)}set losses(e){m.set(this.#i,e,!0)}#n=m.state(0);get rankLast(){return m.get(this.#n)}set rankLast(e){m.set(this.#n,e,!0)}#a=m.state(0);get rankBest(){return m.get(this.#a)}set rankBest(e){m.set(this.#a,e,!0)}#r=m.state(0);get rankWorst(){return m.get(this.#r)}set rankWorst(e){m.set(this.#r,e,!0)}updateScore(e,t){this.rankLast=e,this.rankBest=Math.min(this.rankBest||e,e),this.rankWorst=Math.max(this.rankWorst,e),this.score+=t-e+1,1===e?(this.streak<0&&(this.streak=0),this.streak++,this.wins++):(this.streak>0&&(this.streak=0),this.streak--,this.losses++)}resetScore(){this.score=0,this.streak=0,this.wins=0,this.losses=0,this.rankLast=0,this.rankBest=0,this.rankWorst=0}canResetScore(){return this.rankLast}readWelcome(e){super.readWelcome(e),this.score=e.getInt(),this.streak=e.getInt(),this.wins=e.getInt(),this.losses=e.getInt(),this.rankLast=e.getInt(),this.rankBest=e.getInt(),this.rankWorst=e.getInt()}}class S extends A.$G{#o=m.state(m.proxy(U()));get discardClaim(){return m.get(this.#o)}set discardClaim(e){m.set(this.#o,e,!0)}#l=m.state(0n);get handSize(){return m.get(this.#l)}set handSize(e){m.set(this.#l,e,!0)}#d=m.state(!1);get passed(){return m.get(this.#d)}set passed(e){m.set(this.#d,e,!0)}}class O extends A.p${handSize=0n;trickNum=0;duration=0n}(a=c||(c={}))[a.ARBITER=0]="ARBITER",a[a.CALLER=1]="CALLER",a[a.PUBLIC=2]="PUBLIC",a[a.PUBLIC_ALL=3]="PUBLIC_ALL",a[a.NUM=4]="NUM",(r=p||(p={}))[r.FORCED=0]="FORCED",r[r.PASS_TURN=1]="PASS_TURN",r[r.PASS_TRICK=2]="PASS_TRICK",r[r.SINGLE_TURN=3]="SINGLE_TURN",r[r.NUM=4]="NUM";let L=1n<<51n;class P extends A.jQ{PlayerInfoType=S;PlayerDiscType=O;#c=m.state(m.proxy((0,C.q)(x)));get mode(){return m.get(this.#c)}set mode(e){m.set(this.#c,e,!0)}#p=m.state(!1);get canChallenge(){return m.get(this.#p)}set canChallenge(e){m.set(this.#p,e,!0)}#h=m.state(!1);get shouldChallenge(){return m.get(this.#h)}set shouldChallenge(e){m.set(this.#h,e,!0)}#m=m.state(0);get trickNum(){return m.get(this.#m)}set trickNum(e){m.set(this.#m,e,!0)}#u=m.state(0);get trickTurn(){return m.get(this.#u)}set trickTurn(e){m.set(this.#u,e,!0)}#g=m.state(0n);get trickCount(){return m.get(this.#g)}set trickCount(e){m.set(this.#g,e,!0)}#v=m.state(0);get trickRank(){return m.get(this.#v)}set trickRank(e){m.set(this.#v,e,!0)}#_=m.state(0);get callTimerStart(){return m.get(this.#_)}set callTimerStart(e){m.set(this.#_,e,!0)}#f=m.state(0);get callTimerEnd(){return m.get(this.#f)}set callTimerEnd(e){m.set(this.#f,e,!0)}#k=m.state(!1);get callTimerActive(){return m.get(this.#k)}set callTimerActive(e){m.set(this.#k,e,!0)}callTimerTimeout;#C=m.state(0);get passIndex(){return m.get(this.#C)}set passIndex(e){m.set(this.#C,e,!0)}#b=m.state(m.proxy(U()));get cardCountTotal(){return m.get(this.#b)}set cardCountTotal(e){m.set(this.#b,e,!0)}#R=m.state(m.proxy(U()));get cardCountHandMine(){return m.get(this.#R)}set cardCountHandMine(e){m.set(this.#R,e,!0)}#T=m.state(m.proxy(U()));get cardCountAllMine(){return m.get(this.#T)}set cardCountAllMine(e){m.set(this.#T,e,!0)}#M=m.derived(()=>this.cardCountTotal.map((e,t)=>e-this.cardCountHandMine[t]));get cardCountAllOthers(){return m.get(this.#M)}set cardCountAllOthers(e){m.set(this.#M,e)}#I=m.state(m.proxy(U()));get cardCountClaimMine(){return m.get(this.#I)}set cardCountClaimMine(e){m.set(this.#I,e,!0)}#y=m.state(m.proxy(U()));get cardCountClaimOthers(){return m.get(this.#y)}set cardCountClaimOthers(e){m.set(this.#y,e,!0)}#N=m.state(m.proxy(U()));get cardCountClaimRemain(){return m.get(this.#N)}set cardCountClaimRemain(e){m.set(this.#N,e,!0)}#A=m.state(m.proxy([]));get moveHistory(){return m.get(this.#A)}set moveHistory(e){m.set(this.#A,e,!0)}#x=m.state(m.proxy(D()));get pendingMoveNum(){return m.get(this.#x)}set pendingMoveNum(e){m.set(this.#x,e,!0)}#E=m.derived(()=>this.pendingMoveNum.map(BigInt));get pendingMoveNumB(){return m.get(this.#E)}set pendingMoveNumB(e){m.set(this.#E,e)}#w=m.derived(()=>T(this.pendingMoveNumB));get pendingMoveTotal(){return m.get(this.#w)}set pendingMoveTotal(e){m.set(this.#w,e)}#S=m.state(m.proxy(U()));get pendingMoveAck(){return m.get(this.#S)}set pendingMoveAck(e){m.set(this.#S,e,!0)}#O=m.state(0);get pendingMoveClaim(){return m.get(this.#O)}set pendingMoveClaim(e){m.set(this.#O,e,!0)}#L=m.state(0);get pendingMoveClaimAck(){return m.get(this.#L)}set pendingMoveClaimAck(e){m.set(this.#L,e,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new w}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",d.RESET)}sendRename(e){this.sendf("is",d.RENAME,e)}sendPong(e){this.sendf("i2",d.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",d.CHAT,t,s,(0,N.JK)(e))}sendActive(){this.sendf("i",d.ACTIVE)}sendReady(){this.sendf("i",d.READY)}sendMove(){var e;let t=new y.U().putInt(d.MOVE).putInt(this.pendingMoveClaim);e=t,this.pendingMoveNumB.forEach(t=>e.putUint64(t)),this.room?.send(t.toArray())}sendMoveCallCheat(){this.sendf("i",d.MOVE_CALL)}sendMoveEnd(){this.sendf("i",d.MOVE_END)}MESSAGE_HANDLERS={[l.WELCOME]:this.processWelcome,[l.JOIN]:this.processJoin,[l.LEAVE]:this.processLeave,[l.RESET]:this.processReset,[l.RENAME]:this.processRename,[l.PING]:this.processPing,[l.PING_TIME]:this.processPingTime,[l.CHAT]:this.processChat,[l.ACTIVE]:this.processActive,[l.ROUND_WAIT]:this.processRoundWait,[l.ROUND_INTERM]:this.processRoundInterm,[l.ROUND_START]:this.processRoundStart,[l.READY]:this.processReady,[l.END_ROUND]:this.processEndRound,[l.MOVE_CONFIRM]:this.processMoveConfirm,[l.END_TURN]:this.processEndTurn,[l.CALL_WIN]:this.processCallWin,[l.CALL_FAIL]:this.processCallFail,[l.PLAYER_ELIMINATE]:this.processEliminate,[l.PLAYER_ELIMINATE_EARLY]:this.processEliminateEarly,[l.PLAYER_PRIVATE_INFO_HAND]:this.processPrivateInfoHand,[l.PLAYER_PRIVATE_INFO_MOVE]:this.processPrivateInfoMove,[l.PLAYER_PRIVATE_INFO_PENALTY]:this.processPrivateInfoPenalty,[l.PLAYER_PRIVATE_INFO_REVEAL]:this.processPrivateInfoResult};processWelcomeMode(e){this.mode.optTurnTime=e.getInt(),this.mode.optCallTime=e.getInt(),this.mode.optDecks=(0,M.q)(e.getUint64(),1n,L);let t=e.get(),s=e.get(),i=e.get();this.mode.optCheck=3&t,this.mode.optTricks=t>>2&3,this.mode.optCountSame=!!(16&t),this.mode.optCountMore=!!(32&t),this.mode.optCountLess=!!(64&t),this.mode.optCountZero=!!(128&t),this.mode.optRankStartA=!!(1&s),this.mode.optRankStartO=!!(2&s),this.mode.optRankStartK=!!(4&s),this.mode.optRank0=!!(8&s),this.mode.optRank1u=!!(16&s),this.mode.optRank1uw=!!(32&s),this.mode.optRank1d=!!(64&s),this.mode.optRank1dw=!!(128&s),this.mode.optRank2u=!!(1&i),this.mode.optRank2uw=!!(2&i),this.mode.optRank2d=!!(4&i),this.mode.optRank2dw=!!(8&i),this.mode.optRankother=!!(16&i)}processPlayerInfo(e,t){t.discardClaim=V(e);let s=e.getUint64();t.handSize=s>>1n,t.passed=!!(1n&s)}processDiscInfo(e,t){t.handSize=e.getUint64(),t.trickNum=e.getInt(),t.duration=e.getUint64()}processRoundStartInfo(e){let t=54n*this.mode.optDecks,s=BigInt(this.roundPlayers.length),i=t/s,n=t%s;this.playerInfo.forEach((e,t)=>{e.discardClaim=U(),e.handSize=i,t<n&&e.handSize++,e.passed=!1}),this.canChallenge=!1,this.trickNum=this.trickTurn=0,this.trickCount=0n,this.cardCountClaimMine=U(),this.cardCountClaimOthers=U(),this.cardCountClaimRemain=$(this.mode.optDecks),this.cardCountTotal=$(this.mode.optDecks),this.moveHistory=[],this.turnIndex=e.getInt(),this.passIndex=-1,this.resetMove()}processRoundInfo(e){if(this.moveHistory=[],this.cardCountHandMine=U(),this.cardCountClaimMine=U(),this.cardCountTotal=$(this.mode.optDecks),this.roundState!==R.mk.ACTIVE){this.canChallenge=!1,this.trickNum=this.trickTurn=0,this.trickCount=0n,this.cardCountClaimOthers=U(),this.cardCountClaimRemain=$(this.mode.optDecks);return}let t=e.getInt();this.trickNum=t>>1,this.canChallenge=!!(1&t),(this.trickTurn=e.getInt())&&(this.trickRank=e.getInt(),this.trickCount=e.getUint64());let s=V(e);this.cardCountClaimOthers=s,this.cardCountClaimRemain=this.cardCountTotal.map((e,t)=>e-s[t]),this.setCallTimer(this.canChallenge?e.getInt():0),this.passIndex=this.mode.optTricks!==p.FORCED?e.getInt():-1}processMoveConfirm(e){this.pendingMoveClaimAck=e.getInt(),this.pendingMoveAck=V(e)}processEndTurn(e){let t=this.playerInfo[this.turnIndex],s=this.clients[t.owner],i=(0,I.M0)(s,t.owner),n=s===this.localClient,a=e.getInt();if(a<0)this.moveHistory.push({type:"pass",playerName:i,playerIsMe:n}),this.mode.optTricks!==p.FORCED&&this.nextTurnAfterPass(t)&&this.nextTrick(),this.canChallenge=!1;else{let s=e.getUint64(),r=!this.nextRankPossible(a)||this.nextCountImpossible(s),o=r;if(this.mode.optTricks!==p.FORCED){this.passIndex=-1;let e=this.nextUnpassed(this.turnIndex);e===this.turnIndex&&(o=!0),o?t.handSize||this.nextTurn():this.mode.optTricks===p.SINGLE_TURN&&this.trickTurn?o=this.nextTurnAfterPass(t):(this.mode.optTricks===p.PASS_TURN&&this.unsetPassed(),this.turnIndex=e)}if(o?this.nextTrick(r):(this.trickCount=s,this.trickRank=a,this.trickTurn++),s){t.discardClaim[a]+=s,t.discardClaim[h.NUM]+=s,t.handSize-=s;let e=n?this.cardCountClaimMine:this.cardCountClaimOthers;e[a]+=s,e[h.NUM]+=s,this.cardCountClaimRemain[a]-=s,this.cardCountClaimRemain[h.NUM]-=s,this.shouldChallenge=(this.canChallenge=!n)&&s>this.cardCountAllOthers[a]+this.cardCountAllOthers[h.Joker],this.setCallTimer(this.mode.optCallTime)}else this.canChallenge=!1;this.moveHistory.push({type:"move",playerName:i,playerIsMe:n,rank:a,count:s})}this.mode.optTricks===p.FORCED&&this.nextTurn(),this.setTimer(this.mode.optTurnTime),this.resetMove()}nextTrick(e=!1){this.moveHistory.push({type:"tEnd",trick:this.trickNum,turn:this.trickTurn,move:e}),this.unsetPassed(),this.trickNum++,this.trickTurn=0}nextTurnAfterPass(e){let t=this.nextUnpassed(this.turnIndex);return t===this.turnIndex||this.passIndex<0&&this.nextUnpassed(t)===this.turnIndex?(this.turnIndex=this.passIndex<0?t:this.passIndex,this.passIndex=-1,!0):(this.turnIndex=t,e.passed=!0,!1)}nextUnpassed(e){let t=e;do++t===this.playerInfo.length&&(t=0);while(t!==e&&this.playerInfo[t].passed);return t}unsetPassed(){this.playerInfo.forEach(e=>e.passed=!1)}resetMove(){this.pendingMoveNum=D(),this.pendingMoveAck=U(),this.pendingMoveClaim=this.pendingMoveClaimAck=-1}processCall(e,t){let s=e.getCN(),i=this.playerInfo[s],n=this.clients[i.owner],a=t?i:this.playerInfo[(this.turnIndex||this.playerInfo.length)-1],r=t?n:this.clients[a.owner];for(let e of(this.moveHistory.push({type:t?"callFail":"callSuccess",playerName:(0,I.M0)(n,i.owner),playerIsMe:n===this.localClient,victimName:(0,I.M0)(r,a.owner),victimIsMe:r===this.localClient}),a.handSize+=this.cardCountClaimMine[h.NUM]+this.cardCountClaimOthers[h.NUM],this.playerInfo))e.discardClaim=U();this.cardCountAllMine=this.cardCountHandMine.slice(),this.cardCountClaimMine=U(),this.cardCountClaimOthers=U(),this.cardCountClaimRemain=$(this.mode.optDecks),this.canChallenge=!1,this.setTimer(this.mode.optTurnTime),this.setCallTimer(0)}processCallWin(e){this.processCall(e,!1)}processCallFail(e){this.processCall(e,!0)}processEndRound(e){let t=e.getUint64(),s={duration:t,trickNum:this.trickNum,players:this.playerDiscInfo.map(e=>({...e,name:e.ownerName}))},[i]=this.playerInfo,n=this.clients[i.owner],a=this.discIndex+1,r=1+this.playerDiscInfo.length;n.updateScore(a,r),s.players.splice(this.discIndex,0,{name:n.formatName(),isMe:n===this.localClient,trickNum:this.trickNum,duration:t}),this.updatePlayers(),this.addHistory(s)}eliminatePlayer(e,t,s,i,n,a){t.duration=e.getUint64(),t.trickNum=this.trickNum,a&&(this.cardCountClaimOthers[h.Joker]+=t.handSize=i.handSize,this.cardCountClaimOthers[h.NUM]+=t.handSize,this.cardCountClaimRemain[h.Joker]-=t.handSize,this.cardCountClaimRemain[h.NUM]-=t.handSize,s+1===(this.turnIndex||this.playerInfo.length)?this.canChallenge=!1:this.mode.optTricks!==p.FORCED&&s===this.turnIndex&&this.nextTurnAfterPass(i)&&this.nextTrick(),this.moveHistory.push({type:"leave",playerName:n.formatName(),playerIsMe:n===this.localClient,handSize:t.handSize}),this.setTimer(this.mode.optTurnTime));let r=this.playerInfo.length+this.playerDiscInfo.length,o=this.discIndex+(a?this.playerInfo.length:1);n.updateScore(o,r);let l=this.playerInfo.length-1;return this.turnIndex>s?this.turnIndex--:this.turnIndex===l&&(this.turnIndex=0),this.mode.optTricks!==p.FORCED&&(a?this.passIndex>s?this.passIndex--:this.passIndex===l&&(this.passIndex=0):this.passIndex=this.turnIndex),!a}processPrivateInfoHand(e){let t=V(e);this.cardCountHandMine=t,this.cardCountAllMine=t.slice()}processPrivateInfoMove(e){let t=V(e);for(let e=0;e<=h.NUM;e++)e<h.NUM&&(this.pendingMoveNum[e]=Number(t[e])),this.cardCountHandMine[e]-=t[e];this.moveHistory.push({type:"play",cards:t})}processPrivateInfoPenalty(e){let t=V(e);this.moveHistory.push({type:"penalty",cards:t});for(let e=0;e<=h.NUM;e++)this.cardCountHandMine[e]+=t[e]}processPrivateInfoResult(e){let t=V(e);if(this.moveHistory.push({type:"reveal",cards:t}),this.mode.optCheck===c.PUBLIC_ALL){let t=V(e);if(!t[h.NUM])return;this.moveHistory.push({type:"reveal2",cards:t})}}setCallTimer(e){let t=Date.now()+e;this.callTimerStart=t-Math.max(this.mode.optCallTime,e),this.callTimerEnd=t,this.callTimerActive=!0,clearTimeout(this.callTimerTimeout),this.callTimerTimeout=window.setTimeout(()=>this.callTimerActive=!1,e)}allowRank(e){return this.trickTurn?this.checkRank(e,this.trickRank):this.checkRankStart(e)}allowCount(e){return this.trickTurn?e?e===this.trickCount?this.mode.optCountSame:e<this.trickCount?this.mode.optCountLess:this.mode.optCountMore&&e<=6n*this.mode.optDecks:this.mode.optCountZero:!!e}checkRankStart(e){return e===h.Ace?this.mode.optRankStartA:e===h.FKing?this.mode.optRankStartK:this.mode.optRankStartO}checkRank(e,t){if(e===t)return this.mode.optRank0;if(e===t+1)return this.mode.optRank1u;if(e===t+2)return this.mode.optRank2u;if(e===t-1)return this.mode.optRank1d;if(e===t-2)return this.mode.optRank2d;else if(e===h.Joker-1&&0===t)return this.mode.optRank1uw;else if(0===e&&t===h.Joker-1)return this.mode.optRank1dw;else if(e===h.Joker-1&&1===t||e===h.Joker-2&&0===t)return this.mode.optRank2uw;else if(0===e&&t===h.Joker-2||1===e&&t===h.Joker-1)return this.mode.optRank2dw;else return this.mode.optRankother}nextRankPossible(e){return this.mode.optRank0||this.mode.optRankother||(e===h.Joker-1?this.mode.optRank1uw:this.mode.optRank1u)||(0===e?this.mode.optRank1dw:this.mode.optRank1d)||(e===h.Joker-2?this.mode.optRank2uw:this.mode.optRank2u)||(1===e?this.mode.optRank2dw:this.mode.optRank2d)}nextCountImpossible(e){return!this.mode.optCountSame&&(e<=1n&&!this.mode.optCountMore||e===6n*this.mode.optDecks&&!this.mode.optCountLess)}playersSortProps=[e=>e.score,e=>e.wins,e=>e.streak]}function U(){return[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n]}function D(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function $(e){let t=e+e,s=t+t;return[s,s,s,s,s,s,s,s,s,s,s,s,s,t,54n*e]}function V(e){let t=Array.from({length:h.NUM},()=>e.getUint64());return t.push(T(t)),t}(o=h||(h={}))[o.Ace=0]="Ace",o[o.N2=1]="N2",o[o.N3=2]="N3",o[o.N4=3]="N4",o[o.N5=4]="N5",o[o.N6=5]="N6",o[o.N7=6]="N7",o[o.N8=7]="N8",o[o.N9=8]="N9",o[o.N10=9]="N10",o[o.FJack=10]="FJack",o[o.FQueen=11]="FQueen",o[o.FKing=12]="FKing",o[o.Joker=13]="Joker",o[o.NUM=14]="NUM";var H=m.from_html(' <div class="d-inline-block"> <span> </span> </div>',1),Y=m.from_html('<li class="list-group-item"><div> <!></div></li>'),F=m.from_html('<li class="list-group-item">No past games!</li>'),B=m.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),z=m.from_html('<span class="badge text-bg-light"> </span><!>,',1),W=m.from_html('<div class="progress"><div class="progress-bar"></div></div>'),J=m.from_html('<div class="progress-stacked my-1"><div class="progress" style="width: 3.125%"><div class="progress-bar bg-info"></div></div> <!></div>'),G=m.from_html('<div class="progress bg-primary"></div>'),K=m.from_html('<tr><td> </td><td class="w-100"><!></td><td> </td></tr>'),j=m.from_html('<!> <table class="table table-sm"><tbody></tbody></table>',1);function q(e,t){m.push(t,!0);let s=m.derived(()=>t.cards.at(-1));var i=m.comment(),n=m.first_child(i),a=e=>{let i=m.derived(()=>t.cards.length-2),n=m.derived(()=>t.cards[m.get(i)]),a=m.derived(()=>t.cards.slice(0,-2)),r=m.derived(()=>BigInt(m.get(a).filter(e=>e).reduce((e,t)=>e<t?e:t))),o=m.derived(()=>BigInt(m.get(a).reduce((e,t)=>e>t?e:t))),l=m.derived(()=>m.get(o)-m.get(r));var d=j(),c=m.first_child(d),p=e=>{var s=z(),a=m.first_child(s),r=m.child(a,!0);m.reset(a);var o=m.sibling(a),l=e=>{var t=m.text();m.template_effect(()=>m.set_text(t,` \xd7${m.get(n)??""}`)),m.append(e,t)};m.if(o,e=>{m.get(n)>1&&e(l)}),m.next(),m.template_effect(()=>m.set_text(r,t.ranks[m.get(i)])),m.append(e,s)};m.if(c,e=>{m.get(n)&&e(p)});var h=m.sibling(c),u=m.sibling(h),g=m.child(u);m.each(g,21,()=>m.get(a),m.index,(e,s,i)=>{var n=m.comment(),a=m.first_child(n),o=e=>{var n=K(),a=m.child(n),o=m.child(a,!0);m.reset(a);var d=m.sibling(a),c=m.child(d),p=e=>{var t=J(),i=m.sibling(m.child(t),2),n=e=>{var t=W();m.template_effect(e=>m.set_style(t,`width:${e??""}%`),[()=>Number((BigInt(m.get(s))-m.get(r))*96875n/m.get(l))/1e3]),m.append(e,t)};m.if(i,e=>{m.get(s)>m.get(r)&&e(n)}),m.reset(t),m.append(e,t)},h=e=>{var t=G();m.append(e,t)};m.if(c,e=>{m.get(l)?e(p):e(h,!1)}),m.reset(d);var u=m.sibling(d),g=m.child(u,!0);m.reset(u),m.reset(n),m.template_effect(()=>{m.set_text(o,t.ranks[i]),m.set_text(g,m.get(s))}),m.append(e,n)};m.if(a,e=>{m.get(s)&&e(o)}),m.append(e,n)}),m.reset(g),m.reset(u),m.template_effect(()=>m.set_text(h,` ${m.get(s)??""} total.   `)),m.append(e,d)};m.if(n,e=>{m.get(s)&&e(a)}),m.append(e,i),m.pop()}var Q=s(146),Z=s(147),X=s(135),ee=s(142),et=m.from_html('<span> </span> played <span class="badge text-bg-light"> </span><!>.',1),es=m.from_html("<span> </span> passed.",1),ei=m.from_html("<span> </span> called cheat successfully on <span> </span>.",1),en=m.from_html("<span> </span> called cheat wrongfully.",1),ea=m.from_html(" <!>",1),er=m.from_html("<span> </span> ",1),eo=m.from_html("<div><!></div> ",1),el=m.from_html('<b>Move History</b> <label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">compact</span></label> <div class="overflow-auto" style="max-height: 20rem"></div>',1);let ed=["A","2","3","4","5","6","7","8","9","10","J","Q","K","*","Total"];var ec=m.from_html("<!> <!>",1),ep=m.from_html(' <span class="badge text-bg-light"> </span> ',1),eh=m.from_html("<span>PASS</span>"),em=m.from_html('<span class="badge text-bg-outline-danger">IMPOSSIBLE</span>'),eu=m.from_html("<span>HONEST</span>"),eg=m.from_html("<span>BLUFF</span>"),ev=m.from_html("<span> </span> <!>",1),e_=m.from_html("<button> </button>"),ef=m.from_html('<div class="col-4 col-md-3 col-lg-2"> <input type="number" min="0"/> <input type="range" class="form-range" min="0"/></div>'),ek=m.from_html("Passing is not allowed<!>.",1),eC=m.from_html(" <!>.",1),eb=m.from_html("<!> <!>",1),eR=m.from_html('<div class="alert alert-danger"><!></div>'),eT=m.from_html('<div class="mb-2 text-center">Your move: <!></div> <div class="btn-group d-flex mb-3" role="group"><button>Pass</button> <!></div> <div class="row"></div> <!> <div class="col-12 mb-2"><button>End Move</button></div>',1),eM=m.from_html('<button>Call Cheat</button> <div class="my-2"><label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">Your hand:</span></label> <!></div> <!>',1),eI=m.from_html('<li><span class="badge text-bg-outline-success">IN</span></li>'),ey=m.from_html("<span>MOVE</span>"),eN=m.from_html("<span>OUT</span>"),eA=m.from_html("<!> <li><span> </span> <!> <!> </li>",1),ex=m.from_html("<li>No players!</li>"),eE=m.from_html("<li> <span> </span> </li>"),ew=m.from_html("<li>No leavers yet!</li>"),eS=m.from_html("<div>Your cards <!></div> <div>Actual cards <!></div> <div>Claimed cards <!></div>",1),eO=m.from_html('<div class="mb-2"><!></div> <div class="row"><div class="col-12 mb-3"><div class="mb-2 text-center"> <!></div> <!> <!></div> <div class="col-12 col-sm-4"><b>Active Players</b> <ol class="list-unstyled"></ol> <b>Done Players</b> <ol class="list-unstyled"></ol></div> <div class="col-12 col-sm-8"><!></div> <div class="col mt-2"><!> <!></div></div> <div> </div> <b>Lobby</b> <!>',1);m.delegate(["click","change"]);var eL=s(108),eP=m.from_html('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,s(102).A)(function(e,t){let s;m.push(t,!0);let i=new g.Ay,n=new P(i),a=m.derived(()=>n.room),r=m.derived(()=>n.canReset),o=m.derived(()=>n.pastGames),l=m.derived(()=>n.leaderboard),d=m.derived(()=>n.localClient),c=m.derived(()=>n.roundState),T=(0,eL.C)("game/mp/_shared/name","");var M=eP(),y=m.first_child(M);(0,f.A)(y,{onchange:()=>n.sendRename(T.value),get value(){return T.value},set value($$value){T.value=$$value}});var N=m.sibling(y,2);m.bind_this((0,b.A)(N,{gameId:"cheat-zoded3ozqeqvek0bpz3fow",roomType:"CheatRoom",get gameRoom(){return n.room},onJoinedRoom:e=>n.enterGame(e,T.value),formatGameMode:e=>E((0,C.e)(x,e)),get roomCreateOptions(){return x}}),e=>s=e,()=>s);var A=m.sibling(N,2);{let e=m.derived(()=>m.get(c)===R.mk.INTERMISSION);(0,k.A)(A,{get inGame(){return m.get(a)},get isActive(){return n.localClient.active},get canReady(){return m.get(e)},get isReady(){return n.localClient.ready},onActive:()=>n.sendActive(),onReady:()=>n.sendReady(),onDisconnect:()=>(n.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,i,a,r,o,l,d,c,u,g,v,_,f,k,C,b,T,M,y,N,A,x,w,S,O,L,P,U,D,$,V,H,Y,F,B,z;let W,J,G,K,j,eL,eP,eU,eD,e$,eV;s={get gameState(){return n}},m.push(s,!0),W=m.prop(s,"gameState",7),J=m.derived(()=>W().localClient),G=m.derived(()=>W().roundState),K=m.derived(()=>W().playerInfo),j=m.derived(()=>W().turnIndex),eL=m.derived(()=>W().playing),eP=m.derived(()=>W().canMove),eU=m.derived(()=>W().playerDiscInfo),eD=m.derived(()=>W().moveHistory),e$=m.state(!1),i=eO(),a=m.first_child(i),r=m.child(a),o=e=>{var t=m.text("Waiting for players…");m.append(e,t)},l=e=>{var t=ec(),s=m.first_child(t),i=e=>{var t=m.text("Intermission:");m.append(e,t)},n=e=>{var t=m.comment(),s=m.first_child(t),i=e=>{var t=m.text("Make a move:");m.append(e,t)},n=e=>{var t=m.comment(),s=m.first_child(t),i=e=>{var t=m.text("Waiting for others to move…");m.append(e,t)},n=e=>{var t=m.text("Spectating:");m.append(e,t)};m.if(s,e=>{m.get(J).inRound?e(i):e(n,!1)},!0),m.append(e,t)};m.if(s,e=>{m.get(eP)?e(i):e(n,!1)},!0),m.append(e,t)};m.if(s,e=>{m.get(G)===R.mk.INTERMISSION?e(i):e(n,!1)});var a=m.sibling(s,2);(0,X.A)(a,{get startTime(){return W().roundTimerStart},get endTime(){return W().roundTimerEnd},get active(){return W().room}}),m.append(e,t)},m.if(r,e=>{m.get(G)==R.mk.WAITING?e(o):e(l,!1)}),m.reset(a),d=m.sibling(a,2),c=m.child(d),u=m.child(c),g=m.child(u),v=m.sibling(g),_=e=>{var t=ep(),s=m.first_child(t),i=m.sibling(s),n=m.child(i,!0);m.reset(i);var a=m.sibling(i);m.template_effect(()=>{m.set_text(s,`Move ${W().trickTurn??""}: `),m.set_text(n,ed[W().trickRank]),m.set_text(a,` \xd7${W().trickCount??""}`)}),m.append(e,t)},f=e=>{var t=m.text("Move 0");m.append(e,t)},m.if(v,e=>{W().trickTurn?e(_):e(f,!1)}),m.reset(u),k=m.sibling(u,2),C=e=>{let t,s=m.derived(()=>m.get(e$)?q:Q.A);var i=eM(),n=m.first_child(i);n.__click=()=>W().sendMoveCallCheat();var a=m.sibling(n,2),r=m.child(a),o=m.child(r);m.remove_input_defaults(o),m.next(2),m.reset(r);var l=m.sibling(r,2);m.component(l,()=>m.get(s),(e,t)=>{t(e,{get ranks(){return ed},get cards(){return W().cardCountHandMine}})}),m.reset(a);var d=m.sibling(a,2),c=e=>{let t,s=m.derived(()=>W().mode.optTricks!==p.FORCED&&W().trickTurn),i=m.derived(()=>W().pendingMoveClaim<0),n=m.derived(()=>m.get(i)?m.get(s):W().allowRank(W().pendingMoveClaim)),a=m.derived(()=>m.get(i)||W().allowCount(W().pendingMoveTotal)),r=m.derived(()=>m.get(n)?"":"outline-"),o=m.derived(()=>m.get(a)?"":"outline-");var l=eT(),d=m.first_child(l),c=m.sibling(m.child(d)),u=e=>{var t=eh();m.template_effect(()=>m.set_class(t,1,`badge text-bg-${m.get(s)?"":"outline-"}danger`)),m.append(e,t)},g=e=>{var t=ev(),s=m.first_child(t),i=m.child(s,!0);m.reset(s);var n=m.sibling(s),a=m.sibling(n),l=e=>{var t=em();m.append(e,t)},d=e=>{var t=m.comment(),s=m.first_child(t),i=e=>{var t=eu();m.template_effect(()=>m.set_class(t,1,`badge text-bg-${m.get(o)??""}success`)),m.append(e,t)},n=e=>{var t=eg();m.template_effect(()=>m.set_class(t,1,`badge text-bg-${m.get(o)??""}warning`)),m.append(e,t)};m.if(s,e=>{W().pendingMoveTotal==BigInt(W().pendingMoveNum[W().pendingMoveClaim])+BigInt(W().pendingMoveNum[h.Joker])?e(i):e(n,!1)},!0),m.append(e,t)};m.if(a,e=>{W().pendingMoveTotal>6n*W().mode.optDecks?e(l):e(d,!1)}),m.template_effect(()=>{m.set_class(s,1,`badge text-bg-${m.get(r)??""}light`),m.set_text(i,ed[W().pendingMoveClaim]),m.set_text(n,` \xd7${W().pendingMoveTotal??""} `)}),m.append(e,t)};m.if(c,e=>{m.get(i)?e(u):e(g,!1)}),m.reset(d);var v=m.sibling(d,2),_=m.child(v);_.__click=()=>(W().pendingMoveClaim=-1,W().sendMove());var f=m.sibling(_,2);m.each(f,17,()=>({length:h.NUM-1}),m.index,(e,t,s)=>{let i;var n=e_();n.__click=()=>(W().pendingMoveClaim=s,W().sendMove());var a=m.child(n,!0);m.reset(n),m.template_effect(e=>{i=m.set_class(n,1,`fw-bold w-100 btn btn-${W().pendingMoveClaimAck==s?"":"outline-"}${e??""}`,null,i,{active:W().pendingMoveClaim==s}),m.set_text(a,ed[s])},[()=>W().allowRank(s)?"primary":"secondary"]),m.append(e,n)}),m.reset(v);var k=m.sibling(v,2);m.each(k,21,()=>({length:h.NUM}),m.index,(e,t,s)=>{var i=m.comment(),n=m.first_child(i),a=e=>{let t=m.derived(()=>W().cardCountHandMine[s].toString());var i=ef(),n=m.child(i),a=m.sibling(n);m.remove_input_defaults(a),a.__change=()=>W().sendMove();var r=m.sibling(a,2);m.remove_input_defaults(r),r.__change=()=>W().sendMove(),m.reset(i),m.template_effect(e=>{m.set_text(n,`${ed[s]??""} `),m.set_class(a,1,`form-control is-${e??""}valid`),m.set_attribute(a,"max",m.get(t)),m.set_attribute(r,"max",m.get(t))},[()=>W().pendingMoveNum[s]===Number(W().pendingMoveAck[s])?"":"in"]),m.bind_value(a,()=>W().pendingMoveNum[s],e=>W().pendingMoveNum[s]=e),m.bind_value(r,()=>W().pendingMoveNum[s],e=>W().pendingMoveNum[s]=e),m.append(e,i)};m.if(n,e=>{W().cardCountHandMine[s]&&e(a)}),m.append(e,i)}),m.reset(k);var C=m.sibling(k,2),b=e=>{var t=eR(),s=m.child(t),r=e=>{var t=ek(),s=m.sibling(m.first_child(t)),i=e=>{var t=m.text();t.nodeValue=" on a new trick",m.append(e,t)};m.if(s,e=>{W().mode.optTricks!==p.FORCED&&e(i)}),m.next(),m.append(e,t)},o=e=>{var t=eb(),s=m.first_child(t),i=e=>{var t=m.text();m.template_effect(()=>m.set_text(t,`Rank ${ed[W().pendingMoveClaim]??""} is not allowed.`)),m.append(e,t)};m.if(s,e=>{m.get(n)||e(i)});var r=m.sibling(s,2),o=e=>{var t=eC(),s=m.first_child(t),i=m.sibling(s),n=e=>{var t=m.text();t.nodeValue=" on a new trick",m.append(e,t)};m.if(i,e=>{!W().pendingMoveTotal&&W().mode.optCountZero&&e(n)}),m.next(),m.template_effect(()=>m.set_text(s,`Count ${W().pendingMoveTotal??""} is not allowed`)),m.append(e,t)};m.if(r,e=>{m.get(a)||e(o)}),m.append(e,t)};m.if(s,e=>{m.get(i)?e(r):e(o,!1)}),m.reset(t),m.append(e,t)};m.if(C,e=>{m.get(n)&&m.get(a)||e(b)});var R=m.sibling(C,2),T=m.child(R);T.__click=()=>W().sendMoveEnd(),m.reset(R),m.template_effect(()=>{t=m.set_class(_,1,`fw-bold w-100 btn btn-${W().pendingMoveClaimAck<0?"":"outline-"}${m.get(s)?"danger":"secondary"}`,null,t,{active:m.get(i)}),m.set_class(T,1,`btn btn-${W().callTimerActive?"outline-":""}primary d-block w-100 mb-2`)}),m.append(e,l)};m.if(d,e=>{m.get(eP)&&e(c)}),m.template_effect(()=>t=m.set_class(n,1,`btn btn-${W().canChallenge&&W().shouldChallenge?"":"outline-"}danger d-block w-100 mb-2`,null,t,{disabled:!W().canChallenge})),m.bind_checked(o,()=>m.get(e$),e=>m.set(e$,e)),m.append(e,i)},m.if(k,e=>{m.get(eL)&&e(C)}),b=m.sibling(k,2),T=e=>{(0,X.A)(e,{get startTime(){return W().callTimerStart},get endTime(){return W().callTimerEnd},get active(){return W().room}})},m.if(b,e=>{W().room&&m.get(G)===R.mk.ACTIVE&&W().callTimerActive&&e(T)}),m.reset(c),M=m.sibling(c,2),y=m.sibling(m.child(M),2),m.each(y,21,()=>m.get(K),m.index,(e,t,s)=>{let i=m.derived(()=>W().playerIsMe(m.get(t))),n=m.derived(()=>m.get(i)?"":"-outline");var a=eA(),r=m.first_child(a),o=e=>{var t=eI();m.append(e,t)};m.if(r,e=>{s===W().passIndex&&m.get(K).length>1&&e(o)});var l=m.sibling(r,2),d=m.child(l),c=m.child(d,!0);m.reset(d);var p=m.sibling(d,2),h=e=>{var t=ey();m.template_effect(()=>m.set_class(t,1,`badge text-bg${m.get(n)??""}-primary`)),m.append(e,t)};m.if(p,e=>{s===m.get(j)&&e(h)});var u=m.sibling(p,2),g=e=>{var t=eN();m.template_effect(()=>m.set_class(t,1,`badge text-bg${m.get(n)??""}-danger`)),m.append(e,t)};m.if(u,e=>{m.get(t).passed&&e(g)});var v=m.sibling(u);m.reset(l),m.template_effect(e=>{m.set_class(d,1,`badge text-bg${m.get(n)??""}-${s===m.get(j)?"primary":"secondary"}`),m.set_text(c,e),m.set_text(v,` ${m.get(t).handSize??""}`)},[()=>W().formatPlayerName(m.get(t))]),m.append(e,a)},e=>{var t=ex();m.append(e,t)}),m.reset(y),N=m.sibling(y,4),m.each(N,21,()=>m.get(eU),m.index,(e,t,s)=>{let i=m.derived(()=>m.get(t).isMe?"":"-outline");var n=eE(),a=m.child(n),r=m.sibling(a),o=m.child(r,!0);m.reset(r);var l=m.sibling(r);m.reset(n),m.template_effect(e=>{m.set_text(a,`#${s+(s>=W().discIndex?1+m.get(K).length:1)}: `),m.set_class(r,1,`badge text-bg${m.get(i)??""}-${m.get(t).handSize?"danger":"success"}`),m.set_text(o,m.get(t).ownerName),m.set_text(l,` (${m.get(t).handSize?"left "+m.get(t).handSize:"won"}) on trick ${m.get(t).trickNum??""} in ${e??""}`)},[()=>(0,I.a3)(m.get(t).duration)]),m.append(e,n)},e=>{var t=ew();m.append(e,t)}),m.reset(N),m.reset(M),A=m.sibling(M,2),x=m.child(A),w={get moves(){return m.get(eD)}},m.push(w,!0),eV=m.state(!0),S=el(),O=m.sibling(m.first_child(S),2),L=m.child(O),m.remove_input_defaults(L),m.next(2),m.reset(O),P=m.sibling(O,2),m.each(P,21,()=>w.moves,m.index,(e,t)=>{let s;var i=eo(),n=m.first_child(i),a=m.child(n),r=e=>{var s=m.text();m.template_effect(()=>m.set_text(s,`[${m.get(t).trick??""}:${m.get(t).turn??""} end${m.get(t).move?" by pass":""}]`)),m.append(e,s)},o=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{let s=m.derived(()=>m.get(t).playerIsMe?"":"-outline");var i=et(),n=m.first_child(i),a=m.child(n,!0);m.reset(n);var r=m.sibling(n,2),o=m.child(r,!0);m.reset(r);var l=m.sibling(r),d=e=>{var s=m.text();m.template_effect(()=>m.set_text(s,` \xd7${m.get(t).count??""}`)),m.append(e,s)};m.if(l,e=>{1n!=m.get(t).count&&e(d)}),m.next(),m.template_effect(()=>{m.set_class(n,1,`badge text-bg${m.get(s)??""}-primary`),m.set_text(a,m.get(t).playerName),m.set_text(o,ed[m.get(t).rank])}),m.append(e,i)},a=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{let s=m.derived(()=>m.get(t).playerIsMe?"":"-outline");var i=es(),n=m.first_child(i),a=m.child(n,!0);m.reset(n),m.next(),m.template_effect(()=>{m.set_class(n,1,`badge text-bg${m.get(s)??""}-primary`),m.set_text(a,m.get(t).playerName)}),m.append(e,i)},a=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{let s=m.derived(()=>m.get(t).playerIsMe?"":"-outline"),i=m.derived(()=>m.get(t).victimIsMe?"":"-outline");var n=ei(),a=m.first_child(n),r=m.child(a,!0);m.reset(a);var o=m.sibling(a,2),l=m.child(o,!0);m.reset(o),m.next(),m.template_effect(()=>{m.set_class(a,1,`badge text-bg${m.get(s)??""}-success`),m.set_text(r,m.get(t).playerName),m.set_class(o,1,`badge text-bg${m.get(i)??""}-danger`),m.set_text(l,m.get(t).victimName)}),m.append(e,n)},a=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{let s=m.derived(()=>m.get(t).playerIsMe?"":"-outline");var i=en(),n=m.first_child(i),a=m.child(n,!0);m.reset(n),m.next(),m.template_effect(()=>{m.set_class(n,1,`badge text-bg${m.get(s)??""}-danger`),m.set_text(a,m.get(t).playerName)}),m.append(e,i)},a=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{var s=ea(),i=m.first_child(s),n=m.sibling(i);(0,Q.A)(n,{get ranks(){return ed},get cards(){return m.get(t).cards}}),m.template_effect(()=>m.set_text(i,`${{play:"You played",penalty:"You took",reveal:"Previous move",reveal2:"Cards under previous move"}[m.get(t).type]??""}: `)),m.append(e,s)},a=e=>{var s=m.comment(),i=m.first_child(s),n=e=>{let s=m.derived(()=>m.get(t).playerIsMe?"":"-outline");var i=er(),n=m.first_child(i),a=m.child(n,!0);m.reset(n);var r=m.sibling(n);m.template_effect(()=>{m.set_class(n,1,`badge text-bg${m.get(s)??""}-secondary`),m.set_text(a,m.get(t).playerName),m.set_text(r,` left, discarding \xd7${m.get(t).handSize??""}.`)}),m.append(e,i)},a=e=>{var s=m.text();m.template_effect(e=>m.set_text(s,`[unknown move ${e??""}]`),[()=>JSON.stringify(m.get(t))]),m.append(e,s)};m.if(i,e=>{"leave"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(i,e=>{"play"==m.get(t).type||"penalty"==m.get(t).type||"reveal"==m.get(t).type||"reveal2"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(i,e=>{"callFail"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(i,e=>{"callSuccess"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(i,e=>{"pass"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(i,e=>{"move"==m.get(t).type?e(n):e(a,!1)},!0),m.append(e,s)};m.if(a,e=>{"tEnd"==m.get(t).type?e(r):e(o,!1)}),m.reset(n),m.sibling(n).nodeValue="  ",m.template_effect(()=>s=m.set_class(n,1,"",null,s,{"d-inline-block":m.get(eV)})),m.append(e,i)},e=>{m.next();var t=m.text("No moves yet!");m.append(e,t)}),m.reset(P),m.bind_checked(L,()=>m.get(eV),e=>m.set(eV,e)),m.append(x,S),m.pop(),m.reset(A),U=m.sibling(A,2),D=m.child(U),$=e=>{var t=eS(),s=m.first_child(t),i=m.sibling(m.child(s));{let e=m.derived(()=>[["Hand",W().cardCountHandMine],["Played",W().cardCountAllMine.map((e,t)=>e-W().cardCountHandMine[t])],["Yours",W().cardCountAllMine]]);(0,Z.A)(i,{get ranks(){return ed},get counts(){return m.get(e)}})}m.reset(s);var n=m.sibling(s,2),a=m.sibling(m.child(n));{let e=m.derived(()=>[["Yours",W().cardCountAllMine],["Others",W().cardCountTotal.map((e,t)=>e-W().cardCountAllMine[t])],["Total",W().cardCountTotal]]);(0,Z.A)(a,{get ranks(){return ed},get counts(){return m.get(e)}})}m.reset(n);var r=m.sibling(n,2),o=m.sibling(m.child(r));{let e=m.derived(()=>[["Your Claim",W().cardCountClaimMine],["Others Claim",W().cardCountClaimOthers],["Remaining Claim",W().cardCountClaimRemain],["Total",W().cardCountTotal]]);(0,Z.A)(o,{get ranks(){return ed},get counts(){return m.get(e)}})}m.reset(r),m.append(e,t)},V=e=>{{let t=m.derived(()=>[["Others Claim",W().cardCountClaimOthers],["Remaining Claim",W().cardCountClaimRemain],["Total",W().cardCountTotal]]);(0,Z.A)(e,{get ranks(){return ed},get counts(){return m.get(t)}})}},m.if(D,e=>{m.get(G)===R.mk.ACTIVE&&m.get(eL)?e($):e(V,!1)}),H=m.sibling(D,2),Y=e=>{{let t=m.derived(()=>m.get(K).map(e=>[W().formatPlayerName(e),e.discardClaim]));(0,Z.A)(e,{get ranks(){return ed},get counts(){return m.get(t)}})}},m.if(H,e=>{m.get(K).length&&e(Y)}),m.reset(U),m.reset(d),F=m.sibling(d,2),B=m.child(F),m.reset(F),z=m.sibling(F,4),(0,ee.A)(z,{get localClient(){return W().localClient},get inGame(){return W().roundPlayers},get inQueue(){return W().roundPlayerQueue},get spectators(){return W().spectators}}),m.template_effect(e=>{m.set_text(g,`Trick ${W().trickNum??""} `),m.set_text(B,`Game Mode: ${e??""}`)},[()=>E(W().mode)]),m.append(e,i),m.pop()},$$slots:{default:!0}})}var w=m.sibling(A,2),S=m.child(w),O=m.child(S);(0,v.A)(O,{get canClear(){return m.get(o).length},onClear:()=>n.clearHistory(),children:(e,t)=>{var s,i;s={get results(){return m.get(o)}},m.push(s,!0),i=B(),m.each(i,21,()=>s.results,m.index,(e,t)=>{var s=Y(),i=m.child(s),n=m.child(i),a=m.sibling(n);m.each(a,17,()=>m.get(t).players,m.index,(e,t,s)=>{m.next();var i=H(),n=m.first_child(i);n.nodeValue="  ";var a=m.sibling(n),r=m.child(a);r.nodeValue=`#${s+1} `;var o=m.sibling(r),l=m.child(o,!0);m.reset(o);var d=m.sibling(o);m.reset(a),m.template_effect(e=>{m.set_class(o,1,`badge text-bg${m.get(t).isMe?"":"-outline"}-${s?"secondary":"primary"}`),m.set_text(l,m.get(t).name),m.set_text(d,` (on ${m.get(t).trickNum??""} in ${e??""})`)},[()=>(0,I.a3)(m.get(t).duration)]),m.append(e,i)}),m.reset(i),m.reset(s),m.template_effect(e=>m.set_text(n,`Trick ${m.get(t).trickNum??""} in ${e??""}: `),[()=>(0,I.a3)(m.get(t).duration)]),m.append(e,s)},e=>{var t=F();m.append(e,t)}),m.reset(i),m.append(e,i),m.pop()},$$slots:{default:!0}});var L=m.sibling(O,2);(0,_.A)(L,{get leaderboard(){return m.get(l)},get localClient(){return m.get(d)},get inGame(){return m.get(a)},get canReset(){return m.get(r)},onReset:()=>n.sendReset(),columns:[["Score",e=>e.score],["Wins",e=>e.wins],["Loss",e=>e.losses],["Streak",e=>e.streak],["Best Rank",e=>e.rankBest],["Worst Rank",e=>e.rankWorst],["Last Rank",e=>e.rankLast]]}),m.reset(S);var U=m.sibling(S,2),D=m.child(U);(0,u.A)(D,{get chatState(){return i},get canSend(){return n.room},onInput:e=>(0,g.Oo)(n,e)}),m.reset(U),m.reset(w),m.append(e,M),m.pop()})},2(e,t,s){s.r(t),s.d(t,{CLASS:()=>E.tp,FILENAME:()=>n.Uh,HMR:()=>n.OM,NAMESPACE_SVG:()=>n.pQ,STYLE:()=>E.Y,aborted:()=>et.QH,action:()=>A.X,active_effect:()=>el.Fg,add_legacy_event_listener:()=>q.oe,add_locations:()=>l.D,add_svelte_meta:()=>a.G7,animation:()=>U.lY,append:()=>Q.BC,append_styles:()=>N.k,apply:()=>S.Bb,assign:()=>r.kp,assign_and:()=>r._R,assign_nullish:()=>r.Sc,assign_or:()=>r.im,async:()=>u.b,async_derived:()=>ee.zx,attach:()=>x.K,attachment:()=>i.r,attr:()=>eu.CF,attribute_effect:()=>E.p_,autofocus:()=>O.wC,await:()=>v.x,bind_active_element:()=>D.m,bind_buffered:()=>V.w$,bind_checked:()=>$.mS,bind_content_editable:()=>W.b1,bind_current_time:()=>V.M$,bind_element_size:()=>B.B,bind_ended:()=>V.$T,bind_files:()=>$.md,bind_focused:()=>W.oP,bind_group:()=>$.CJ,bind_muted:()=>V.iX,bind_online:()=>H.s,bind_paused:()=>V.lY,bind_playback_rate:()=>V.hc,bind_played:()=>V.YL,bind_prop:()=>Y.E,bind_property:()=>W.IY,bind_ready_state:()=>V.mM,bind_resize_observer:()=>B.y,bind_seekable:()=>V.xx,bind_seeking:()=>V.Je,bind_select_value:()=>F.$t,bind_this:()=>z.L,bind_value:()=>$.oJ,bind_volume:()=>V.Jo,bind_window_scroll:()=>J.f,bind_window_size:()=>J.r,boundary:()=>ea.pP,bubble_event:()=>q.Ib,check_target:()=>p.X,child:()=>em.jf,cleanup_styles:()=>o.O,clsx:()=>eu.$z,comment:()=>Q.Im,component:()=>M.s,create_custom_element:()=>eh.Q,create_ownership_validator:()=>c.a,css_props:()=>k.d,customizable_select:()=>L.M,deep_read:()=>el.o1,deep_read_state:()=>el.iT,deferred_template_effect:()=>et.vc,delegate:()=>S.Mm,derived:()=>ee.eO,derived_safe_equal:()=>ee.Xd,document:()=>em.gk,each:()=>C._,eager:()=>X.no,effect:()=>et.QZ,effect_root:()=>et.Fc,effect_tracking:()=>et.oJ,element:()=>I.N,equals:()=>ef.aI,event:()=>S.f0,exclude_from_object:()=>el.SE,fallback:()=>ev.Np,first_child:()=>em.es,flush:()=>X.qX,for_await_track_reactivity_loss:()=>Z.IP,from_html:()=>Q.vU,from_mathml:()=>Q.$N,from_svg:()=>Q._i,from_tree:()=>Q.el,get:()=>el.Jt,head:()=>y.d,hmr:()=>d.c,html:()=>b.q,hydrate_template:()=>G.PK,if:()=>_.A,index:()=>C.P,init:()=>j.T,init_select:()=>F.wf,inspect:()=>m.N,invalid_default_snippet:()=>e_.y8,invalidate_inner_signals:()=>er.p,invalidate_store:()=>en.qB,invoke_error_boundary:()=>eC.n,key:()=>f.E,legacy_api:()=>p.j,legacy_pre_effect:()=>et.M3,legacy_pre_effect_reset:()=>et.iq,legacy_rest_props:()=>ei.gj,log_if_contains_state:()=>ek.f,mark_store_binding:()=>en.io,mutable_source:()=>es.zg,mutate:()=>es.Tk,next:()=>G.K2,noop:()=>ev.lQ,once:()=>K.Oo,pending:()=>ea.Ub,pop:()=>a.uY,preventDefault:()=>K.wo,prevent_snippet_stringification:()=>e_.bk,prop:()=>ei._w,props_id:()=>Q.zA,proxy:()=>ep.B,push:()=>a.VC,raf:()=>ec.e,reactive_import:()=>q.Iu,remove_input_defaults:()=>E.R0,remove_textarea_child:()=>O.VU,render_effect:()=>et.VB,replay_events:()=>S.ES,reset:()=>G.cL,rest_props:()=>ei.iR,run:()=>Z.eF,run_after_blockers:()=>Z.db,safe_get:()=>el.$i,sanitize_slots:()=>R.i,save:()=>Z.UN,select_option:()=>F.fs,selectedcontent:()=>L.B,self:()=>K.bg,set:()=>es.hZ,set_attribute:()=>E.aI,set_checked:()=>E.BY,set_class:()=>w.y,set_custom_element_data:()=>E.p,set_default_checked:()=>E.V$,set_default_value:()=>E.xp,set_selected:()=>E.$Z,set_style:()=>P.h,set_text:()=>eo.j,set_value:()=>E.to,set_xlink_attribute:()=>E.To,setup_stores:()=>en.DZ,sibling:()=>em.hg,slot:()=>R.N,snapshot:()=>eg.P,snippet:()=>T.UA,spread_props:()=>ei.Du,state:()=>es.wk,stopImmediatePropagation:()=>K.CA,stopPropagation:()=>K.dG,store_get:()=>en.Hz,store_mutate:()=>en.hY,store_set:()=>en.fT,store_unsub:()=>en.QK,strict_equals:()=>ef.IP,tag:()=>h.Tc,tag_proxy:()=>h._e,template_effect:()=>et.vN,text:()=>Q.Qq,tick:()=>el.io,to_array:()=>ev._N,trace:()=>h.uP,track_reactivity_loss:()=>Z.t_,transition:()=>U.kY,trusted:()=>K.IZ,untrack:()=>el.vz,update:()=>es.yo,update_legacy_props:()=>q.hp,update_pre:()=>es.cE,update_pre_prop:()=>ei.CB,update_pre_store:()=>en.IL,update_prop:()=>ei.k$,update_store:()=>en.yb,user_effect:()=>et.MW,user_pre_effect:()=>et.Go,validate_binding:()=>ed.R,validate_dynamic_element_tag:()=>e_.Bm,validate_each_keys:()=>ed.e,validate_snippet_args:()=>g.j,validate_store:()=>e_.T3,validate_void_dynamic_element:()=>e_.zA,wait:()=>Z.uk,window:()=>em.Lk,with_script:()=>Q.jB,wrap_snippet:()=>T.DK});var i=s(3),n=s(4),a=s(23),r=s(46),o=s(47),l=s(48),d=s(49),c=s(50),p=s(51),h=s(20),m=s(52),u=s(53),g=s(111),v=s(54),_=s(55),f=s(56),k=s(57),C=s(58),b=s(59),R=s(60),T=s(43),M=s(61),I=s(62),y=s(66),N=s(67),A=s(68),x=s(69),E=s(70),w=s(72),S=s(39),O=s(34),L=s(75),P=s(73),U=s(63),D=s(76),$=s(77),V=s(78),H=s(79),Y=s(80),F=s(74),B=s(81),z=s(82),W=s(83),J=s(84),G=s(13),K=s(85),j=s(86),q=s(87),Q=s(40),Z=s(32),X=s(24),ee=s(29),et=s(9),es=s(17),ei=s(88),en=s(89),ea=s(30),er=s(35),eo=s(38),el=s(6),ed=s(92),ec=s(64),ep=s(16),eh=s(93),em=s(12),eu=s(71),eg=s(21),ev=s(8),e_=s(44),ef=s(15),ek=s(95),eC=s(26)}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return n[e](s,s.exports,r),s.exports}r.m=n,r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],r.O=(t,s,i,n)=>{if(s){n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[s,i,n];return}for(var o=1/0,a=0;a<e.length;a++){for(var[s,i,n]=e[a],l=!0,d=0;d<s.length;d++)(!1&n||o>=n)&&Object.keys(r.O).every(e=>r.O[e](s[d]))?s.splice(d--,1):(l=!1,n<o&&(o=n));if(l){e.splice(a--,1);var c=i();void 0!==c&&(t=c)}}return t},r.rv=()=>"1.7.3",t={94:0},r.O.j=e=>0===t[e],s=(e,s)=>{var i,n,[a,o,l]=s,d=0;if(a.some(e=>0!==t[e])){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)var c=l(r)}for(e&&e(s);d<a.length;d++)n=a[d],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(c)},(i=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i)),r.ruid="bundler=rspack@1.7.3";var o=r.O(void 0,["14","21","37","38","36","40"],()=>r(148));o=r.O(o)})();