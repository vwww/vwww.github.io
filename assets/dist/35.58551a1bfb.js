"use strict";(self.webpackChunkvwww=self.webpackChunkvwww||[]).push([["35"],{129:function(){var JSON;void 0===window._pio&&(window._pio={}),function(){_pio.channel=function(){},_pio.channel.prototype.call=function(e,t,n,o,r){var i="undefined"!=typeof PLAYERIO_API_HOST?PLAYERIO_API_HOST:(PlayerIO.useSecureApiRequests?"https":"http")+"://api.playerio.com/json/",a=new XMLHttpRequest;"withCredentials"in a?a.open("post",i,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest).open("post",i):a=new _pio.flashWebRequest("post",i);var s=Error();null!=a?(a.send("["+e+"|"+(this.token||"")+"]"+JSON.stringify(t)),a.onload=function(){var e=null;try{var t=a.response||a.responseText;if("["==t[0]){var i=t.indexOf("]");this.token=t.substring(1,i),t=t.substring(i+1)}e=JSON.parse(t)}catch(e){_pio.handleError(s,o,PlayerIOErrorCode.GeneralError,"Error decoding response from webservice: "+e);return}if(void 0===e.errorcode&&void 0===e.message){var l=e;if(r)try{l=r(e)}catch(e){_pio.handleError(s,o,PlayerIOErrorCode.GeneralError,e.message)}n&&n(l)}else _pio.handleError(s,o,e.errorcode,e.message)},a.onerror=function(e){_pio.handleError(s,o,PlayerIOErrorCode.GeneralError,"Error talking to webservice: "+JSON.stringify(e))}):_pio.handleError(s,o,PlayerIOErrorCode.GeneralError,"Need to implement flash calling")},_pio.runCallback=function(e,t,n){try{e&&e(t)}catch(e){var o="Unhandled error in callback: "+e.message;o+="\nStack:\n",o+=e.stack||e.stacktrace||e.StackTrace,n&&(o+="\nCallsite stack:\n",o+=n.stack||n.stacktrace||n.StackTrace),console.log(o)}},_pio.handleError=function(e,t,n,o){var r=_pio.error(n,o);e&&(e.stack&&(r.stack=e.stack),e.stacktrace&&(r.stacktrace=e.stacktrace),e.StackTrace&&(r.StackTrace=e.StackTrace)),t?_pio.runCallback(t,r,e):"undefined"!=typeof console?console.log("No error callback specified for: "+r.code+": "+r.message+"\n"+(r.stack||r.stacktrace||r.StackTrace)):alert("No error callback specified for: "+r.code+": "+r.message+"\n"+(r.stack||r.stacktrace||r.StackTrace))},_pio.error=function(e,t){if(1==arguments.length&&(t=e,e=PlayerIOErrorCode.GeneralError),"number"==typeof e&&(e=PlayerIOErrorCode.codes[e]),"string"!=typeof e)throw console.log(e,t,Error().stack),"Code must be a string!";var n=Error();return new PlayerIOError(e,t,n.stack||n.stacktrace||n.StackTrace)},_pio.debugLog=function(e){"undefined"!=typeof console&&console.log(e)},_pio.convertToKVArray=function(e){var t=[];if(e)for(var n in e)t.push({key:""+n,value:""+e[n]});return t},_pio.convertFromKVArray=function(e){var t={};if(e&&e.length)for(var n in e)t[e[n].key]=e[n].value;return t},_pio.convertToSegmentArray=function(e){var t=[];if(e)for(var n in e)t.push(n+":"+e[n]);return t}}(),window.PlayerIO={useSecureApiRequests:!1,authenticate:function(e,t,n,o,r,i){if("auto"==n.publishingnetworklogin)return void 0===window.PublishingNetwork?void i(new PlayerIOError(PlayerIOErrorCode.GeneralError,"Could not find the PublishingNetwork object on the current page. Did you include the PublishingNetwork.js script?")):void PublishingNetwork.dialog("login",{gameId:e,connectionId:t,__use_usertoken__:!0},function(n){n.error?i(new PlayerIOError(PlayerIOErrorCode.GeneralError,n.error)):void 0===n.userToken?i(new PlayerIOError(PlayerIOErrorCode.GeneralError,"Missing userToken value in result, but no error message given.")):PlayerIO.authenticate(e,t,{userToken:n.userToken},o,r,i)});var a=new _pio.channel;a.authenticate(e,t,_pio.convertToKVArray(n),_pio.convertToSegmentArray(o),"javascript",_pio.convertToKVArray({}),null,r,i,function(t){return a.token=t.token,new _pio.client(a,e,t.gamefsredirectmap,t.userid)})},quickConnect:null,gameFS:function(e){return new _pio.gameFS(e)}},JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var gap,indent,rep,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,o,r,i,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(n=0,i=l.length;n<i;n+=1)a[n]=str(n,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(n=0,i=rep.length;n<i;n+=1)"string"==typeof rep[n]&&(r=str(o=rep[n],l))&&a.push(quote(o)+(gap?": ":":")+r);else for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(r=str(o,l))&&a.push(quote(o)+(gap?": ":":")+r);return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var o;if(gap="",indent="","number"==typeof n)for(o=0;o<n;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,o,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(o=walk(r,n))?r[n]=o:delete r[n]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw SyntaxError("JSON.parse")})}(),function(){var e={},t=0,n="http://192.168.30.154/html5client/FlashFallback/bin-debug/FlashFallback.swf";window.__pio_flashfallback_callback__=function(){var t=e[arguments[0]];if(t){for(var n=[],o=1;o!=arguments.length;o++)n[o-1]=arguments[o];t.apply(null,n)}},_pio.flashWebRequest=function(n,o){var r=this;this.response=null,this.onload=function(){},this.onerror=function(){},this.send=function(i){a(function(a){if(null==a)r.onerror("Browser does not support Cross-Origin (CORS) webrequest or Flash as a fallback method");else{var s="cb"+t++;e[s]=function(t,n){delete e[s],t?(r.response=n,r.onload()):r.onerror(n)},a.webrequest(s,n,o,i)}})}},_pio.flashSocketConnection=function(n,o,r,i,s){var l="cb"+t++,c=this,u=new _pio.messageSerializer,f=!1,h=!1,d=setTimeout(function(){f||(f=!0,r(!1,"Connect attempt timed out"))},o);this.disconnect=function(){console.log("... this shouldn't happen")},this.sendMessage=function(e){console.log("... send msg. this shouldn't happen")},a(function(t){null==t?(f=!0,r(!1,"Browser does not support WebSocket connections and the Flash fallback failed.")):(e[l]=function(e,n){switch(e){case"onopen":f||(clearTimeout(d),f=!0,h=!0,t.socketSend(l,[0]),r(h));break;case"onclose":case"onerror":c.disconnect();break;case"onmessage":s(u.deserializeMessage(n,0,n.length))}},c.disconnect=function(){if(h){h=!1,i();try{t.socketClose(l)}catch(e){_pio.debugLog(e)}}},c.sendMessage=function(e){var n=u.serializeMessage(e);t.socketSend(l,n)},t.socketConnection(l,n))})},_pio.isFlashFallbackEnabled=function(e){a(function(t){e(null!=t)})};var o=null,r=!1,i=null;function a(e){if(null!=o)e(o);else if(r)e(null);else if(null==i){i=[e];var t=setInterval(function(){var e=s();null!=e&&n(e)},50);setTimeout(function(){null==o&&n(null)},3e4);var n=function(e){o=e,r=null==e,clearInterval(t);for(var n=0;n!=i.length;n++)i[n](e)}}else i.push(e)}function s(){var e="__pio_flashfallback__",t="";t+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="10" height="10" style="$style$" id="$id$">',t+='	<param name="movie" value="$src$" />',t+='	<param name="allowNetworking" value="all" />',t+='	<param name="allowScriptAccess" value="always" />',t+="	\x3c!--[if !IE]>--\x3e",t+='	<object type="application/x-shockwave-flash" data="$src$" width="10" height="10" style="$style$">',t+='		<param name="allowNetworking" value="all" />',t+='		<param name="allowScriptAccess" value="always" />',t+="	</object>",t+="	\x3c!--<![endif]--\x3e",t+="</object>",t=(t=(t=t.replace(/\$id\$/gi,e)).replace(/\$src\$/gi,n)).replace(/\$style\$/gi,"width:10px;height:10px");var o=document.getElementById("containerId");if(!o){var r=document.createElement("div");r.setAttribute("id",o),r.setAttribute("style","position:absolute;top:-20px;left:-20px"),r.innerHTML=t;try{document.body.appendChild(r)}catch(e){}}var i=function(e){for(var t=document.getElementsByTagName(e),n=0;n!=t.length;n++)if(t[n].ping&&"pong"==t[n].ping())return t[n]};return i("embed")||i("object")}}(),function(){var e=_pio.channel.prototype;e.connect=function(e,t,n,o,r,i,a,s,l,c,u){this.call(10,{gameid:e,connectionid:t,userid:n,auth:o,partnerid:r,playerinsightsegments:i,clientapi:a,clientinfo:s},l,c,u)},_pio.ApiSecurityRule={RespectClientSetting:0,UseHttp:1,UseHttps:2},e.authenticate=function(e,t,n,o,r,i,a,s,l,c){this.call(13,{gameid:e,connectionid:t,authenticationarguments:n,playerinsightsegments:o,clientapi:r,clientinfo:i,playcodes:a},s,l,c)},e.createRoom=function(e,t,n,o,r,i,a,s){this.call(21,{roomid:e,roomtype:t,visible:n,roomdata:o,isdevroom:r},i,a,s)},e.joinRoom=function(e,t,n,o,r,i,a){this.call(24,{roomid:e,joindata:t,isdevroom:n,serverdomainnameneeded:o},r,i,a)},e.createJoinRoom=function(e,t,n,o,r,i,a,s,l,c){this.call(27,{roomid:e,roomtype:t,visible:n,roomdata:o,joindata:r,isdevroom:i,serverdomainnameneeded:a},s,l,c)},e.listRooms=function(e,t,n,o,r,i,a,s){this.call(30,{roomtype:e,searchcriteria:t,resultlimit:n,resultoffset:o,onlydevrooms:r},i,a,s)},e.userLeftRoom=function(e,t,n,o,r,i){this.call(40,{extendedroomid:e,newplayercount:t,closed:n},o,r,i)},e.writeError=function(e,t,n,o,r,i,a,s){this.call(50,{source:e,error:t,details:n,stacktrace:o,extradata:r},i,a,s)},e.updateRoom=function(e,t,n,o,r,i){this.call(53,{extendedroomid:e,visible:t,roomdata:n},o,r,i)},_pio.ValueType={String:0,Int:1,UInt:2,Long:3,Bool:4,Float:5,Double:6,ByteArray:7,DateTime:8,Array:9,Obj:10},e.createObjects=function(e,t,n,o,r){this.call(82,{objects:e,loadexisting:t},n,o,r)},e.loadObjects=function(e,t,n,o){this.call(85,{objectids:e},t,n,o)},_pio.LockType={NoLocks:0,LockIndividual:1,LockAll:2},e.saveObjectChanges=function(e,t,n,o,r,i){this.call(88,{locktype:e,changesets:t,createifmissing:n},o,r,i)},e.deleteObjects=function(e,t,n,o){this.call(91,{objectids:e},t,n,o)},e.loadMatchingObjects=function(e,t,n,o,r,i,a){this.call(94,{table:e,index:t,indexvalue:n,limit:o},r,i,a)},e.loadIndexRange=function(e,t,n,o,r,i,a,s){this.call(97,{table:e,index:t,startindexvalue:n,stopindexvalue:o,limit:r},i,a,s)},e.deleteIndexRange=function(e,t,n,o,r,i,a){this.call(100,{table:e,index:t,startindexvalue:n,stopindexvalue:o},r,i,a)},e.loadMyPlayerObject=function(e,t,n){this.call(103,{},e,t,n)},e.payVaultReadHistory=function(e,t,n,o,r,i){this.call(160,{page:e,pagesize:t,targetuserid:n},o,r,i)},e.payVaultRefresh=function(e,t,n,o,r){this.call(163,{lastversion:e,targetuserid:t},n,o,r)},e.payVaultConsume=function(e,t,n,o,r){this.call(166,{ids:e,targetuserid:t},n,o,r)},e.payVaultCredit=function(e,t,n,o,r,i){this.call(169,{amount:e,reason:t,targetuserid:n},o,r,i)},e.payVaultDebit=function(e,t,n,o,r,i){this.call(172,{amount:e,reason:t,targetuserid:n},o,r,i)},e.payVaultBuy=function(e,t,n,o,r,i){this.call(175,{items:e,storeitems:t,targetuserid:n},o,r,i)},e.payVaultGive=function(e,t,n,o,r){this.call(178,{items:e,targetuserid:t},n,o,r)},e.payVaultPaymentInfo=function(e,t,n,o,r,i){this.call(181,{provider:e,purchasearguments:t,items:n},o,r,i)},e.payVaultUsePaymentInfo=function(e,t,n,o,r){this.call(184,{provider:e,providerarguments:t},n,o,r)},e.partnerPayTrigger=function(e,t,n,o,r){this.call(200,{key:e,count:t},n,o,r)},e.partnerPaySetTag=function(e,t,n,o){this.call(203,{partnerid:e},t,n,o)},e.notificationsRefresh=function(e,t,n,o){this.call(213,{lastversion:e},t,n,o)},e.notificationsRegisterEndpoints=function(e,t,n,o,r){this.call(216,{lastversion:e,endpoints:t},n,o,r)},e.notificationsSend=function(e,t,n,o){this.call(219,{notifications:e},t,n,o)},e.notificationsToggleEndpoints=function(e,t,n,o,r,i){this.call(222,{lastversion:e,endpoints:t,enabled:n},o,r,i)},e.notificationsDeleteEndpoints=function(e,t,n,o,r){this.call(225,{lastversion:e,endpoints:t},n,o,r)},e.gameRequestsSend=function(e,t,n,o,r,i){this.call(241,{requesttype:e,requestdata:t,requestrecipients:n},o,r,i)},e.gameRequestsRefresh=function(e,t,n,o){this.call(244,{playcodes:e},t,n,o)},e.gameRequestsDelete=function(e,t,n,o){this.call(247,{requestids:e},t,n,o)},e.achievementsRefresh=function(e,t,n,o){this.call(271,{lastversion:e},t,n,o)},e.achievementsLoad=function(e,t,n,o){this.call(274,{userids:e},t,n,o)},e.achievementsProgressSet=function(e,t,n,o,r){this.call(277,{achievementid:e,progress:t},n,o,r)},e.achievementsProgressAdd=function(e,t,n,o,r){this.call(280,{achievementid:e,progressdelta:t},n,o,r)},e.achievementsProgressMax=function(e,t,n,o,r){this.call(283,{achievementid:e,progress:t},n,o,r)},e.achievementsProgressComplete=function(e,t,n,o){this.call(286,{achievementid:e},t,n,o)},e.playerInsightRefresh=function(e,t,n){this.call(301,{},e,t,n)},e.playerInsightSetSegments=function(e,t,n,o){this.call(304,{segments:e},t,n,o)},e.playerInsightTrackInvitedBy=function(e,t,n,o,r){this.call(307,{invitinguserid:e,invitationchannel:t},n,o,r)},e.playerInsightTrackEvents=function(e,t,n,o){this.call(311,{events:e},t,n,o)},e.playerInsightTrackExternalPayment=function(e,t,n,o,r){this.call(314,{currency:e,amount:t},n,o,r)},e.playerInsightSessionKeepAlive=function(e,t,n){this.call(317,{},e,t,n)},e.playerInsightSessionStop=function(e,t,n){this.call(320,{},e,t,n)},e.oneScoreLoad=function(e,t,n,o){this.call(351,{userids:e},t,n,o)},e.oneScoreSet=function(e,t,n,o){this.call(354,{score:e},t,n,o)},e.oneScoreAdd=function(e,t,n,o){this.call(357,{score:e},t,n,o)},e.oneScoreRefresh=function(e,t,n){this.call(360,{},e,t,n)},e.simpleConnect=function(e,t,n,o,r,i,a,s,l){this.call(400,{gameid:e,usernameoremail:t,password:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleRegister=function(e,t,n,o,r,i,a,s,l,c,u,f,h,d){this.call(403,{gameid:e,username:t,password:n,email:o,captchakey:r,captchavalue:i,extradata:a,partnerid:s,playerinsightsegments:l,clientapi:c,clientinfo:u},f,h,d)},e.simpleRecoverPassword=function(e,t,n,o,r){this.call(406,{gameid:e,usernameoremail:t},n,o,r)},e.kongregateConnect=function(e,t,n,o,r,i,a,s,l){this.call(412,{gameid:e,userid:t,gameauthtoken:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleGetCaptcha=function(e,t,n,o,r,i){this.call(415,{gameid:e,width:t,height:n},o,r,i)},e.facebookOAuthConnect=function(e,t,n,o,r,i,a,s,l){this.call(418,{gameid:e,accesstoken:t,partnerid:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.steamConnect=function(e,t,n,o,r,i,a,s,l){this.call(421,{gameid:e,steamappid:t,steamsessionticket:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleUserGetSecureLoginInfo=function(e,t,n){this.call(424,{},e,t,n)},e.leaderboardsGet=function(e,t,n,o,r,i,a,s,l){this.call(431,{group:e,leaderboard:t,index:n,count:o,neighbouruserid:r,filteruserids:i},a,s,l)},e.leaderboardsSet=function(e,t,n,o,r,i){this.call(434,{group:e,leaderboard:t,score:n},o,r,i)},e.leaderboardsCount=function(e,t,n,o,r){this.call(437,{group:e,leaderboard:t},n,o,r)},e.joinCluster=function(e,t,n,o,r,i,a,s,l,c,u,f,h,d,p,g,y){this.call(504,{clusteraccesskey:e,isdevelopmentserver:t,ports:n,machinename:o,version:r,machineid:i,os:a,cpu:s,cpucores:l,cpulogicalcores:c,cpuaddresswidth:u,cpumaxclockspeed:f,rammegabytes:h,ramspeed:d},p,g,y)},e.serverHeartbeat=function(e,t,n,o,r,i,a,s,l,c,u,f,h,d,p,g,y,v,m,b){this.call(510,{serverid:e,appdomains:t,servertypes:n,machinecpu:o,processcpu:r,memoryusage:i,avaliablememory:a,freememory:s,runningrooms:l,usedresources:c,apirequests:u,apirequestserror:f,apirequestsfailed:h,apirequestsexecuting:d,apirequestsqueued:p,apirequeststime:g,serverunixtimeutc:y},v,m,b)},e.getGameAssemblyUrl=function(e,t,n,o,r,i){this.call(513,{clusteraccesskey:e,gamecodeid:t,machineid:n},o,r,i)},e.devServerLogin=function(e,t,n,o,r){this.call(524,{username:e,password:t},n,o,r)},e.webserviceOnlineTest=function(e,t,n){this.call(533,{},e,t,n)},e.getServerInfo=function(e,t,n,o){this.call(540,{machineid:e},t,n,o)},e.socialRefresh=function(e,t,n){this.call(601,{},e,t,n)},e.socialLoadProfiles=function(e,t,n,o){this.call(604,{userids:e},t,n,o)}}(),window.PlayerIOError=function(e,t,n){if(this.code=e,this.message=t,this.stack=n,!this.stack){var o=Error();this.stack=o.stack||o.stacktrace||o.StackTrace}this.toString=function(){return"PlayerIOError["+e+"]: "+t}},PlayerIOError.prototype=Error(),window.PlayerIOErrorCode={UnsupportedMethod:"UnsupportedMethod",GeneralError:"GeneralError",InternalError:"InternalError",AccessDenied:"AccessDenied",InvalidMessageFormat:"InvalidMessageFormat",MissingValue:"MissingValue",GameRequired:"GameRequired",ExternalError:"ExternalError",ArgumentOutOfRange:"ArgumentOutOfRange",GameDisabled:"GameDisabled",UnknownGame:"UnknownGame",UnknownConnection:"UnknownConnection",InvalidAuth:"InvalidAuth",NoServersAvailable:"NoServersAvailable",RoomDataTooLarge:"RoomDataTooLarge",RoomAlreadyExists:"RoomAlreadyExists",UnknownRoomType:"UnknownRoomType",UnknownRoom:"UnknownRoom",MissingRoomId:"MissingRoomId",RoomIsFull:"RoomIsFull",NotASearchColumn:"NotASearchColumn",QuickConnectMethodNotEnabled:"QuickConnectMethodNotEnabled",UnknownUser:"UnknownUser",InvalidPassword:"InvalidPassword",InvalidRegistrationData:"InvalidRegistrationData",InvalidBigDBKey:"InvalidBigDBKey",BigDBObjectTooLarge:"BigDBObjectTooLarge",BigDBObjectDoesNotExist:"BigDBObjectDoesNotExist",UnknownTable:"UnknownTable",UnknownIndex:"UnknownIndex",InvalidIndexValue:"InvalidIndexValue",NotObjectCreator:"NotObjectCreator",KeyAlreadyUsed:"KeyAlreadyUsed",StaleVersion:"StaleVersion",CircularReference:"CircularReference",HeartbeatFailed:"HeartbeatFailed",InvalidGameCode:"InvalidGameCode",VaultNotLoaded:"VaultNotLoaded",UnknownPayVaultProvider:"UnknownPayVaultProvider",DirectPurchaseNotSupportedByProvider:"DirectPurchaseNotSupportedByProvider",BuyingCoinsNotSupportedByProvider:"BuyingCoinsNotSupportedByProvider",NotEnoughCoins:"NotEnoughCoins",ItemNotInVault:"ItemNotInVault",InvalidPurchaseArguments:"InvalidPurchaseArguments",InvalidPayVaultProviderSetup:"InvalidPayVaultProviderSetup",UnknownPartnerPayAction:"UnknownPartnerPayAction",InvalidType:"InvalidType",IndexOutOfBounds:"IndexOutOfBounds",InvalidIdentifier:"InvalidIdentifier",InvalidArgument:"InvalidArgument",LoggedOut:"LoggedOut",InvalidSegment:"InvalidSegment",GameRequestsNotLoaded:"GameRequestsNotLoaded",AchievementsNotLoaded:"AchievementsNotLoaded",UnknownAchievement:"UnknownAchievement",NotificationsNotLoaded:"NotificationsNotLoaded",InvalidNotificationsEndpoint:"InvalidNotificationsEndpoint",NetworkIssue:"NetworkIssue",OneScoreNotLoaded:"OneScoreNotLoaded",PublishingNetworkNotAvailable:"PublishingNetworkNotAvailable",PublishingNetworkNotLoaded:"PublishingNetworkNotLoaded",DialogClosed:"DialogClosed",AdTrackCheckCookie:"AdTrackCheckCookie",codes:{0:"UnsupportedMethod",1:"GeneralError",2:"InternalError",3:"AccessDenied",4:"InvalidMessageFormat",5:"MissingValue",6:"GameRequired",7:"ExternalError",8:"ArgumentOutOfRange",9:"GameDisabled",10:"UnknownGame",11:"UnknownConnection",12:"InvalidAuth",13:"NoServersAvailable",14:"RoomDataTooLarge",15:"RoomAlreadyExists",16:"UnknownRoomType",17:"UnknownRoom",18:"MissingRoomId",19:"RoomIsFull",20:"NotASearchColumn",21:"QuickConnectMethodNotEnabled",22:"UnknownUser",23:"InvalidPassword",24:"InvalidRegistrationData",25:"InvalidBigDBKey",26:"BigDBObjectTooLarge",27:"BigDBObjectDoesNotExist",28:"UnknownTable",29:"UnknownIndex",30:"InvalidIndexValue",31:"NotObjectCreator",32:"KeyAlreadyUsed",33:"StaleVersion",34:"CircularReference",40:"HeartbeatFailed",41:"InvalidGameCode",50:"VaultNotLoaded",51:"UnknownPayVaultProvider",52:"DirectPurchaseNotSupportedByProvider",54:"BuyingCoinsNotSupportedByProvider",55:"NotEnoughCoins",56:"ItemNotInVault",57:"InvalidPurchaseArguments",58:"InvalidPayVaultProviderSetup",70:"UnknownPartnerPayAction",80:"InvalidType",81:"IndexOutOfBounds",82:"InvalidIdentifier",83:"InvalidArgument",84:"LoggedOut",90:"InvalidSegment",100:"GameRequestsNotLoaded",110:"AchievementsNotLoaded",111:"UnknownAchievement",120:"NotificationsNotLoaded",121:"InvalidNotificationsEndpoint",130:"NetworkIssue",131:"OneScoreNotLoaded",200:"PublishingNetworkNotAvailable",201:"PublishingNetworkNotLoaded",301:"DialogClosed",302:"AdTrackCheckCookie"}},function(){_pio.client=function(e,t,n,o){this.connectUserId=o,this.gameId=t,this.gameFS=new _pio.gameFS(t,n),this.errorLog=new _pio.errorLog(e),this.payVault=new _pio.payVault(e),this.bigDB=new _pio.bigDB(e),this.multiplayer=new _pio.multiplayer(e),this.gameRequests=new _pio.gameRequests(e),this.achievements=new _pio.achievements(e),this.playerInsight=new _pio.playerInsight(e),this.oneScore=new _pio.oneScore(e),this.leaderboards=new _pio.leaderboards(e,this.connectUserId),this.notifications=new _pio.notifications(e),this.publishingNetwork=new _pio.publishingNetwork(e,this.connectUserId)}}(),function(){var e={};_pio.gameFS=function(t,n){if("string"==typeof n&&n.length>0){var o=(n||"").split("|");if(o.length>=1)for(var r=e[t.toLowerCase()]={},i=0;i!=o.length;i++){var a=o[i];"alltoredirect"==a||"cdnmap"==a?r.baseUrl=o[i+1]:"alltoredirectsecure"==a||"cdnmapsecure"==a?r.secureBaseUrl=o[i+1]:r["."+a]=o[i+1]}}this.getUrl=function(n,o){if("/"==!n[0])throw _pio.error("The path given to getUrl must start with a slash, like: '/myfile.swf' or '/folder/file.jpg'");var r=e[t];return r?(o?r.secureBaseUrl:r.baseUrl)+(r["."+n]||n):(o?"https":"http")+"://r.playerio.com/r/"+t+n}}}(),function(){_pio.gameRequests=function(e){var t=[];this.waitingRequests="[ERROR: You tried to access gameRequests.waitingRequests before loading waiting requests. You have to call the refresh method first.]";var n=this;function o(e){if(null==e||0==e.length)return[];for(var t=[],n=0;n!=e.length;n++){var o=e[n];t.push(new _pio.gameRequest(o.id,o.type,o.senderuserid,o.created,o.data))}return t}this.send=function(t,n,o,r,i){e.gameRequestsSend(t,_pio.convertToKVArray(n),o,r,i,function(e){})},this.refresh=function(r,i){e.gameRequestsRefresh(t,r,i,function(e){n._playCodes=e.newplaycodes,n.waitingRequests=o(e.requests),e.morerequestswaiting})},this.delete=function(t,r,i){if("object"!=typeof t&&!t.length){var a=_pio.error("The first argument to delete should be an array: client.gameRequests.delete([requests], ...)");_pio.handleError(a,i,a.code,a.message);return}for(var s=[],l=0;l!=t.length;l++){var c=t[l].id;if(c)s.push(c);else{var a=_pio.error("No GameRequest id found on item#"+l+". You have to use requests from the gameRequests.waitingRequests array. For instance: client.gameRequests.delete(client.gameRequests.waitingRequests, ...)");_pio.handleError(a,i,a.code,a.message);return}}e.gameRequestsDelete(s,r,i,function(e){n.waitingRequests=o(e.requests),e.morerequestswaiting})}},_pio.gameRequest=function(e,t,n,o,r){this.id=e,this.type=t,this.senderUserId=n,this.created=new Date(o),this.data=_pio.convertFromKVArray(r)}}(),function(){_pio.errorLog=function(e){this.writeError=function(t,n,o,r){e.writeError("Javascript",t,n,o,_pio.convertToKVArray(r))}}}(),function(){_pio.quickConnect=function(){this.simpleGetCaptcha=function(e,t,n,o,r){new _pio.channel().simpleGetCaptcha(e,t,n,o,r,function(e){return new _pio.simpleGetCaptchaOutput(e.captchakey,e.captchaimageurl)})},this.simpleRecoverPassword=function(e,t,n,o){new _pio.channel().simpleRecoverPassword(e,t,n,o,function(e){})}},_pio.simpleGetCaptchaOutput=function(e,t){this.captchaKey=e,this.captchaImageUrl=t},PlayerIO.quickConnect=new _pio.quickConnect}(),function(){_pio.payVault=function(e){var t=null;this.coins="[ERROR: you tried to access payVault.coins before the vault was loaded. You have to refresh the vault before the .coins property is set to the right value]",this.items="[ERROR: you tried to access payVault.items before the vault was loaded. You have to refresh the vault before the .items property is set to the right value]",this.has=function(e){if(null==t)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var n=0;n!=this.items.length;n++)if(this.items[n].itemKey==e)return!0;return!1},this.first=function(e){if(null==t)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var n=0;n!=this.items.length;n++)if(this.items[n].itemKey==e)return this.items[n];return null},this.count=function(e){if(null==t)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var n=0,o=0;o!=this.items.length;o++)this.items[o].itemKey==e&&n++;return n},this.refresh=function(n,r){e.payVaultRefresh(t,null,n,r,function(e){o(e.vaultcontents)})},this.readHistory=function(t,n,o,r){e.payVaultReadHistory(t,n,null,o,r,function(e){for(var t=[],n=0;n!=e.entries.length;n++){var o=e.entries[n];t.push(new _pio.payVaultHistoryEntry(o.type,o.amount,o.timestamp,o.itemkeys||[],o.reason,o.providertransactionid,o.providerprice))}return t})},this.credit=function(t,n,r,i){e.payVaultCredit(t,n,null,r,i,function(e){o(e.vaultcontents)})},this.debit=function(t,n,r,i){e.payVaultDebit(t,n,null,r,i,function(e){o(e.vaultcontents)})},this.consume=function(t,n,r){if("object"!=typeof t&&!t.length){var i=_pio.error("The first argument to consume should be an array: client.payVault.consume([item], ...)");_pio.handleError(i,r,i.code,i.message);return}for(var a=[],s=0;s!=t.length;s++){var l=t[s].id;if(l)a.push(l);else{var i=_pio.error("No PayVault item id found on item#"+s+". You have to use items from the payVault.items array. For instance: client.payVault.consume([client.payVault.first('sportscar')], ...)");_pio.handleError(i,r,i.code,i.message);return}}e.payVaultConsume(a,null,n,r,function(e){o(e.vaultcontents)})},this.buy=function(t,n,r,i){e.payVaultBuy(_pio.convertBuyItems(t),n,null,r,i,function(e){o(e.vaultcontents)})},this.give=function(t,n,r){e.payVaultGive(_pio.convertBuyItems(t),null,n,r,function(e){o(e.vaultcontents)})},this.getBuyCoinsInfo=function(t,n,o,r){e.payVaultPaymentInfo(t,_pio.convertToKVArray(n),null,o,r,function(e){return _pio.convertFromKVArray(e.providerarguments)})},this.getBuyDirectInfo=function(t,n,o,r,i){e.payVaultPaymentInfo(t,_pio.convertToKVArray(n),_pio.convertBuyItems(o),r,i,function(e){return _pio.convertFromKVArray(e.providerarguments)})};var n=this;function o(e){if(null!=e&&(t=e.version,n.coins=e.coins||0,n.items=[],e.items&&e.items.length))for(var o=0;o!=e.items.length;o++){var r=e.items[o],i=n.items[o]=new _pio.vaultItem(r.id,r.itemkey,new Date().setTime(r.purchasedate));_pio.bigDBDeserialize(r.properties,i,!0)}}},_pio.convertBuyItems=function(e){if(null==e)return[];for(var t=[],n=0;n!=e.length;n++){var o=e[n].itemkey;if(!o)throw _pio.error("You have to specify an itemkey for the payvault item. Example:  {itemkey:'car'}");t.push({itemkey:o,payload:_pio.compareForChanges({itemkey:o},e[n],!0,!0)})}return t},_pio.vaultItem=function(e,t,n){this.id=e,this.itemKey=t,this.purchaseDate=n},_pio.payVaultHistoryEntry=function(e,t,n,o,r,i,a){this.type=e,this.amount=t,this.timestamp=new Date().setTime(n),this.itemKeys=o,this.reason=r,this.providerTransactionId=i,this.providerPrice=a}}(),function(){_pio.bigDB=function(e){var t=this,n=[];function o(){for(var e=0;e<n.length;e++){var t=n[e],o=!0;for(var r in t.objects)if(t.objects[r]._internal_("get-is-saving")){o=!1;break}if(o){for(var r in t.objects)for(var i=e+1;i<n.length;i++){futureSave=n[i];for(var a=0;a<futureSave.objects.length;a++)futureSave.objects[a]==t.objects[r]&&futureSave.fullOverwrite==t.fullOverwrite&&futureSave.useOptimisticLock==t.useOptimisticLock&&(t.changesets[r]=futureSave.changesets[a],t.futureSaves.push(futureSave))}n.splice(e,1),e--,t.execute()}}}function r(e,t){null==e?e=[]:e instanceof Array||(e=[e]),null!=t&&(e=e.concat([t]));for(var n=[],o=0;o!=e.length;o++){var r=e[o];switch(typeof r){case"boolean":n.push({valuetype:_pio.ValueType.Bool,bool:r});break;case"string":n.push({valuetype:_pio.ValueType.String,string:r});break;case"number":r%1!=0?n.push({valuetype:_pio.ValueType.Double,double:r}):r>-0x80000000&&r<0x7fffffff?n.push({valuetype:_pio.ValueType.Int,int:r}):r>0&&r<0xffffffff?n.push({valuetype:_pio.ValueType.UInt,uint:r}):n.push({valuetype:_pio.ValueType.Long,long:r});break;case"object":if(r.getTime&&r.getMilliseconds)n.push({valuetype:_pio.ValueType.DateTime,datetime:r.getTime()});else throw Error("Don't know how to serialize type '"+typeof r+"' for BigDB");break;default:throw Error("Don't know how to serialize type '"+typeof r+"' for BigDB")}}return n}this.createObject=function(n,o,r,i,a){var s=_pio.compareForChanges({},r||{},!0,!0);e.createObjects([{key:o,table:n,properties:s}],!1,i,a,function(e){if(1==e.objects.length)return new _pio.databaseobject(t,n,e.objects[0].key,e.objects[0].version,!1,s);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error creating object")})},this.loadMyPlayerObject=function(n,o){e.loadMyPlayerObject(n,o,function(e){return new _pio.databaseobject(t,"PlayerObjects",e.playerobject.key,e.playerobject.version,!0,e.playerobject.properties)})},this.load=function(n,o,r,i){e.loadObjects([{table:n,keys:[o]}],r,i,function(e){if(1==e.objects.length)return null==e.objects[0]?null:new _pio.databaseobject(t,n,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error loading object")})},this.loadKeys=function(n,o,r,i){e.loadObjects([{table:n,keys:o}],r,i,function(e){for(var o=[],r=0;r!=e.objects.length;r++){var i=e.objects[r];o[r]=null==i?null:new _pio.databaseobject(t,n,i.key,i.version,!1,i.properties)}return o})},this.loadOrCreate=function(n,o,r,i){e.createObjects([{key:o,table:n,properties:[]}],!0,r,i,function(e){if(1==e.objects.length)return new _pio.databaseobject(t,n,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error creating object")})},this.deleteKeys=function(t,n,o,r){e.deleteObjects([{table:t,keys:n}],o,r,function(e){return null})},this.loadKeysOrCreate=function(n,o,r,i){for(var a=[],s=0;s!=o.length;s++)a.push({key:o[s],table:n,properties:[]});e.createObjects(a,!0,r,i,function(e){for(var o=[],r=0;r!=e.objects.length;r++){var i=e.objects[r];o[r]=new _pio.databaseobject(t,n,i.key,i.version,!1,i.properties)}return o})},this.loadSingle=function(n,o,i,a,s){e.loadMatchingObjects(n,o,r(i),1,a,s,function(e){return 0==e.objects.length?null:new _pio.databaseobject(t,n,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties)})},this.loadRange=function(n,o,i,a,s,l,c,u){e.loadIndexRange(n,o,r(i,a),r(i,s),l,c,u,function(e){for(var o=[],r=0;r!=e.objects.length;r++){var i=e.objects[r];o[r]=null==i?null:new _pio.databaseobject(t,n,i.key,i.version,!1,i.properties)}return o})},this.deleteRange=function(t,n,o,i,a,s,l){e.deleteIndexRange(t,n,r(o,i),r(o,a),s,l,function(){})},this.saveChanges=function(t,r,i,a,s){var l=!0==arguments[5],c=[];for(var u in i){var f=i[u];if(!f.existsInDatabase||!f.key||!f.table||!f._internal_||!f.save){var h=_pio.error("You can only save database objects that exist in the database");_pio.handleError(h,s,h.code,h.message);return}var d=_pio.compareForChanges(r?{}:f._internal_("get-dbCurrent"),f,!0,!0);(r||d.length>0)&&c.push({key:f._internal_("get-key"),table:f._internal_("get-table"),fulloverwrite:r,onlyifversion:t?f._internal_("get-version"):null,changes:d})}n.push({objects:i,changesets:c,fullOverwrite:r,useOptimisticLock:t,futureSaves:[],setIsSavingOnAll:function(e){for(var t=0;t!=this.objects.length;t++)this.objects[t]._internal_("set-is-saving",e)},done:function(){this.setIsSavingOnAll(!1),o()},execute:function(){var t=this;t.setIsSavingOnAll(!0),t.changesets.length>0?e.saveObjectChanges(_pio.LockType.LockAll,t.changesets,l,a,function(e){t.done(),_pio.handleError(e,s,e.code,e.message)},function(e){for(var n=0;n!=t.objects.length;n++){var o=t.objects[n];o._internal_("set-version",e.versions[n]),o._internal_("change-dbCurrent",t.changesets[n].changes);for(var r=0;r!=t.futureSaves.length;r++)for(var i=t.futureSaves[r],a=0;a<i.objects.length;a++)i.objects[a]==o&&(i.changesets.splice(a,1),i.objects.splice(a,1),a--)}t.done()}):(t.done(),setTimeout(a,1))}}),o()}},_pio.databaseobject=function(e,t,n,o,r,i){var a={},s=!1;_pio.bigDBDeserialize(i,a,!0),this.table=t,this.key=n,this.existsInDatabase=!0,this.save=function(t,n,o,i){e.saveChanges(t,n,[this],o,i,r)},this._internal_=function(e,r){switch(e){case"get-table":return t;case"get-key":return n;case"set-is-saving":s=r;case"get-is-saving":return s;case"get-version":return o;case"set-version":o=r;case"get-dbCurrent":return a;case"change-dbCurrent":_pio.bigDBDeserialize(r,a,!0)}},_pio.bigDBDeserialize(i,this,!0)},_pio.compareForChanges=function(e,t,n,o){var r=[];for(var i in t){var a=t[i],s=e?e[i]:null;switch(i){case"table":if(o)continue;case"key":if(o)continue;case"save":if(o)continue;case"existsInDatabase":if(o)continue;case"_internal_":if(o)continue;case"_circular_reference_finder_":continue}if(null!=a){var l=n?{name:i}:{index:parseInt(i)};switch(typeof a){case"boolean":a!=s&&(l.value={valuetype:_pio.ValueType.Bool,bool:a},r.push(l));break;case"number":a!=s&&(isFinite(a)&&Math.floor(a)===a?a>=-0x80000000&&a<=0x7fffffff?l.value={valuetype:_pio.ValueType.Int,int:a}:a>0&&a<=0xffffffff?l.value={valuetype:_pio.ValueType.UInt,uint:a}:a>=-0x7ffffffffffffc00&&a<=0x7ffffffffffffc00?l.value={valuetype:_pio.ValueType.Long,long:a}:a>0&&a<=0xfffffffffffff800?l.value={valuetype:_pio.ValueType.ULong,ulong:a}:l.value={valuetype:_pio.ValueType.Double,double:a}:l.value={valuetype:_pio.ValueType.Double,double:a},r.push(l));break;case"string":a!=s&&(l.value={valuetype:_pio.ValueType.String,string:a},r.push(l));break;case"object":if(a.getTime&&a.getMilliseconds)a+""!=s+""&&(l.value={valuetype:_pio.ValueType.DateTime,datetime:a.getTime()},r.push(l));else{if(a._circular_reference_finder_)throw new PlayerIOError(PlayerIOErrorCode.CircularReference,"The object you're trying to save contains a circular reference for "+(n?"a property named":"the array entry")+"): "+i);a._circular_reference_finder_=!0;var c=a instanceof Array;if(c&&a.bytearray){for(var u=Array(a.length),f=0;f!=u.length;f++){var h=a[f];if(h>=0&&h<=255)u[f]=h;else throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"The bytearray property '"+i+"' was supposed to only contain byte (0-255) values, but contained the value: "+h)}l.value={valuetype:_pio.ValueType.ByteArray,bytearray:u}}else{var d=_pio.compareForChanges(s,a,!c,!1);c?l.value={valuetype:_pio.ValueType.Array,arrayproperties:d}:l.value={valuetype:_pio.ValueType.Obj,objectproperties:d}}r.push(l),delete a._circular_reference_finder_}break;case"undefined":case"function":break;default:throw Error("Don't know how to serialize type '"+typeof a+"' for BigDB")}}}for(var i in e)(null==t[i]||void 0===t[i])&&r.push(n?{name:i}:{index:parseInt(i)});return r},_pio.bigDBDeserialize=function(e,t,n){for(var o in e){var r=e[o],i=n?r.name:r.index||0,a=r.value;if(a)switch(a.valuetype||0){case _pio.ValueType.String:t[i]=a.string||"";break;case _pio.ValueType.Int:t[i]=a.int||0;break;case _pio.ValueType.UInt:t[i]=a.uint||0;break;case _pio.ValueType.Long:t[i]=a.long||0;break;case _pio.ValueType.Bool:t[i]=a.bool||0;break;case _pio.ValueType.Float:t[i]=a.float||0;break;case _pio.ValueType.Double:t[i]=a.double||0;break;case _pio.ValueType.ByteArray:t[i]=a.bytearray,t[i].bytearray=!0;break;case _pio.ValueType.DateTime:t[i]=new Date(a.datetime||0);break;case _pio.ValueType.Array:var s=t[i]instanceof Array?t[i]:[];_pio.bigDBDeserialize(a.arrayproperties,s,!1),t[i]=s;break;case _pio.ValueType.Obj:var l="object"==typeof t[i]?t[i]:{};_pio.bigDBDeserialize(a.objectproperties,l,!0),t[i]=l}else delete t[i]}}}(),function(){var e=0,t=1,n=2,o=3,r=4,i=5,a=6,s=7,l=8;_pio.multiplayer=function(e){var t=this;this.developmentServer=null,this.useSecureConnections=!1,this.createRoom=function(n,o,r,i,a,s){e.createRoom(n,o,r,_pio.convertToKVArray(i),null!=t.developmentServer,a,s,function(e){return e.roomid})},this.joinRoom=function(n,o,r,i){clearTimeout(setTimeout(function(){r(new _pio.connection)},1e4));var a=Error();e.joinRoom(n,_pio.convertToKVArray(o),null!=t.developmentServer,t.useSecureConnections,function(){},i,function(e){return new _pio.connection(a,t.developmentServer,t.useSecureConnections,e.endpoints,e.joinkey,o||{},r,i)})},this.createJoinRoom=function(n,o,r,i,a,s,l){clearTimeout(setTimeout(function(){s(new _pio.connection)},1e4));var c=Error();e.createJoinRoom(n,o,r,_pio.convertToKVArray(i),_pio.convertToKVArray(a),null!=t.developmentServer,t.useSecureConnections,function(){},l,function(e){return new _pio.connection(c,t.developmentServer,t.useSecureConnections,e.endpoints,e.joinkey,a||{},s,l)})},this.listRooms=function(n,o,r,i,a,s){e.listRooms(n,_pio.convertToKVArray(o),r,i,null!=t.developmentServer,a,s,function(e){var t=[];if(e.rooms&&e.rooms.length>0)for(var n=0;n!=e.rooms.length;n++){var o=e.rooms[n];t.push(new _pio.roomInfo(o.id,o.roomtype,o.onlineusers,_pio.convertFromKVArray(o.roomdata)))}return t})}},_pio.websocketConnection=function(e,t,n,o,r,i,a){var s=this,l=!1,c=new _pio.messageSerializer,u=!1,f=null,h=(t?"wss://":"ws://")+n+"/";try{f="undefined"!=typeof MozWebSocket?new MozWebSocket(h):new WebSocket(h)}catch(e){r(!1,""+e);return}var d=setTimeout(function(){l||(l=!0,r(!1,"Connect attempt timed out"))},o);f.onopen=function(){l||(clearTimeout(d),l=!0,r(u=!0))},f.onclose=function(e){s.disconnect()},f.onerror=function(e){s.disconnect()},f.onmessage=function(t){if(u)if(e){var n=new FileReader;n.onloadend=function(){for(var e=new Uint8Array(n.result),t=Array(e.length),o=0;o!=e.length;o++)t[o]=e[o];a(c.deserializeMessage(t,0,t.length))},n.readAsArrayBuffer(t.data)}else{var o=_pio.base64decode(t.data);a(c.deserializeMessage(o,0,o.length))}},this.disconnect=function(){if(u){u=!1,i();try{f.close()}catch(e){_pio.debugLog(e)}}},this.sendMessage=function(t){var n=c.serializeMessage(t);if(e){for(var o=new Uint8Array(n.length),r=0;r<n.length;r++)o[r]=n[r];f.send(o.buffer)}else{var i=_pio.base64encode(n);f.send(i)}}},_pio.connection=function(e,t,n,o,r,i,a,s){var l=this,c=!0,u=[],f={},h=[],d=null,p=/(WebKit|Firefox|Trident)\/([0-9]+)/gi.exec(navigator.userAgent),g=p&&p.length>=3?p[1]:null,y=p&&p.length>=3?parseInt(p[2]):null;function v(h){var p=[];if(t)p.push(t);else for(var g=0;g!=o.length;g++)p.push(o[g].address+":"+o[g].port);function y(){if(p.length>0){var t=p[0];p.splice(0,1);var o=h(n,t,4e3,function(e,n){if(e){d=o,l.connected=!0;var a=l.createMessage("join");if(a.addString(r),null!=i)for(var s in i)a.addString(s),a.addString(""+i[s]);l.sendMessage(a)}else _pio.debugLog("Unable to connect to endpoint: "+t+'. reason: "'+n+(p.length>0?'". Trying next endpoint.':'". No more endpoints to try.')),y()},function(e){l.connected&&(l.connected=!1,setTimeout(function(){for(var e=0;e!=u.length;e++)_pio.runCallback(u[e].callback,l,u[e].stackSource)},100))},function(t){c?"playerio.joinresult"==t.type?(c=!1,t.getBoolean(0)?_pio.runCallback(a,l,null):_pio.handleError(e,s,t.getInt(1),t.getString(2))):_pio.handleError(e,s,PlayerIOErrorCode.GeneralError,"The expected inital messagetype is: playerio.joinresult, received: "+joinResult.getType()):(v(t.type,t),v("*",t))})}else _pio.handleError(e,s,PlayerIOErrorCode.GeneralError,"Could not establish a socket connection to any of the given endpoints for the room")}function v(e,t){var n=f[e];if(n)for(var o=0;o<n.length;o++)_pio.runCallback(n[o].callback,t,n[o].stackSource)}y()}window.FileReader&&"WebKit"==g&&y>=535||"Firefox"==g&&y>=11||"Trident"==g&&y>=6?v(function(e,t,n,o,r,i){return new _pio.websocketConnection(!0,e,t,n,o,r,i)}):_pio.isFlashFallbackEnabled(function(e){e?v(function(e,t,n,o,r,i){return new _pio.flashSocketConnection(t,n,o,r,i)}):v(function(e,t,n,o,r,i){return new _pio.websocketConnection(!1,e,t,n,o,r,i)})}),this.connected=!1,this.addDisconnectCallback=function(e){u.push({callback:e,stackSourc:Error()})},this.addMessageCallback=function(e,t){null==e&&(e="*");var n=f[e];n||(f[e]=n=[]),n.push({callback:t,stackSource:Error()})},this.removeDisconnectCallback=function(e){for(var t=0;t<u.length;t++)u[t].callback==e&&(u.splice(t,1),t--)},this.removeMessageCallback=function(e){for(var t in f)for(var n=f[t],o=0;o<n.length;o++)n[o].callback==e&&(n.splice(o,1),o--)},this.createMessage=function(e){for(var t=new _pio.message(e),n=1;n<arguments.length;n++)t.add(arguments[n]);return t},this.send=function(e){var t=this.createMessage.apply(this,arguments);this.sendMessage(t)},this.sendMessage=function(e){l.connected?d.sendMessage(e):h.push(e)},this.disconnect=function(){l.connected&&d.disconnect()}},_pio.message=function(c){var u=this,f=[],h=[];function d(e,t,n,o){if(e)h.push(t),f.push(n),u.length=h.length;else throw _pio.error("The given value ("+t+") is not "+o)}function p(e,t){if(e>h.length)throw _pio.error("this message ("+u.type+") only has "+h.length+" entries");if(f[e]==t)return h[e];throw _pio.error("Value at index:"+e+" is a "+g(f[e])+" and not a "+g(t)+" as requested. The value is: "+h[e])}function g(c){var u={};return u[e]="Integer",u[t]="Unsigned Integer",u[n]="Long",u[o]="Unsigned Long",u[r]="Double",u[i]="Float",u[a]="String",u[s]="ByteArray",u[l]="Boolean",u[c]}function y(e){var t="object"==typeof e&&void 0!==e.length;if(t){for(var n=0;n!=e.length;n++)if(e[n]>255||e[n]<0){t=!1;break}}return t}this.type=c,this.length=0,this.add=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];switch(typeof t){case"string":u.addString(t);break;case"boolean":u.addBoolean(t);break;case"number":if(isFinite(t)&&Math.floor(t)===t){if(t>=-0x80000000&&t<=0x7fffffff){u.addInt(t);break}else if(t>0&&t<=0xffffffff){u.addUInt(t);break}else if(t>=-0x7ffffffffffffc00&&t<=0x7ffffffffffffc00){u.addLong(t);break}else if(t>0&&t<=0xfffffffffffff800){u.addULong(t);break}}u.addDouble(t);break;case"object":if(y(t)){this.addByteArray(t);break}default:throw _pio.error("The type of the value ("+t+") cannot be inferred")}}},this.addInt=function(t){d(t>=-0x80000000&&t<=0x7fffffff,Math.trunc(t),e,"an integer (32bit)")},this.addUInt=function(e){d(e>=0&&e<=0xffffffff,Math.trunc(e),t,"an unsigned integer (32bit)")},this.addLong=function(e){d(e>=-0x7ffffffffffffc00&&e<=0x7ffffffffffffc00,Math.trunc(e),n,"a long (64bit)")},this.addULong=function(e){d(e>=0&&e<=0xfffffffffffff800,e,o,"an unsigned long (64bit)")},this.addBoolean=function(e){d(!0,!!e,l,"a boolean value")},this.addFloat=function(e){d(!0,Number(e),i,"a floating point value (32bit)")},this.addDouble=function(e){d(!0,Number(e),r,"a double floating point value (64bit)")},this.addByteArray=function(e){d(y(e),e,s,"a bytearray")},this.addString=function(e){d(!0,e+"",a,"a string")},this.getInt=function(t){return p(t,e)},this.getUInt=function(e){return p(e,t)},this.getLong=function(e){return p(e,n)},this.getULong=function(e){return p(e,o)},this.getBoolean=function(e){return p(e,l)},this.getDouble=function(e){return p(e,r)},this.getFloat=function(e){return p(e,i)},this.getByteArray=function(e){return p(e,s)},this.getString=function(e){return p(e,a)},this.toString=function(){for(var e="msg.Type = "+this.type,t=0;t!=this.length;t++)e+=", msg["+t+"] = "+h[t]+" ("+g(f[t])+")";return e},this._internal_=function(e,t){switch(e){case"get-objects":return h;case"get-types":return f}}},_pio.roomInfo=function(e,t,n,o){this.id=e,this.roomType=t,this.onlineUsers=n,this.roomData=o},_pio.byteWriter=function(){this.bytes=[],this.writeByte=function(e){if(e>=0&&e<=255)this.bytes.push(e);else throw Error("This is not a byte value: "+e)},this.writeBytes=function(e){for(var t=0;t!=e.length;t++)this.writeByte(e[t])},this.writeTagWithLength=function(e,t,n){e>63||e<0?this.writeBottomPatternAndBytes(n,_pio.binaryserializer.bytesFromInt(e)):this.writeByte(t|e)},this.writeBottomPatternAndBytes=function(e,t){var n=0;0!=t[0]?n=3:0!=t[1]?n=2:0!=t[2]&&(n=1),this.writeByte(e|n);for(var o=t.length-n-1;o!=t.length;o++)this.writeByte(t[o])},this.writeLongPattern=function(e,t,n){for(var o=0,r=0;7!=r;r++)if(0!=n[r]){o=7-r;break}o>3?this.writeByte(t|o-4):this.writeByte(e|o);for(var r=n.length-o-1;r!=n.length;r++)this.writeByte(n[r])}},_pio.messageSerializer=function(){var c=192,u=60,f=192,h=128,d=64,p=4,g=8,y=12,v=16,m=48,b=52,w=56,k=60,_=3,I=2,E=1,S=0;this.serializeMessage=function(c){var u=new _pio.byteWriter;u.length,u.writeTagWithLength(c.length,h,p);var P=_pio.binaryserializer.bytesFromString(c.type);u.writeTagWithLength(P.length,f,y),u.writeBytes(P);for(var C=0;C!=c.length;C++){var R=c._internal_("get-objects")[C];switch(c._internal_("get-types")[C]){case a:var P=_pio.binaryserializer.bytesFromString(R);u.writeTagWithLength(P.length,f,y),u.writeBytes(P);break;case e:u.writeTagWithLength(R,h,p);break;case t:u.writeBottomPatternAndBytes(g,_pio.binaryserializer.bytesFromUInt(R));break;case n:u.writeLongPattern(m,b,_pio.binaryserializer.bytesFromLong(R));break;case o:u.writeLongPattern(w,k,_pio.binaryserializer.bytesFromULong(R));break;case s:u.writeTagWithLength(R.length,d,v),u.writeBytes(R);break;case r:u.writeByte(_),u.writeBytes(_pio.binaryserializer.bytesFromDouble(R));break;case i:u.writeByte(I);var O=_pio.binaryserializer.bytesFromFloat(R);u.writeBytes(O);break;case l:u.writeByte(R?E:S)}}return u.bytes},this.deserializeMessage=function(e,t,n){for(var o=t,r=t+n,i=null,a=0;o<r;){var s=0,l=0,P=e[o];o++;var C=P&c;switch(0==C&&0==(C=P&u)&&(C=P),C){case y:case v:if(o+(s=(3&P)+1)>r)throw Error("Unexpected: Unfinished message");var R=s;s=_pio.binaryserializer.intFromBytes(e,o,s),o+=R;break;case f:s=63&P;break;case h:l=63&P;break;case d:s=63&P;break;case p:case g:case m:case w:s=(3&P)+1;break;case b:case k:s=(3&P)+5;break;case _:s=8;break;case I:s=4}if(o+s>r)throw Error("Unexpected: Unfinished message");switch(C){case y:case f:null==i?(i=new _pio.message(_pio.binaryserializer.stringFromBytes(e,o,s)),a++):i.addString(_pio.binaryserializer.stringFromBytes(e,o,s));break;case p:l=_pio.binaryserializer.intFromBytes(e,o,s);case h:0==a?a=l:i.addInt(l);break;case v:case d:i.addByteArray(e.slice(o,o+s));break;case g:i.addUInt(_pio.binaryserializer.uintFromBytes(e,o,s));break;case m:case b:i.addLong(_pio.binaryserializer.longFromBytes(e,o,s));break;case w:case k:i.addULong(_pio.binaryserializer.ulongFromBytes(e,o,s));break;case _:i.addDouble(_pio.binaryserializer.doubleFromBytes(e,o,s));break;case I:i.addFloat(_pio.binaryserializer.floatFromBytes(e,o,s));break;case E:i.addBoolean(!0);break;case S:i.addBoolean(!1)}if(o+=s,null!=i&&0==--a)return i}throw Error("Unexpected: Misaligned message")}},_pio.binaryserializer={pow2:function(e){return e>=0&&e<31?1<<e:this.pow2[e]||(this.pow2[e]=Math.pow(2,e))},_intEncode:function(e,t){var n=Array(t);if(4==t)n=[e>>>24&255,e>>>16&255,e>>>8&255,255&e];else if(e>=0){var o=Math.floor(e/this.pow2(32)),r=e-o*this.pow2(32);n=[o>>>24&255,o>>>16&255,o>>>8&255,255&o,r>>>24&255,r>>>16&255,r>>>8&255,255&r]}else{var o=Math.floor(e/this.pow2(32)),r=e-o*this.pow2(32);o+=this.pow2(32),n=[o>>>24&255,o>>>16&255,o>>>8&255,255&o,r>>>24&255,r>>>16&255,r>>>8&255,255&r]}return n},_floatEncode:function(e,t,n){var o,r,i=+(e<0),a=~(-1<<n-1),s=1-a;e<0&&(e=-e),0===e?(o=0,r=0):isNaN(e)?(o=2*a+1,r=1):e===1/0?(o=2*a+1,r=0):(o=Math.floor(Math.log(e)/Math.LN2))>=s&&o<=a?(r=Math.floor((e*this.pow2(-o)-1)*this.pow2(t)),o+=a):(r=Math.floor(e/this.pow2(s-t)),o=0);for(var l=[];t>=8;)l.push(r%256),r=Math.floor(r/256),t-=8;for(o=o<<t|r,n+=t;n>=8;)l.push(255&o),o>>>=8,n-=8;return l.push(i<<n|o),l.reverse(),l},bytesFromString:function(e){for(var t=[],n=0;n<e.length;n++)if(127>=e.charCodeAt(n))t.push(e.charCodeAt(n));else for(var o=encodeURIComponent(e.charAt(n)).substr(1).split("%"),r=0;r<o.length;r++)t.push(parseInt(o[r],16));return t},bytesFromInt:function(e){return this._intEncode(e,4)},bytesFromUInt:function(e){return this._intEncode(e,4)},bytesFromLong:function(e){return this._intEncode(e,8)},bytesFromULong:function(e){return this._intEncode(e,8)},bytesFromFloat:function(e){return this._floatEncode(e,23,8)},bytesFromDouble:function(e){return this._floatEncode(e,52,11)},_intDecode:function(e,t,n,o,r){for(var i=t+n-1,a=r&&n==o&&128&e[t],s=0,l=1,c=0;c<n;c++){var u=e[i-c];a&&(l=(u=(255^u)+l)>>8,u&=255),s+=u*this.pow2(8*c)}return a?-s:s},_float32Decode:function(e,t){var n=e.slice(t,t+4).reverse(),o=1-2*(n[3]>>7),r=(n[3]<<1&255|n[2]>>7)-127,i=(127&n[2])<<16|n[1]<<8|n[0];if(128===r)if(0!==i)return NaN;else return 1/0*o;return -127===r?o*i*this.pow2(-149):o*(1+i*this.pow2(-23))*this.pow2(r)},_float64Decode:function(e,t){var n=e.slice(t,t+8).reverse(),o=1-2*(n[7]>>7),r=((n[7]<<1&255)<<3|n[6]>>4)-1023,i=(15&n[6])*this.pow2(48)+n[5]*this.pow2(40)+n[4]*this.pow2(32)+n[3]*this.pow2(24)+n[2]*this.pow2(16)+n[1]*this.pow2(8)+n[0];if(1024===r)if(0!==i)return NaN;else return 1/0*o;return -1023===r?o*i*this.pow2(-1074):o*(1+i*this.pow2(-52))*this.pow2(r)},stringFromBytes:function(e,t,n){for(var o="",r=t;r<t+n;r++)o+=e[r]<=127?37===e[r]?"%25":String.fromCharCode(e[r]):"%"+e[r].toString(16).toUpperCase();return decodeURIComponent(o)},intFromBytes:function(e,t,n){return this._intDecode(e,t,n,4,!0)},uintFromBytes:function(e,t,n){return this._intDecode(e,t,n,4,!1)},longFromBytes:function(e,t,n){return this._intDecode(e,t,n,8,!0)},ulongFromBytes:function(e,t,n){return this._intDecode(e,t,n,8,!1)},floatFromBytes:function(e,t,n){return 4==n?this._float32Decode(e,t):NaN},doubleFromBytes:function(e,t,n){return 8==n?this._float64Decode(e,t):NaN}};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=[],f=0;f!=c.length;f++)u[c.charCodeAt(f)]=f;_pio.base64encode=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n],r=++n<=e.length?e[n]:NaN,i=++n<=e.length?e[n]:NaN,a=o>>2,s=(3&o)<<4|r>>4,l=(15&r)<<2|i>>6,u=63&i;isNaN(r)?l=u=64:isNaN(i)&&(u=64),t.push(c.charAt(a)),t.push(c.charAt(s)),t.push(c.charAt(l)),t.push(c.charAt(u))}return t.join("")},_pio.base64decode=function(e){for(var t=[],n=0;n<e.length;n++){var o=u[e.charCodeAt(n)],r=++n<e.length?u[e.charCodeAt(n)]:64,i=++n<e.length?u[e.charCodeAt(n)]:64,a=++n<e.length?u[e.charCodeAt(n)]:64,s=o<<2|r>>4,l=(15&r)<<4|i>>2,c=(3&i)<<6|a;t.push(s),64!=i&&(t.push(l),64!=a&&t.push(c))}return t}}(),function(){_pio.achievements=function(e){var t=null;this.myAchievements="[ERROR: You tried to access achievements.myAchievements before loading them. You have to call the refresh method first.]",this.onCompleteHandlers=[];var n=this;function o(e,t){var o=new _pio.achievement(e.identifier,e.title,e.description,e.imageurl,e.progress,e.progressgoal,e.lastupdated);if("string"!=typeof n.myAchievements)for(var r=0;r<n.myAchievements.length;r++)n.myAchievements[r].id==o.id&&(n.myAchievements[r]=o,n.currentVersion=null);if(t)for(var r=0;r<n.onCompleteHandlers.length;r++)(0,n.onCompleteHandlers[r])(o);return o}this.addOnComplete=function(e){if("function"==typeof e&&1==e.length)n.onCompleteHandlers.push(e);else throw new PlayerIOError(PlayerIOErrorCode.InvalidArgument,"Expects argument to be a function that takes an achievement as an argument.")},this.get=function(e){if("string"==typeof n.myAchievements)return null;for(var t=0;t<n.myAchievements.length;t++)if(n.myAchievements[t].id==e)return n.myAchievements[t];return null},this.refresh=function(o,r){e.achievementsRefresh(t,o,r,function(e){if(t!=e.version)if(t=e.version,null==e.achievements||0==e.achievements.length)n.myAchievements=[];else{for(var o=[],r=0;r<e.achievements.length;r++){var i=e.achievements[r];o.push(new _pio.achievement(i.identifier,i.title,i.description,i.imageurl,i.progress,i.progressgoal,i.lastupdated))}n.myAchievements=o}})},this.load=function(t,n,o){if("object"!=typeof t&&!requests.length){var r=_pio.error("The first argument to load should be an array: client.achievements.load(['user1', 'user2', ...], ...)");_pio.handleError(r,o,r.code,r.message);return}e.achievementsLoad(t,n,o,function(e){if(null==e||0==e.length)return{};for(var t={},n=0;n<e.userachievements.length;n++){for(var o=e.userachievements[n],r=[],i=0;i<o.achievements.length;i++){var a=o.achievements[i];r.push(new _pio.achievement(a.identifier,a.title,a.description,a.imageurl,a.progress,a.progressgoal,a.lastupdated))}t[o.userid]=r}return t})},this.progressSet=function(t,n,r,i){e.achievementsProgressSet(t,n,r,i,function(e){return o(e.achievement,e.completednow)})},this.progressAdd=function(t,n,r,i){e.achievementsProgressAdd(t,n,r,i,function(e){return o(e.achievement,e.completednow)})},this.progressMax=function(t,n,r,i){e.achievementsProgressMax(t,n,r,i,function(e){return o(e.achievement,e.completednow)})},this.progressComplete=function(t,n,r){e.achievementsProgressComplete(t,n,r,function(e){return o(e.achievement,e.completednow)})}},_pio.achievement=function(e,t,n,o,r,i,a){this.id=e,this.title=t,this.description=n,this.imageUrl=o,this.progress=void 0===r?0:r,this.progressGoal=i,this.lastUpdated=new Date(1e3*a),this.progressRatio=this.progress/this.progressGoal,this.completed=this.progress==this.progressGoal}}(),function(){_pio.playerInsight=function(e){this.playersOnline="[ERROR: You tried to access playerInsight.playersOnline before loading it. You have to call the refresh method first.]",this.segments={};var t=this;function n(e){-1==e.playersonline?t.playersOnline="[ERROR: The current connection does not have the rights required to read the playersonline variable.]":t.playersOnline=e.playersonline,t.segments=_pio.convertFromKVArray(e.segments)}this.refresh=function(t,o){e.playerInsightRefresh(t,o,function(e){n(e.state)})},this.setSegments=function(t,o,r){e.playerInsightSetSegments(_pio.convertToSegmentArray(t),o,r,function(e){n(e.state)})},this.trackInvitedBy=function(t,n,o,r){e.playerInsightTrackInvitedBy(t,n,o,r,function(e){})},this.trackEvent=function(t,n,o,r){e.playerInsightTrackEvents([{eventtype:t,value:n}],o,r,function(e){})},this.trackExternalPayment=function(t,n,o,r){e.playerInsightTrackExternalPayment(t,n,o,r,function(e){})},this.sessionKeepAlive=function(t,n){e.playerInsightSessionKeepAlive(t,n,function(e){})}}}(),function(){_pio.leaderboards=function(e,t){this.set=function(t,n,o,r,i){e.leaderboardsSet(t,n,o,r,i,function(e){return new _pio.leaderboardEntry(e.leaderboardentry.userid,e.leaderboardentry.rank,e.leaderboardentry.score)})},this.count=function(t,n,o,r){e.leaderboardsCount(t,n,o,r,function(e){return e.count})},this.getTop=function(t,n,o,r,i,a,s){e.leaderboardsGet(t,n,o,r,null,i,a,s,function(e){if(null==e||null==e.leaderboardentry||0==e.leaderboardentry.length)return[];for(var t=[],n=0;n<e.leaderboardentry.length;n++)t.push(new _pio.leaderboardEntry(e.leaderboardentry[n].userid,e.leaderboardentry[n].rank,e.leaderboardentry[n].score));return t})},this.getNeighbourhood=function(n,o,r,i,a,s,l){e.leaderboardsGet(n,o,r,i,t,a,s,l,function(e){if(null==e||null==e.leaderboardentry||0==e.leaderboardentry.length)return[];for(var t=[],n=0;n<e.leaderboardentry.length;n++)t.push(new _pio.leaderboardEntry(e.leaderboardentry[n].userid,e.leaderboardentry[n].rank,e.leaderboardentry[n].score));return t})}},_pio.leaderboardEntry=function(e,t,n){this.userId=e,this.rank=t,this.score=n}}(),function(){_pio.oneScore=function(e){this.percentile="[ERROR: You tried to access oneScore.percentile before loading the OneScore. You have to call the refresh method first.]",this.score="[ERROR: You tried to access oneScore.score before loading the OneScore. You have to call the refresh method first.]",this.topRank="[ERROR: You tried to access oneScore.topRank before loading the OneScore. You have to call the refresh method first.]";var t=this;this.refresh=function(n,o){e.oneScoreRefresh(n,o,function(e){var n=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank);t.percentile=n.percentile,t.score=n.score,t.topRank=n.toprank})},this.set=function(n,o,r){e.oneScoreSet(n,o,r,function(e){var n=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank);return t.percentile=n.percentile,t.score=n.score,t.topRank=n.toprank,n})},this.add=function(n,o,r){e.oneScoreAdd(n,o,r,function(e){var n=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank);return t.percentile=n.percentile,t.score=n.score,t.topRank=n.toprank,n})},this.load=function(t,n,o){if("object"!=typeof t&&!requests.length){var r=_pio.error("The first argument to load should be an array: client.oneScore.load(['user1', 'user2', ...], ...)");_pio.handleError(r,o,r.code,r.message);return}e.oneScoreLoad(t,n,o,function(e){if(null==e||null==e.onescores||0==e.onescores.length)return[];for(var n=[],o=0,r=0;r<t.length;r++){var i=e.onescores[o];i&&t[r]==i.userid?(n.push(new _pio.oneScoreValue(i.percentile,i.score,i.toprank)),o++):n.push(null)}return n})}},_pio.oneScoreValue=function(e,t,n){this.percentile=void 0===e?0:e,this.score=void 0===t?0:t,this.topRank=void 0===n?0:n}}(),function(){_pio.notifications=function(e){this.myEndpoints="[ERROR: You tried to access notifications.myEndpoints before calling refresh.]";var t=this,n="";function o(e){if(e.version!=n){var o=[];if(e.endpoints)for(var r=0;r!=e.endpoints.length;r++){var i=e.endpoints[r];o[r]=new _pio.notificationEndpoint(i.type,i.identifier,_pio.convertFromKVArray(i.configuration),!!i.enabled)}n=e.version,t.myEndpoints=o}}function r(e,t){return JSON.stringify(e)==JSON.stringify(t)}function i(e,o){if(""!=n)for(var r=0;r!=t.myEndpoints.length;r++){var i=t.myEndpoints[r];if(i.type==e&&i.identifier==o)return i}return null}function a(e){var t=[];if(e&&e.length>0)for(var n=0;n!=e.length;n++){var o=e[n];o.type&&o.identifier&&t.push({type:o.type,identifier:o.identifier})}return t}this.refresh=function(t,r){e.notificationsRefresh(n,t,r,o)},this.registerEndpoint=function(t,a,s,l,c,u){var f=i(t,a);null!=f&&f.enabled==l&&r(f.configuration,s)?c&&c():e.notificationsRegisterEndpoints(n,[{type:t,identifier:a,configuration:_pio.convertToKVArray(s),enabled:l}],c,u,o)},this.toggleEndpoints=function(t,r,i,s){var l=a(t);l.length>0?e.notificationsToggleEndpoints(n,l,!!r,i,s,o):i&&i()},this.deleteEndpoints=function(t,r,i){var s=a(t);s.length>0?e.notificationsDeleteEndpoints(n,s,r,i,o):r&&r()},this.send=function(t,n,o){for(var r=[],i=0;i!=t.length;i++){var a=t[i],s={recipient:a.recipientUserId,endpointtype:a.endpointType,data:{}};for(var l in(0==(s.recipient+"").length||0==(s.endpointtype+"").length)&&console.log("error"),a)"recipientUserId"!=l&&"endpointType"!=l&&(s.data[l]=a[l]);r[i]=s}r.length>0?e.notificationsSend(r,n,o,null):n&&n()}},_pio.notificationEndpoint=function(e,t,n,o){this.type=e,this.identifier=t,this.configuration=n,this.enabled=o}}(),function(){_pio.publishingNetwork=function(e,t){var n=this;this.profiles=new _pio.publishingNetworkProfiles(e),this.payments=new _pio.publishingNetworkPayments(e),this.relations=new _pio.publishingNetworkRelations(e,t,this),this.userToken="[ERROR: you tried to access publishingNetwork.userToken before calling publishingNetwork.refresh(callback)]",this.refresh=function(t,o){e.socialRefresh(t,o,function(e){n.userToken=e.myprofile.usertoken,n.profiles.myProfile=new _pio.publishingNetworkProfile(e.myprofile),void 0===_pio.friendLookup&&(_pio.friendLookup={},_pio.blockedLookup={});var t=_pio.friendLookup[n.profiles.myProfile.userId],o=_pio.blockedLookup[n.profiles.myProfile.userId];t||o||(t=_pio.friendLookup[n.profiles.myProfile.userId]={},o=_pio.blockedLookup[n.profiles.myProfile.userId]={}),n.relations.friends=[];for(var r=0;r!=e.friends.length;r++){var i=new _pio.publishingNetworkProfile(e.friends[r]);n.relations.friends.push(i),t[i.userId]=!0}for(var r=0;r!=e.blocked.length;r++)o[e.blocked[r]]=!0})}},_pio.showDialog=function(e,t,n,o){if(void 0===window.PublishingNetwork)throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotAvailable,"PublishingNetwork.js was not found on the current page. You have to include the 'piocdn.com/publishingnetwork.js' on the containing page to show dialogs. See http://playerio.com/documentation/ for more information.");n.__apitoken__=t.token,window.PublishingNetwork.dialog(e,n,o)}}(),function(){_pio.publishingNetworkPayments=function(e){this.showBuyCoinsDialog=function(t,n,o,r){n||(n={}),n.coinamount=t,e.payVaultPaymentInfo("publishingnetwork",_pio.convertToKVArray(n),null,function(t){_pio.showDialog("buy",e,t,function(e){e.error?r(new PlayerIOError(PlayerIOErrorCode.GeneralError,e.error)):o(e)})},r,function(e){return _pio.convertFromKVArray(e.providerarguments)})},this.showBuyItemsDialog=function(t,n,o,r){e.payVaultPaymentInfo("publishingnetwork",_pio.convertToKVArray(n||{}),_pio.convertBuyItems(t),function(t){_pio.showDialog("buy",e,t,function(e){e.error?r(new PlayerIOError(PlayerIOErrorCode.GeneralError,e.error)):o(e)})},r,function(e){return _pio.convertFromKVArray(e.providerarguments)})}}}(),function(){_pio.publishingNetworkProfiles=function(e){this.myProfile="[ERROR: you tried to access publishingNetworkProfiles.myProfile before calling publishingNetwork.refresh(callback)]",this.showProfile=function(t,n){_pio.showDialog("profile",e,{userId:t},n)},this.loadProfiles=function(t,n,o){e.socialLoadProfiles(t,n,o,function(e){for(var n=[],o=0;o!=t.length;o++){var r=t[o];n[o]=null;for(var i=0;i!=e.profiles.length;i++){var a=e.profiles[i];if(a&&a.userid==r){n[o]=new _pio.publishingNetworkProfile(e.profiles[i]);break}}}return n})}},_pio.publishingNetworkProfile=function(e){this.userId=e.userid,this.displayName=e.displayname,this.avatarUrl=e.avatarurl,this.lastOnline=new Date(e.lastonline),this.countryCode=e.countrycode}}(),function(){_pio.publishingNetworkRelations=function(e,t,n){this.friends="[ERROR: you tried to access publishingNetworkRelations.friends before calling publishingNetwork.refresh(callback)]",this.isFriend=function(e){if(void 0!==_pio.friendLookup&&void 0!==_pio.friendLookup[t])return _pio.friendLookup[t][e]||!1;throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotLoaded,"Cannot access profile, friends, ignored before Publishing Network has been loaded. Please refresh Publishing Network first")},this.isBlocked=function(e){if(void 0!==_pio.blockedLookup&&void 0!==_pio.blockedLookup[t])return _pio.blockedLookup[t][e]||!1;throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotLoaded,"Cannot access profile, friends, ignored before Publishing Network has been loaded. Please refresh Publishing Network first")},this.showRequestFriendshipDialog=function(t,n){_pio.showDialog("requestfriendship",e,{userId:t},n)},this.showRequestBlockUserDialog=function(t,o){_pio.showDialog("requestblockuser",e,{userId:t},function(){n.refresh(function(){o&&o()},function(){o&&o()})})},this.showFriendsManager=function(t){_pio.showDialog("friendsmanager",e,{},function(e){e.updated?n.refresh(function(){t&&t()},function(){t&&t()}):t&&t()})},this.showBlockedUsersManager=function(t){_pio.showDialog("blockedusersmanager",e,{},function(e){e.updated?n.refresh(function(){t&&t()},function(){t&&t()}):t&&t()})}}}()}}]);