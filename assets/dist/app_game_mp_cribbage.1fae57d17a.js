(()=>{"use strict";var e,t,s,r,i={149(e,t,s){s(1);var r,i,a,n,o,l,h,c,d,p,g=s(2),u=s(127),m=s(128),f=g.from_html('<div class="card mb-3"><div class="card-header"><h4 class="float-start">Past Games</h4> <button>Clear</button></div> <!></div>');g.delegate(["click"]);var v=s(130),y=s(131),b=s(132),_=s(133),I=s(134),x=s(139);function S(e){return(e=e.replace(/[^\w ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function E(){let e=new x.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function k(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}var P=s(141);class N{#e=g.state(-1);get cn(){return g.get(this.#e)}set cn(e){g.set(this.#e,e,!0)}#t=g.state("unnamed");get name(){return g.get(this.#t)}set name(e){g.set(this.#t,e,!0)}#s=g.state(!1);get active(){return g.get(this.#s)}set active(e){g.set(this.#s,e,!0)}#r=g.state(0);get rank(){return g.get(this.#r)}set rank(e){g.set(this.#r,e,!0)}#i=g.state(-1);get ping(){return g.get(this.#i)}set ping(e){g.set(this.#i,e,!0)}formatName(){return`${this.name} (${this.cn})`}processJoin(e,t){this.cn=e,this.ping=t.getInt(),this.name=S(t.getString(20))}readWelcome(e){let t=e.getInt();this.active=!!(1&t),this.name=S(e.getString(20)),this.ping=t>>1}}class T{#a;get canReset(){return g.get(this.#a)}set canReset(e){g.set(this.#a,e)}chat;PROTOCOL_VERSION=0;#n=g.state();get room(){return g.get(this.#n)}set room(e){g.set(this.#n,e,!0)}localClient;clients=[];#o=g.state(g.proxy([]));get leaderboard(){return g.get(this.#o)}set leaderboard(e){g.set(this.#o,e,!0)}#l=g.state(g.proxy([]));get spectators(){return g.get(this.#l)}set spectators(e){g.set(this.#l,e,!0)}constructor(e){this.chat=e,this.localClient=this.newClient(),this.#a=g.derived(()=>this.room&&this.localClient.canResetScore()),setTimeout(E,100)}setupGame(e){this.room?.disconnect(),this.room=e,e.registerRecv(t=>{if(this.room===e){let e=new x.k(t);try{for(;e.remaining>0;){let t=e.getInt(),s=this.MESSAGE_HANDLERS[t];if(!s)throw Error("tag type "+t);s.call(this,e)}}catch(t){console.error("neterr",t),console.log(e.debugBuf,e),this.room.disconnect()}}}),e.registerDisc(()=>{this.room===e?(this.chat.addSysMessage("You disconnected."),this.room=void 0):this.chat.addSysMessage("You disconnected from the old room.")}),this.chat.addSysMessage("You are joining the game.")}leaveGame(){this.room?.disconnect()}sendf(e,...t){this.room?.send(new P.U().putFmt(e,...t).toArray())}updatePlayers(){var e,t;let s,r;this.leaderboard=(e=this.clients,t=this.playersSortProps,s=e.filter(e=>e).sort((e,s)=>{for(let r of t){let t=r(e),i=r(s);if(t<i)return 1;if(t>i)return -1}return e.cn-s.cn}),r=1,s.forEach((e,i)=>{if(i){let a=s[i-1];t.some(t=>t(e)!==t(a))&&(r=i+1)}s[i].rank=r}),s.sort((e,t)=>t.active-e.active))}processWelcome(e){let t=e.getInt();t!==this.PROTOCOL_VERSION&&alert(`different protocol version (client: ${this.PROTOCOL_VERSION}, server: ${t})
refresh the page for updates?`),this.clients.length=0;let s=e.getCN();this.processWelcomeMode(e);for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let r=t===s?this.localClient:this.newClient();r.cn=t,r.readWelcome(e),this.clients[t]=r}this.processWelcomeGame(e),this.spectators=this.clients.filter(e=>!e.active),this.updatePlayers()}processJoin(e){let t=e.getCN();if(this.clients[t])throw Error("invalid join cn "+t);let s=this.newClient();s.processJoin(t,e),this.clients[t]=s,this.chat.playerJoined(s.formatName()),this.updatePlayers()}processLeave(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid leave cn "+t);s.active&&this.playerDeactivated(s),this.chat.playerLeft(s.formatName()),delete this.clients[t],this.updatePlayers()}processReset(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid reset cn "+t);s.resetScore(),this.updatePlayers(),this.chat.playerReset(s.formatName())}processRename(e){let t=e.getCN(),s=S(e.getString(20)),r=this.clients[t];if(!r)throw Error("invalid rename cn "+t);this.chat.playerRename(r.formatName(),s),r.name=s}processPing(e){this.sendPong(e.getInt())}processPingTime(e){for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=e.getInt(),r=this.clients[t];if(!r)throw Error("invalid ping cn "+t);r.ping=s}}processChat(e){let t=e.getCN(),s=e.getInt(),r=1==(3&s)?e.getInt():-1,i=e.getString(100),a=k(this.clients[t],t),n=this.clients[r],o=n?n===this.localClient?"you":k(n,r):void 0;this.chat.addChatMessage(a,i,s,o)}processActive(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid active cn "+t);if(s.active=!s.active)this.playerActivated(s),this.spectators=this.spectators.filter(e=>e!==s);else{this.playerDeactivated(s);let e=0,t=this.spectators.length;for(;e<t;){let r=e+t>>>1;this.spectators[r].cn<s.cn?e=r+1:t=r}this.spectators.splice(e,0,s)}this.updatePlayers()}}(r=l||(l={}))[r.WAITING=0]="WAITING",r[r.INTERMISSION=1]="INTERMISSION",r[r.ACTIVE=2]="ACTIVE";class R extends N{#h=g.state(!1);get ready(){return g.get(this.#h)}set ready(e){g.set(this.#h,e,!0)}#c=g.state(!1);get inRound(){return g.get(this.#c)}set inRound(e){g.set(this.#c,e,!0)}readWelcome(e){super.readWelcome(e),this.ready=!1,this.inRound=!1}}class M extends T{#d=g.state(g.proxy(l.WAITING));get roundState(){return g.get(this.#d)}set roundState(e){g.set(this.#d,e,!0)}#p=g.state(0);get roundTimerStart(){return g.get(this.#p)}set roundTimerStart(e){g.set(this.#p,e,!0)}#g=g.state(0);get roundTimerEnd(){return g.get(this.#g)}set roundTimerEnd(e){g.set(this.#g,e,!0)}#u=g.derived(()=>this.room&&this.localClient.active&&this.roundState==l.ACTIVE&&this.localClient.inRound);get playing(){return g.get(this.#u)}set playing(e){g.set(this.#u,e)}#m=g.state(g.proxy([]));get roundPlayers(){return g.get(this.#m)}set roundPlayers(e){g.set(this.#m,e,!0)}#f=g.state(g.proxy([]));get roundPlayerQueue(){return g.get(this.#f)}set roundPlayerQueue(e){g.set(this.#f,e,!0)}#v=g.state(g.proxy([]));get pastGames(){return g.get(this.#v)}set pastGames(e){g.set(this.#v,e,!0)}addHistory(e){this.pastGames.length>=100&&this.pastGames.pop(),this.pastGames.unshift(e)}clearHistory(){this.pastGames=[]}processWelcomeGame(e){let t=e.getInt();if(0===t)this.roundWait();else if(1===t){this.roundIntermission(e.getInt(),this.INTERMISSION_TIME);for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=this.clients[t];if(!s)throw Error("invalid welcome round ready cn "+t);s.ready=!0}}else 2===t&&this.roundStart(e.getInt(),this.ROUND_TIME);let s=[];for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let r=this.clients[t];if(!r)throw Error("invalid welcome round player cn "+t);r.inRound=!0,s.push(r)}this.roundPlayers=s;let r=[];for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=this.clients[t];if(!s)throw Error("invalid welcome round queue cn "+t);r.push(s)}this.roundPlayerQueue=r}processRoundWait(e){this.roundWait()}processRoundInterm(e){this.roundIntermission(this.INTERMISSION_TIME)}processRoundStart(e){this.unsetInRound();let t=[];for(let s=0;s<=64;s++){let s=e.getCN();if(s<0)break;let r=this.clients[s];if(!r)throw Error("invalid round start player cn "+s);r.inRound=!0,t.push(r)}this.roundPlayers=t,this.roundPlayerQueue=[],this.roundStart(this.ROUND_TIME)}processReady(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid ready cn "+t);s.ready=!s.ready}roundWait(){this.roundState=l.WAITING,this.unsetReady()}roundIntermission(e,t){this.roundState=l.INTERMISSION,this.setTimer(e,t),this.unsetReady()}roundStart(e,t){this.roundState=l.ACTIVE,this.setTimer(e,t),this.unsetReady()}setTimer(e,t=e){let s=Date.now()+e;this.roundTimerStart=s-Math.max(t,e),this.roundTimerEnd=s}unsetReady(){this.clients.forEach(e=>e.ready=!1)}unsetInRound(){this.clients.forEach(e=>e.inRound=!1)}playerActivated(e){this.roundPlayerQueue.push(e)}playerDeactivated(e){this.roundPlayers=this.roundPlayers.filter(t=>t!==e),this.roundPlayerQueue=this.roundPlayerQueue.filter(t=>t!==e),e.inRound=!1}}let w=["No","Two","Poker","Bridge"],A=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],C=["♣","♦","♥","♠"],O=[["secondary","secondary","secondary","secondary"],["secondary","danger","danger","secondary"],["success","primary","danger","secondary"],["success","warning","danger","secondary"]],D=["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"],$=["Club","Diamond","Heart","Spade"];var L=g.from_html("<span> </span>");function H(e,t){let s=g.prop(t,"outline",3,!0),r=g.derived(()=>t.card>>2),i=g.derived(()=>3&t.card);var a=L(),n=g.child(a);g.reset(a),g.template_effect(()=>{g.set_class(a,1,`badge text-bg-${s()?"outline-":""}${O[t.colorScheme][g.get(i)]??""}`),g.set_attribute(a,"title",`${D[g.get(r)]??""} of ${$[g.get(i)]??""}s`),g.set_text(n,`${A[g.get(r)]??""}${C[g.get(i)]??""}`)}),g.append(e,a)}class V extends R{}class W{#y=g.state(-1);get owner(){return g.get(this.#y)}set owner(e){g.set(this.#y,e,!0)}}class G{isMe;ownerName=""}class Y extends M{#b=g.state(g.proxy([]));get playerInfo(){return g.get(this.#b)}set playerInfo(e){g.set(this.#b,e,!0)}#_=g.state(0);get turnIndex(){return g.get(this.#_)}set turnIndex(e){g.set(this.#_,e,!0)}#I=g.state(g.proxy([]));get playerDiscInfo(){return g.get(this.#I)}set playerDiscInfo(e){g.set(this.#I,e,!0)}discIndex=0;#x=g.derived(()=>this.playing&&this.playerIsMe(this.playerInfo[this.turnIndex]));get canMove(){return g.get(this.#x)}set canMove(e){g.set(this.#x,e)}formatPlayerName(e,t){return e?k(this.clients[e.owner],e.owner):`<unknown${void 0===t?"":" pn#"+t}>`}playerIsMe(e){return e?.owner===this.localClient.cn}processWelcomeGame(e){super.processWelcomeGame(e),this.processPlayerInfos(e),this.processDiscInfos(e),this.processRoundInfo(e)}processPlayerInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let r=new this.PlayerInfoType;r.owner=s,this.processPlayerInfo(e,r),t.push(r)}if((this.playerInfo=t).length){if(this.turnIndex=e.getInt(),this.turnIndex<0||this.turnIndex>=t.length)throw Error("bad turnIndex")}else this.turnIndex=0}processDiscInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getString(20);if(!s)break;let r=e.getCN(),i=new this.PlayerDiscType;i.ownerName=`${s} (${r})`,this.processDiscInfo(e,i),t.push(i)}if((this.playerDiscInfo=t).length){if(this.discIndex=e.getInt(),this.discIndex<0||this.discIndex>this.playerDiscInfo.length)throw Error("bad discIndex")}else this.discIndex=0}processRoundStart(e){super.processRoundStart(e);let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let r=new this.PlayerInfoType;r.owner=s,t.push(r)}this.playerInfo=t,this.playerDiscInfo=[],this.turnIndex=0,this.discIndex=0,this.processRoundStartInfo(e)}processEliminateBase(e,t){let s=e.getInt(),r=this.playerInfo[s];if(!r)throw Error("invalid eliminate pn "+s);let i=new this.PlayerDiscType,a=this.clients[r.owner];if(!a)throw Error(`invalid owner ${r.owner} of pn ${s}`);i.ownerName=k(a,r.owner),i.isMe=a===this.localClient;let n=this.eliminatePlayer(e,i,s,r,a,t);this.playerInfo.splice(s,1),this.playerDiscInfo.splice(this.discIndex,0,i),n&&this.discIndex++}processEliminate(e){this.processEliminateBase(e,!1)}processEliminateEarly(e){this.processEliminateBase(e,!0)}nextTurn(){++this.turnIndex==this.playerInfo.length&&(this.turnIndex=0)}}let U=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optScoreTarget","i",121,"Score Target","game ends when this score is reached",1,1e3],["optSkipEmpty","b",!0,"Skip Empty","automatically pass (no cards)"],["optSkipPass","b",!0,"Skip Pass","automatically pass (with cards but cannot play any)"],["optSkipOnlyMove","b",!1,"Skip Only Move","automatically move when only one move is possible"],["optPre","b",!1,"Pre-Show Phase","pause before show"],["optPost","b",!0,"Post-Show Phase","pause after show, before next hand"]];function z(e){return`${e.optTurnTime/1e3}s turn, ${e.optScoreTarget} score target, ${e.optSkipEmpty?"skip":"manual"} empty, ${e.optSkipPass?"skip":"manual"} pass, ${e.optSkipOnlyMove?"skip":"manual"} only move, ${e.optPre?"with":"no"} pre, ${e.optPost?"with":"no"} post`}(i=h||(h={}))[i.WELCOME=0]="WELCOME",i[i.JOIN=1]="JOIN",i[i.LEAVE=2]="LEAVE",i[i.RESET=3]="RESET",i[i.RENAME=4]="RENAME",i[i.PING=5]="PING",i[i.PING_TIME=6]="PING_TIME",i[i.CHAT=7]="CHAT",i[i.ACTIVE=8]="ACTIVE",i[i.ROUND_WAIT=9]="ROUND_WAIT",i[i.ROUND_INTERM=10]="ROUND_INTERM",i[i.ROUND_START=11]="ROUND_START",i[i.READY=12]="READY",i[i.END_ROUND=13]="END_ROUND",i[i.MOVE_CONFIRM=14]="MOVE_CONFIRM",i[i.MOVE_READY=15]="MOVE_READY",i[i.END_TURN=16]="END_TURN",i[i.PLAYER_ELIMINATE=17]="PLAYER_ELIMINATE",i[i.PLAYER_PRIVATE_INFO_HAND=18]="PLAYER_PRIVATE_INFO_HAND",(a=c||(c={}))[a.RESET=0]="RESET",a[a.RENAME=1]="RENAME",a[a.PONG=2]="PONG",a[a.CHAT=3]="CHAT",a[a.ACTIVE=4]="ACTIVE",a[a.READY=5]="READY",a[a.MOVE_KEEP=6]="MOVE_KEEP",a[a.MOVE_PLAY=7]="MOVE_PLAY",a[a.MOVE_PRE=8]="MOVE_PRE",a[a.MOVE_POST=9]="MOVE_POST";class F extends V{#S=g.state(0);get score(){return g.get(this.#S)}set score(e){g.set(this.#S,e,!0)}#E=g.state(0);get streak(){return g.get(this.#E)}set streak(e){g.set(this.#E,e,!0)}#k=g.state(0);get wins(){return g.get(this.#k)}set wins(e){g.set(this.#k,e,!0)}#P=g.state(0);get losses(){return g.get(this.#P)}set losses(e){g.set(this.#P,e,!0)}#N=g.state(0);get rankLast(){return g.get(this.#N)}set rankLast(e){g.set(this.#N,e,!0)}#T=g.state(0);get rankBest(){return g.get(this.#T)}set rankBest(e){g.set(this.#T,e,!0)}#R=g.state(0);get rankWorst(){return g.get(this.#R)}set rankWorst(e){g.set(this.#R,e,!0)}updateScore(e,t){this.rankLast=e,this.rankBest=Math.min(this.rankBest||e,e),this.rankWorst=Math.max(this.rankWorst,e),this.score+=t-e+1,1===e?(this.streak<0&&(this.streak=0),this.streak++,this.wins++):(this.streak>0&&(this.streak=0),this.streak--,this.losses++)}resetScore(){this.score=0,this.streak=0,this.wins=0,this.losses=0,this.rankLast=0,this.rankBest=0,this.rankWorst=0}canResetScore(){return this.rankLast}readWelcome(e){super.readWelcome(e),this.score=e.getInt(),this.streak=e.getInt(),this.wins=e.getInt(),this.losses=e.getInt(),this.rankLast=e.getInt(),this.rankBest=e.getInt(),this.rankWorst=e.getInt()}}class B extends W{#S=g.state(0);get score(){return g.get(this.#S)}set score(e){g.set(this.#S,e,!0)}#M=g.state(0);get handSize(){return g.get(this.#M)}set handSize(e){g.set(this.#M,e,!0)}#w=g.state(g.proxy([]));get played(){return g.get(this.#w)}set played(e){g.set(this.#w,e,!0)}#A=g.state(!1);get passed(){return g.get(this.#A)}set passed(e){g.set(this.#A,e,!0)}}class J extends G{score=0}class Q extends Y{PlayerInfoType=B;PlayerDiscType=J;#C=g.state(g.proxy((0,_.q)(U)));get mode(){return g.get(this.#C)}set mode(e){g.set(this.#C,e,!0)}#O=g.state(g.proxy([]));get myHand(){return g.get(this.#O)}set myHand(e){g.set(this.#O,e,!0)}#D=g.state();get localPlayer(){return g.get(this.#D)}set localPlayer(e){g.set(this.#D,e,!0)}#$=g.state(g.proxy(d.DEAL));get gamePhase(){return g.get(this.#$)}set gamePhase(e){g.set(this.#$,e,!0)}#L=g.state(0);get dealer(){return g.get(this.#L)}set dealer(e){g.set(this.#L,e,!0)}#H=g.state(0);get starter(){return g.get(this.#H)}set starter(e){g.set(this.#H,e,!0)}#V=g.state(0);get handNum(){return g.get(this.#V)}set handNum(e){g.set(this.#V,e,!0)}#W=g.state(0);get trickNum(){return g.get(this.#W)}set trickNum(e){g.set(this.#W,e,!0)}#G=g.state(0);get trickTurn(){return g.get(this.#G)}set trickTurn(e){g.set(this.#G,e,!0)}#Y=g.state(0);get trickCount(){return g.get(this.#Y)}set trickCount(e){g.set(this.#Y,e,!0)}#U=g.state(g.proxy([]));get play(){return g.get(this.#U)}set play(e){g.set(this.#U,e,!0)}#z=g.state(g.proxy([]));get crib(){return g.get(this.#z)}set crib(e){g.set(this.#z,e,!0)}#F=g.state(0);get cribSize(){return g.get(this.#F)}set cribSize(e){g.set(this.#F,e,!0)}#B=g.state(g.proxy([]));get moveHistory(){return g.get(this.#B)}set moveHistory(e){g.set(this.#B,e,!0)}#J=g.state(0);get discard0(){return g.get(this.#J)}set discard0(e){g.set(this.#J,e,!0)}#Q=g.state(0);get discard1(){return g.get(this.#Q)}set discard1(e){g.set(this.#Q,e,!0)}#K=g.state(0);get pendingMove(){return g.get(this.#K)}set pendingMove(e){g.set(this.#K,e,!0)}#x=g.derived(()=>this.playing&&(this.gamePhase===d.PLAY?this.playerIsMe(this.playerInfo[this.turnIndex]):!this.localPlayer.passed));get canMove(){return g.get(this.#x)}set canMove(e){g.set(this.#x,e)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new F}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",c.RESET)}sendRename(e){this.sendf("is",c.RENAME,e)}sendPong(e){this.sendf("i2",c.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",c.CHAT,t,s,e.slice(0,100))}sendActive(){this.sendf("i",c.ACTIVE)}sendReady(){this.sendf("i",c.READY)}sendMoveKeep(){this.sendf("ic",c.MOVE_KEEP,this.discard0|this.discard1<<3)}sendMovePlay(){this.sendf("ic",c.MOVE_PLAY,this.pendingMove)}sendMoveReady(){this.sendf("i",this.gamePhase===d.PRE?c.MOVE_PRE:c.MOVE_POST)}MESSAGE_HANDLERS={[h.WELCOME]:this.processWelcome,[h.JOIN]:this.processJoin,[h.LEAVE]:this.processLeave,[h.RESET]:this.processReset,[h.RENAME]:this.processRename,[h.PING]:this.processPing,[h.PING_TIME]:this.processPingTime,[h.CHAT]:this.processChat,[h.ACTIVE]:this.processActive,[h.ROUND_WAIT]:this.processRoundWait,[h.ROUND_INTERM]:this.processRoundInterm,[h.ROUND_START]:this.processRoundStart,[h.READY]:this.processReady,[h.END_ROUND]:this.processEndRound,[h.MOVE_CONFIRM]:this.processMoveConfirm,[h.MOVE_READY]:this.processMoveReady,[h.END_TURN]:this.processEndTurn,[h.PLAYER_ELIMINATE]:this.processEliminate,[h.PLAYER_PRIVATE_INFO_HAND]:this.processPrivateInfoHand};processWelcomeMode(e){var t;let s=Number(e.getUint64());this.mode.optTurnTime=s>>5,this.mode.optScoreTarget=(t=Number(e.getUint64())+1,1>t?1:t<1e3?t:1e3),this.mode.optSkipEmpty=!!(1&s),this.mode.optSkipPass=!!(2&s),this.mode.optSkipOnlyMove=!!(4&s),this.mode.optPre=!!(8&s),this.mode.optPost=!!(16&s)}processPlayerInfo(e,t){let s=Number(e.getUint64());t.score=s>>1,t.handSize=0,t.played=Array.from({length:e.get()},()=>e.get()),t.passed=!!(1&s)}processDiscInfo(e,t){t.score=Number(e.getUint64())}processRoundStartInfo(e){this.handNum=0,this.moveHistory=[],this.localPlayer=this.localClient.active?this.playerInfo.find(e=>e.owner===this.localClient.cn):void 0,this.resetTrick(),this.gamePhase=d.DEAL,this.dealer=-1}processStartHand(e){this.resetTrick(),(this.turnIndex=(this.dealer=e.getCN())+1)===this.playerInfo.length&&(this.turnIndex=0);let t=this.cardsPerPlayer();for(let e of this.playerInfo)e.handSize=t,e.played=[];this.discard0=0,this.discard1=1}cardsPerPlayer(){return this.playerInfo.length>2?5:6}processRoundInfo(e){if(this.moveHistory=[],this.localPlayer=void 0,this.roundState!==l.ACTIVE){this.handNum=0,this.resetTrick();return}let t=Number(e.getUint64());if(this.gamePhase=3&t,this.handNum=t>>2,this.dealer=e.getCN(),this.crib=[],this.gamePhase){for(let t of(this.trickNum=e.getInt(),this.trickTurn=e.getInt(),this.trickCount=e.get(),this.starter=e.get(),this.cribSize=4,this.playerInfo))t.handSize=4-t.played.length;this.play=Array.from({length:e.get()},()=>e.get()),this.gamePhase===d.POST&&(this.crib=j(e))}else{this.resetTrick();let e=this.cardsPerPlayer();for(let t of this.playerInfo)t.passed?(t.handSize=4,this.cribSize+=e-4):t.handSize=e}}resetTrick(){this.trickNum=this.trickTurn=0,this.trickCount=0,this.play=[],this.crib=[],this.cribSize=+(3===this.playerInfo.length)}processMoveConfirm(e){let t=e.get(),s=7&t,r=t>>3;this.crib.push(this.myHand[s]),this.playerInfo.length<=2?(this.crib.push(this.myHand[r]),this.myHand.splice(Math.max(s,r),1),this.myHand.splice(Math.min(s,r),1)):this.myHand.splice(s,1),this.pendingMove=4}processMoveReady(e){let t=this.playerInfo[e.getCN()];switch(this.gamePhase){case d.DEAL:this.processDealKeep(t),t.passed=!0;break;case d.PLAY:throw Error("unexpected ready during PLAY phase");case d.PRE:case d.POST:t.passed=!0}}processDealKeep(e){e.handSize=4,this.cribSize++,this.playerInfo.length<=2&&this.cribSize++}processEndTurn(e){switch(this.setTimer(this.mode.optTurnTime),this.gamePhase){case d.DEAL:this.processMoveDeal(e);break;case d.PLAY:this.processMovePlay(e);break;case d.PRE:this.processMoveShow(e);break;case d.POST:this.gamePhase=d.DEAL,this.unsetPassed()}}processMoveDeal(e){if(this.dealer<0)return this.processStartHand(e);for(let e of this.playerInfo)e.passed?e.passed=!1:this.processDealKeep(e);let t=(this.starter=e.get())>>2===p.FJack,s=this.playerInfo[this.dealer],r=this.clients[s.owner];t&&(s.score+=2),this.moveHistory.push({type:"start",playerName:r.formatName(),playerIsMe:r===this.localClient,starter:this.starter,bonus:t,score:s.score}),this.gamePhase=d.PLAY}processMovePlay(e){this.pendingMove=4;let t=e.get();if(255===t){this.pass(),this.nextTurnUnpassed()&&this.processMoveFinalNextTrick();return}let s=this.playerInfo[this.turnIndex],r=this.clients[s.owner],i=r===this.localClient;if(i){let e=this.myHand.length-s.handSize;this.myHand[this.myHand.indexOf(t)]=this.myHand[e],this.myHand[e]=t}s.handSize--,s.played.push(t);let[a,n]=this.scorePlay(t);this.play.push(t);let o=Math.min((t>>2)+1,10);this.trickCount+=o;let l=s.score+=a;this.moveHistory.push({type:"play",card:t,playerName:r.formatName(),playerIsMe:i,score:l,scoreDelta:a,scoreReasons:n}),!(l>=this.mode.optScoreTarget)&&(this.playerInfo.some(e=>e.handSize)?this.processMovePlayPost():this.processMoveFinal()||(this.mode.optPre?(this.gamePhase=d.PRE,this.unsetPassed(),this.setTimer(this.mode.optTurnTime)):this.processMoveShow(e)))}scorePlay(e){let t=0,s=[],r=e>>2,i=Math.min(r+1,10),a=[...this.play,e];this.trickCount+i===15&&(t=2,s.push({score:2,reason:"15",cards:a})),a.length>=2&&a.at(-2)>>2===r&&(a.length>=3&&a.at(-3)>>2===r?a.length>=4&&a.at(-4)>>2===r?(t+=12,s.push({score:12,reason:"quad",cards:a.slice(-4)})):(t+=6,s.push({score:6,reason:"triple",cards:a.slice(-3)})):(t+=2,s.push({score:2,reason:"pair",cards:a.slice(-2)})));let n=a.length-1,o=0,l=r,h=r;for(let e=n;e>=0;e--){let t=a[e]>>2;if((o&1<<t)!=0)break;o|=1<<t,l>t&&(l=t),h<t&&(h=t),h-l+1==a.length-e&&(n=e)}if(n<=a.length-3){let e=a.length-n;t+=e,s.push({score:e,reason:"run",cards:a.slice(n)})}return[t,s]}processMovePlayPost(){if(this.trickTurn++,31===this.trickCount)this.processMoveFinalNextTrick();else if(this.nextTurnUnpassed(),this.mode.optSkipEmpty){for(;!this.playerInfo[this.turnIndex].handSize;)if(this.pass(),this.nextTurnUnpassed()){this.processMoveFinalNextTrick();break}}}processMoveFinalNextTrick(){if(!this.processMoveFinal()&&(this.nextTurn(),this.mode.optSkipEmpty))for(;!this.playerInfo[this.turnIndex].handSize;)this.pass(),this.nextTurn()}processMoveFinal(){let e=this.playerInfo[this.turnIndex],t=this.clients[e.owner],s=31===this.trickCount?2:1,r=e.score+=s;return this.moveHistory.push({type:"final",playerName:t.formatName(),playerIsMe:t===this.localClient,score:r,scoreDelta:s,hand:this.handNum,trick:this.trickNum,turn:this.trickTurn,count:this.trickCount}),r>=this.mode.optScoreTarget||(this.trickNum++,this.trickTurn=0,this.trickCount=0,this.play=[],this.unsetPassed(),!1)}pass(){let e=this.playerInfo[this.turnIndex],t=this.clients[e.owner];e.passed=!0,this.moveHistory.push({type:e.handSize?"pass":"out",playerName:t.formatName(),playerIsMe:t===this.localClient})}nextTurnUnpassed(){let e=this.turnIndex;do++e===this.playerInfo.length&&(e=0);while(e!==this.turnIndex&&this.playerInfo[e].passed);return this.turnIndex===(this.turnIndex=e)}processMoveShow(e){this.turnIndex=this.dealer;do if(this.nextTurn(),this.processShow(e))return;while(this.turnIndex!==this.dealer);this.processShow(e,!0)||this.endHand()}endHand(){this.moveHistory.push({type:"endHand",hand:this.handNum++}),this.gamePhase=this.mode.optPost?d.POST:d.DEAL,this.dealer=-1,this.unsetPassed(),this.setTimer(this.mode.optTurnTime)}processShow(e,t){let s=j(e),r=[this.starter,...s];t&&(this.crib=s);let[i,a]=this.scoreShow(s,!0,t),n=this.playerInfo[this.turnIndex],o=this.clients[n.owner],l=n.score+=i;return this.moveHistory.push({type:"show",playerName:o.formatName(),playerIsMe:o===this.localClient,cards:r,isCrib:t,score:l,scoreDelta:i,scoreReasons:a}),l>=this.mode.optScoreTarget}scoreShow(e,t,s){let r=0,i=[],a=t?[this.starter,...e]:e.slice(),n=Array.from({length:p.NUM},()=>[]),o=[1];for(let e=a.length-1;e>=0;e--){let t=a[e]>>2;n[t].push(e);let s=o[o.length-1];o.push(s|s<<Math.min(t+1,10)&65535)}let l=[];if(!function e(t,s){let n=a[t],h=o[a.length-1-t],c=Math.min((n>>2)+1,10);if(s>=c){if(l.push(n),s>c){let r=s-c;h&1<<r&&e(t+1,r)}else r+=2,i.push({score:2,reason:"15",cards:l.slice()});l.pop()}h&1<<s&&e(t+1,s)}(0,15),a.length>2){let e=0,t=0;for(let s=0,r=0;s<p.NUM;s++)n[s].length?e<=s-r&&(e=s-r+1,t=r):r=s+1;if(e>=3){let s=n[t].length;for(let r=1;r<e;r++)s*=n[t+r].length;let o=s*e;r+=o,i.push({score:o,reason:`${["","double ","triple ","double-double "][s-1]}run${e>3?` of ${e}`:""}`,cards:n.slice(t,t+e).flat().sort().map(e=>a[e])})}}for(let e of n)if(e.length>1){let t=[2,6,12][e.length-2];r+=t,i.push({score:t,reason:["pair","triple","quad"][e.length-2],cards:e.map(e=>a[e])})}let h=3&e[0],c=3&this.starter;if(4===e.length&&e.every(e=>(3&e)===h))if(t&&h===c)r+=5,i.push({score:5,reason:"5-card flush",cards:a});else{let t=4*!s;r+=t,i.push({score:t,reason:"4-card flush",cards:e})}if(t){let t=p.FJack<<2|c;e.includes(t)&&(r++,i.push({score:1,reason:"nobs",cards:[t]}))}return[r,i]}processEndRound(e){let t=e.getUint64(),s=this.playerInfo,r={duration:t,hand:this.handNum,trick:this.trickNum,turn:this.trickTurn,scoreTarget:this.mode.optScoreTarget,players:[]},i=s.length+this.playerDiscInfo.length,a=[...s].sort(K),n=1;for(let e=0;e<a.length;e++){let t=a[e];e&&K(t,a[e-1])&&(n=e+1);let s=this.clients[t.owner];r.players.push({name:k(s,t.owner),isMe:s===this.localClient,score:t.score,rank:n}),s.updateScore(n,i)}for(let e of this.playerDiscInfo)r.players.push({name:e.ownerName,isMe:e.isMe,score:e.score,rank:r.players.length+1});this.updatePlayers(),this.addHistory(r)}unsetPassed(){this.playerInfo.forEach(e=>e.passed=!1)}eliminatePlayer(e,t,s,r,i,a){t.score=r.score;let n=this.playerInfo.length,o=n+this.playerDiscInfo.length;return i.updateScore(n,o),this.updatePlayers(),this.moveHistory.push({type:"leave",playerName:i.formatName(),playerIsMe:i===this.localClient}),this.endHand(),this.pendingMove=4,this.turnIndex>s?this.turnIndex--:this.turnIndex===this.playerInfo.length-1&&(this.turnIndex=0),!1}processPrivateInfoHand(e){this.myHand=Array.from({length:this.cardsPerPlayer()},()=>e.get())}playersSortProps=[e=>e.score,e=>e.wins,e=>e.streak,e=>-e.rankLast,e=>-e.rankBest,e=>-e.rankWorst]}function K(e,t){return t.score-e.score}function j(e){return[e.get(),e.get(),e.get(),e.get()]}(n=d||(d={}))[n.DEAL=0]="DEAL",n[n.PLAY=1]="PLAY",n[n.PRE=2]="PRE",n[n.POST=3]="POST",(o=p||(p={}))[o.Ace=0]="Ace",o[o.N2=1]="N2",o[o.N3=2]="N3",o[o.N4=3]="N4",o[o.N5=4]="N5",o[o.N6=5]="N6",o[o.N7=6]="N7",o[o.N8=7]="N8",o[o.N9=8]="N9",o[o.N10=9]="N10",o[o.FJack=10]="FJack",o[o.FQueen=11]="FQueen",o[o.FKing=12]="FKing",o[o.NUM=13]="NUM";var q=g.from_html("<div></div>"),X=g.from_html('<li> <span> </span> <span class="badge text-bg-outline-secondary"> </span> <div class="progress mt-1 mb-2" style="height:0.6rem"><!></div></li>'),Z=g.from_html('<li class="list-group-item"> <ol class="list-unstyled"></ol></li>'),ee=g.from_html('<li class="list-group-item">No past games!</li>'),et=g.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),es=s(135),er=s(142),ei=g.from_html(" <!>",1);function ea(e,t){var s=g.comment(),r=g.first_child(s);g.each(r,17,()=>t.scoreReasons,g.index,(e,s,r)=>{g.next();var i=ei(),a=g.first_child(i),n=g.sibling(a);g.each(n,17,()=>g.get(s).cards,g.index,(e,s)=>{H(e,{get card(){return g.get(s)},get colorScheme(){return t.colorScheme}})}),g.template_effect(()=>g.set_text(a,`${r?", ":""}${g.get(s).score??""} for ${g.get(s).reason??""} `)),g.append(e,i)}),g.append(e,s)}var en=g.from_html("<div>&nbsp;</div>"),eo=g.from_html("<div> </div> <!>",1),el=g.from_html("<!> the starter <!>.",1),eh=g.from_html(" <!>",1),ec=g.from_html(" <!>",1),ed=g.from_html("(<!>).",1),ep=g.from_html("<!> <!>",1),eg=g.from_html("<!> <!>",1),eu=g.from_html("<div><span> </span> <!></div> ",1),em=g.from_html('<b>Move History</b> <label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">compact</span></label> <div class="overflow-auto" style="max-height: 20rem"></div>',1),ef=g.from_html("<!> <!>",1),ev=g.from_html("<!> ",1),ey=g.from_html('<span class="badge text-bg-light">?</span> ',1),eb=g.from_html("(<!>)",1),e_=g.from_html("<br/> <!>",1),eI=g.from_html("<!> <!> <!>",1),ex=g.from_html("<br/> <span> </span>",1),eS=g.from_html("<br/> Starter: <!>",1),eE=g.from_html("<!> ",1),ek=g.from_html("(<!>)",1),eP=g.from_html("<br/> <!>",1),eN=g.from_html("<!> ",1),eT=g.from_html("<br/> <!>",1),eR=g.from_html('<th><input class="form-check-input" type="radio"/></th>'),eM=g.from_html('<tr><th><input class="form-check-input" type="radio"/></th><!><td><!></td></tr>'),ew=g.from_html(' <table class="table table-sm table-striped w-auto mx-auto"><thead><tr><th>X</th><th>Card</th></tr></thead><tbody></tbody></table> <button class="btn btn-primary btn-lg">&#10060; Discard</button>',1),eA=g.from_html("<p> <!> dealer.</p> <!>",1),eC=g.from_html("<th>Points</th>"),eO=g.from_html("<br/> (<!>)",1),eD=g.from_html("<td> <!></td>"),e$=g.from_html('<tr><th><input class="form-check-input" type="radio"/></th><td><!></td><td> </td><!></tr>'),eL=g.from_html('Choose a card to play: <table class="table table-sm table-striped w-auto mx-auto"><thead><tr><th>X</th><th>Card</th><th>Count</th><!></tr></thead><tbody><!><tr><th><input class="form-check-input" type="radio"/></th><td> </td></tr></tbody></table> <button class="btn btn-success btn-lg">&#9654; Play</button>',1),eH=g.from_html('<p> </p> <button class="btn btn-success btn-lg">&#9989; Ready</button>',1),eV=g.from_html('<div class="mb-2">Your hand: <!> <!> <!></div> <div class="mb-2"><!></div>',1),eW=g.from_html("<span>DEALER</span>"),eG=g.from_html("<span>MOVE</span>"),eY=g.from_html("<span>PASS</span>"),eU=g.from_html("<span>OUT</span>"),ez=g.from_html("<span>READY</span>"),eF=g.from_html("<!> ",1),eB=g.from_html("<!> ",1),eJ=g.from_html('<span class="badge text-bg-light">?</span>'),eQ=g.from_html("<!> <!>",1),eK=g.from_html("<div></div>"),ej=g.from_html('<li><span> </span> <span class="badge text-bg-outline-secondary"> </span> <!> <!> <!> <!> <br/> <div class="progress mt-1 mb-2" style="height:0.6rem"><!></div></li>'),eq=g.from_html("<li>No players!</li>"),eX=g.from_html('<li> <span> </span> <span class="badge text-bg-outline-secondary"> </span></li>'),eZ=g.from_html('<b>Disconnected Players</b> <ol class="list-unstyled"></ol>',1),e1=g.from_html('<div class="mb-2"><!></div> <div class="text-center"><div class="mb-2"> <br/> <br/> Crib: <!> <!> <!></div> <!> <div class="d-inline-block text-start"><b>Active Players</b> <ol class="list-unstyled"></ol> <!></div></div> <div class="mb-3"><!></div> <div> </div> <b>Lobby</b> <!>',1);g.delegate(["click"]);var e0=s(108),e2=g.from_html("<span> </span> ",1),e3=g.from_html('<span class="input-group-text flex-grow-1"><label class="form-check mx-auto"><input type="radio" class="form-check-input"/> <!></label></span>'),e4=g.from_html('<!> <div class="input-group mb-3"><span class="input-group-text flex-grow-1"><label class="form-check mx-auto"><input type="checkbox" class="form-check-input"/> Show Crib Value</label></span> <span class="input-group-text flex-grow-1"><label class="form-check mx-auto"><input type="checkbox" class="form-check-input"/> Show Hand Value</label></span> <span class="input-group-text flex-grow-1"><label class="form-check mx-auto"><input type="checkbox" class="form-check-input"/> Show Play Value</label></span></div> <div class="input-group mb-3"></div> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,s(102).A)(function(e,t){let s,r;g.push(t,!0);let i=[],a=new m.Ay,n=new Q(a),o=g.derived(()=>n.room),h=g.derived(()=>n.canReset),c=g.derived(()=>n.pastGames),p=g.derived(()=>n.leaderboard),x=g.derived(()=>n.localClient),S=g.derived(()=>n.roundState),E=(0,e0.C)("game/mp/_shared/name",""),k=(0,e0.C)("game/mp/cribbage/color",2),P=(0,e0.C)("game/mp/cribbage/showValueCrib",!0),N=(0,e0.C)("game/mp/cribbage/showValueHand",!0),T=(0,e0.C)("game/mp/cribbage/showValuePlay",!0);var R,M,A,D,L,V=e4(),W=g.first_child(V);(0,y.A)(W,{onchange:()=>n.sendRename(E.value),get value(){return E.value},set value($$value){E.value=$$value}});var G=g.sibling(W,2),Y=g.child(G),F=g.child(Y),B=g.child(F);g.remove_input_defaults(B),g.next(),g.reset(F),g.reset(Y);var J=g.sibling(Y,2),K=g.child(J),j=g.child(K);g.remove_input_defaults(j),g.next(),g.reset(K),g.reset(J);var ei=g.sibling(J,2),e6=g.child(ei),e5=g.child(e6);g.remove_input_defaults(e5),g.next(),g.reset(e6),g.reset(ei),g.reset(G);var e7=g.sibling(G,2);g.each(e7,21,()=>w,g.index,(e,t,s)=>{var r=e3(),a=g.child(r),n=g.child(a);g.remove_input_defaults(n),n.value=n.__value=s;var o=g.sibling(n),l=g.sibling(o);g.each(l,16,()=>({length:4}),g.index,(e,t,r)=>{var i=e2(),a=g.first_child(i),n=g.child(a,!0);g.reset(a),g.sibling(a).nodeValue="  ",g.template_effect(e=>{g.set_class(a,1,`badge text-bg-outline-${O[s][r]??""}`),g.set_attribute(a,"title",`${$[r]??""} with ${e??""} colors`),g.set_text(n,C[r])},[()=>w[s].toLowerCase()]),g.append(e,i)}),g.reset(a),g.reset(r),g.template_effect(()=>g.set_text(o,` ${g.get(t)??""} colors `)),g.bind_group(i,[],n,()=>k.value,e=>k.value=e),g.append(e,r)}),g.reset(e7);var e9=g.sibling(e7,2);g.bind_this((0,I.A)(e9,{gameId:"cribbage-ywbursnjqkgex9dvki7yya",roomType:"CribbageRoom",get gameRoom(){return n.room},onJoinedRoom:e=>n.enterGame(e,E.value),formatGameMode:e=>z((0,_.e)(U,e)),get roomCreateOptions(){return U}}),e=>s=e,()=>s);var e8=g.sibling(e9,2);{let e=g.derived(()=>g.get(S)===l.INTERMISSION);(0,b.A)(e8,{get inGame(){return g.get(o)},get isActive(){return n.localClient.active},get canReady(){return g.get(e)},get isReady(){return n.localClient.ready},onActive:()=>n.sendActive(),onReady:()=>n.sendReady(),onDisconnect:()=>(n.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,r,i,a,o,h,c,p,u,m,f,v,y,b,_,I,x,S,E,R,M,w,A,C,O,D,$,L,V,W,G,Y,U;let F,B,J,Q,K,j,q,X,Z,ee,et,ei,e0,e2,e3,e4,e6,e5;s={get gameState(){return n},get colorScheme(){return k.value},get showValueCrib(){return P.value},get showValueHand(){return N.value},get showValuePlay(){return T.value}},g.push(s,!0),F=[],B=[],J=[],Q=g.prop(s,"gameState",7),K=g.derived(()=>Q().roundState),j=g.derived(()=>Q().playerInfo),q=g.derived(()=>Q().turnIndex),X=g.derived(()=>Q().playing),Z=g.derived(()=>Q().canMove),ee=g.derived(()=>Q().playerDiscInfo),et=g.derived(()=>Q().mode),ei=g.derived(()=>Q().gamePhase),e0=g.derived(()=>Q().dealer),e2=g.derived(()=>Q().moveHistory),e3=g.derived(()=>Q().trickCount),e4=g.derived(()=>Q().myHand),e6=g.derived(()=>Q().localPlayer),r=e1(),i=g.first_child(r),a=g.child(i),o=e=>{var t=g.text("Waiting for players…");g.append(e,t)},h=e=>{var t=ef(),s=g.first_child(t),r=e=>{var t=g.text("Intermission:");g.append(e,t)},i=e=>{var t=g.comment(),s=g.first_child(t),r=e=>{var t=g.text("Make a move:");g.append(e,t)},i=e=>{var t=g.text("Waiting for others to move…");g.append(e,t)};g.if(s,e=>{g.get(Z)?e(r):e(i,!1)},!0),g.append(e,t)};g.if(s,e=>{g.get(K)===l.INTERMISSION?e(r):e(i,!1)});var a=g.sibling(s,2);(0,es.A)(a,{get startTime(){return Q().roundTimerStart},get endTime(){return Q().roundTimerEnd},get active(){return Q().room}}),g.append(e,t)},g.if(a,e=>{g.get(K)===l.WAITING?e(o):e(h,!1)}),g.reset(i),c=g.sibling(i,2),p=g.child(c),u=g.child(p),m=g.sibling(u,2),f=g.sibling(m,3),v=e=>{var t=eI(),r=g.first_child(t);g.each(r,17,()=>Q().crib,g.index,(e,t)=>{var r=ev(),i=g.first_child(r);H(i,{get card(){return g.get(t)},get colorScheme(){return s.colorScheme}}),g.sibling(i).nodeValue="  ",g.append(e,r)});var i=g.sibling(r,2);g.each(i,17,()=>({length:Q().cribSize-Q().crib.length}),g.index,(e,t)=>{var s=ey();g.sibling(g.first_child(s)).nodeValue="  ",g.append(e,s)});var a=g.sibling(i,2),n=e=>{let t=g.derived(()=>{let[e,t]=Q().scoreShow(Q().crib,g.get(ei)!==d.DEAL);return{value:e,scoreReasons:t}});var r=g.comment(),i=g.first_child(r),a=e=>{var r=e_(),i=g.sibling(g.first_child(r)),a=g.sibling(i),n=e=>{var r=eb();ea(g.sibling(g.first_child(r)),{get scoreReasons(){return g.get(t).scoreReasons},get colorScheme(){return s.colorScheme}}),g.next(),g.append(e,r)};g.if(a,e=>{g.get(t).scoreReasons.length&&e(n)}),g.template_effect(()=>g.set_text(i,` ${Q().crib.length<4?"≥":"+"}${g.get(t).value??""} at show `)),g.append(e,r)};g.if(i,e=>{g.get(t).value&&e(a)}),g.append(e,r)};g.if(a,e=>{s.showValueCrib&&Q().crib.length&&e(n)}),g.append(e,t)},y=e=>{var t=g.text("empty");g.append(e,t)},g.if(f,e=>{Q().cribSize?e(v):e(y,!1)}),b=g.sibling(f,2),_=e=>{let t=g.derived(()=>g.get(e6)===g.get(j)[g.get(e0)]);var s=ex(),r=g.sibling(g.first_child(s),2),i=g.child(r);g.reset(r),g.template_effect(()=>{g.set_class(r,1,`badge text-bg-${g.get(t)?"":"outline-"}success`),g.set_text(i,`${g.get(t)?"":"NOT "}DEALER`)}),g.append(e,s)},g.if(b,e=>{g.get(e6)&&e(_)}),I=g.sibling(b,2),x=e=>{var t=eS();H(g.sibling(g.first_child(t),2),{get card(){return Q().starter},get colorScheme(){return s.colorScheme}}),g.append(e,t)},g.if(I,e=>{g.get(ei)!==d.DEAL&&e(x)}),g.reset(p),S=g.sibling(p,2),E=e=>{var t=eV(),r=g.first_child(t),i=g.sibling(g.child(r));g.each(i,17,()=>g.get(e4),g.index,(e,t,r)=>{var i=eE(),a=g.first_child(i);{let e=g.derived(()=>r>=g.get(e6).played.length);H(a,{get card(){return g.get(t)},get colorScheme(){return s.colorScheme},get outline(){return g.get(e)}})}g.sibling(a).nodeValue="  ",g.append(e,i)});var a=g.sibling(i,2),n=e=>{let t=g.derived(()=>{let[e,t]=Q().scoreShow(g.get(e4),g.get(ei)!==d.DEAL);return{value:e,scoreReasons:t}});var r=eP(),i=g.sibling(g.first_child(r)),a=g.sibling(i),n=e=>{var r=ek();ea(g.sibling(g.first_child(r)),{get scoreReasons(){return g.get(t).scoreReasons},get colorScheme(){return s.colorScheme}}),g.next(),g.append(e,r)};g.if(a,e=>{g.get(t).scoreReasons.length&&e(n)}),g.template_effect(()=>g.set_text(i,` ${g.get(ei)===d.DEAL?"≥":"+"}${g.get(t).value??""} at show `)),g.append(e,r)};g.if(a,e=>{s.showValueHand&&4===g.get(e4).length&&e(n)});var o=g.sibling(a,2),l=e=>{var t=eT(),r=g.sibling(g.first_child(t)),i=g.sibling(r);g.each(i,17,()=>Q().play,g.index,(e,t)=>{var r=eN(),i=g.first_child(r);H(i,{get card(){return g.get(t)},get colorScheme(){return s.colorScheme}}),g.sibling(i).nodeValue="  ",g.append(e,r)}),g.template_effect(()=>g.set_text(r,` Count: ${g.get(e3)??""} `)),g.append(e,t)};g.if(o,e=>{g.get(ei)!==d.DEAL&&e(l)}),g.reset(r);var h=g.sibling(r,2),c=g.child(h),p=e=>{let t=g.derived(()=>g.get(j).indexOf(g.get(e6)));var r=eA(),i=g.first_child(r),a=g.child(i),n=g.sibling(a),o=e=>{var t=g.text("as the");g.append(e,t)},l=e=>{var t=g.text("and are not");g.append(e,t)};g.if(n,e=>{g.get(t)===g.get(e0)?e(o):e(l,!1)}),g.next(),g.reset(i);var h=g.sibling(i,2),c=e=>{var t=ew(),r=g.first_child(t),i=g.sibling(r),a=g.child(i),n=g.child(a),o=g.child(n);g.next(),g.reset(n),g.reset(a);var l=g.sibling(a);g.each(l,21,()=>g.get(e4),g.index,(e,t,r)=>{let i,a=g.derived(()=>Q().discard0===r),n=g.derived(()=>g.get(j).length<=2&&Q().discard1===r);var o=eM(),l=g.child(o),h=g.child(l);g.remove_input_defaults(h),h.value=h.__value=r,g.reset(l);var c=g.sibling(l),d=e=>{var t=eR(),s=g.child(t);g.remove_input_defaults(s),s.value=s.__value=r,g.reset(t),g.template_effect(()=>s.disabled=g.get(a)),g.bind_group(B,[],s,()=>Q().discard1,e=>Q().discard1=e),g.append(e,t)};g.if(c,e=>{g.get(j).length<=2&&e(d)});var p=g.sibling(c);H(g.child(p),{get card(){return g.get(t)},get colorScheme(){return s.colorScheme}}),g.reset(p),g.reset(o),g.template_effect(()=>{i=g.set_class(o,1,"",null,i,{"table-danger":g.get(a)||g.get(n)}),h.disabled=g.get(n)}),g.bind_group(F,[],h,()=>Q().discard0,e=>Q().discard0=e),g.append(e,o)}),g.reset(l),g.reset(i),g.sibling(i,2).__click=()=>Q().sendMoveKeep(),g.template_effect(()=>{g.set_text(r,`Keep 4 cards, by discarding ${g.get(j).length>2?"1 card":"2 cards"}: `),g.set_attribute(o,"colspan",g.get(j).length<=2?2:1)}),g.append(e,t)},d=e=>{var t=g.text("Wait for others to choose cards…");g.append(e,t)};g.if(h,e=>{g.get(e4).length>4?e(c):e(d,!1)}),g.template_effect(()=>g.set_text(a,`You will move ${["first (1st)","second (2nd)","third (3rd)","fourth (4th)"][(g.get(t)+g.get(j).length-g.get(e0)-1)%g.get(j).length]??""} `)),g.append(e,r)},u=e=>{var t=g.comment(),r=g.first_child(t),i=e=>{var t=g.comment(),r=g.first_child(t),i=e=>{let t;var r=eL(),i=g.sibling(g.first_child(r)),a=g.child(i),n=g.child(a),o=g.sibling(g.child(n),3),l=e=>{var t=eC();g.append(e,t)};g.if(o,e=>{s.showValuePlay&&e(l)}),g.reset(n),g.reset(a);var h=g.sibling(a),c=g.child(h);g.each(c,17,()=>g.get(e4),g.index,(e,t,r)=>{var i=g.comment(),a=g.first_child(i),n=e=>{let i,a,n=g.derived(()=>r-g.get(e6).played.length),o=g.derived(()=>Math.min((g.get(t)>>2)+1,10)),l=g.derived(()=>g.get(e3)+g.get(o)),h=g.derived(()=>{let[e,s]=Q().scorePlay(g.get(t));return{scoreDelta:e,scoreReasons:s}});var c,d=e$(),p=g.child(d),u=g.child(p);g.remove_input_defaults(u),g.reset(p);var m=g.sibling(p);H(g.child(m),{get card(){return g.get(t)},get colorScheme(){return s.colorScheme}}),g.reset(m);var f=g.sibling(m),v=g.child(f,!0);g.reset(f);var y=g.sibling(f),b=e=>{var t=eD(),r=g.child(t),i=g.sibling(r),a=e=>{var t=eO();ea(g.sibling(g.first_child(t),2),{get scoreReasons(){return g.get(h).scoreReasons},get colorScheme(){return s.colorScheme}}),g.next(),g.append(e,t)};g.if(i,e=>{g.get(h).scoreReasons.length&&e(a)}),g.reset(t),g.template_effect(()=>g.set_text(r,`+${g.get(h).scoreDelta??""} `)),g.append(e,t)};g.if(y,e=>{s.showValuePlay&&e(b)}),g.reset(d),g.template_effect(()=>{i=g.set_class(d,1,"",null,i,{"table-success":Q().pendingMove===g.get(n),"table-danger":g.get(l)>31}),u.disabled=g.get(l)>31,c!==(c=g.get(n))&&(u.value=(u.__value=g.get(n))??""),a=g.set_class(f,1,"",null,a,{"table-primary":31===g.get(l)}),g.set_text(v,g.get(l))}),g.bind_group(J,[],u,()=>(g.get(n),Q().pendingMove),e=>Q().pendingMove=e),g.append(e,d)};g.if(a,e=>{r>=g.get(e6).played.length&&e(n)}),g.append(e,i)});var d=g.sibling(c),p=g.child(d),u=g.child(p);g.remove_input_defaults(u),u.value=u.__value=4,g.reset(p);var m=g.sibling(p),f=g.child(m,!0);g.reset(m),g.reset(d),g.reset(h),g.reset(i),g.sibling(i,2).__click=()=>Q().sendMovePlay(),g.template_effect(e=>{t=g.set_class(d,1,"",null,t,{"table-warning":4===Q().pendingMove}),g.set_attribute(m,"colspan",s.showValuePlay?3:2),g.set_text(f,e)},[()=>Q().mode.optSkipEmpty&&Q().mode.optSkipPass||g.get(e4).some((e,t)=>t>=g.get(e6).played.length&&g.get(e3)+Math.min((e>>2)+1,10)<=31)?"Random":"Pass"]),g.bind_group(J,[],u,()=>Q().pendingMove,e=>Q().pendingMove=e),g.append(e,r)},a=e=>{var t=g.text("Wait for others to move…");g.append(e,t)};g.if(r,e=>{g.get(Z)?e(i):e(a,!1)}),g.append(e,t)},a=e=>{var t=g.comment(),s=g.first_child(t),r=e=>{var t=g.text("Wait for others to finish reviewing…");g.append(e,t)},i=e=>{var t=eH(),s=g.first_child(t),r=g.child(s);g.reset(s),g.sibling(s,2).__click=()=>Q().sendMoveReady(),g.template_effect(()=>g.set_text(r,`Review the results before the ${g.get(ei)===d.PRE?"show":"next hand"}.`)),g.append(e,t)};g.if(s,e=>{g.get(e6).passed?e(r):e(i,!1)}),g.append(e,t)};g.if(r,e=>{g.get(ei)===d.PLAY?e(i):e(a,!1)},!0),g.append(e,t)};g.if(c,e=>{g.get(ei)===d.DEAL?e(p):e(u,!1)}),g.reset(h),g.append(e,t)},g.if(S,e=>{g.get(X)&&g.get(e6)&&e(E)}),R=g.sibling(S,2),M=g.sibling(g.child(R),2),g.each(M,21,()=>g.get(j),g.index,(e,t,r)=>{let i=g.derived(()=>g.get(t)===g.get(e6)),a=g.derived(()=>g.get(i)?"":"-outline");var n=ej(),o=g.child(n),l=g.child(o,!0);g.reset(o);var h=g.sibling(o,2),c=g.child(h,!0);g.reset(h);var p=g.sibling(h),u=g.sibling(p),m=e=>{var t=eW();g.template_effect(()=>g.set_class(t,1,`badge text-bg${g.get(a)??""}-success`)),g.append(e,t)};g.if(u,e=>{r===g.get(e0)&&e(m)});var f=g.sibling(u,2),v=e=>{var t=eG();g.template_effect(()=>g.set_class(t,1,`badge text-bg${g.get(a)??""}-primary`)),g.append(e,t)};g.if(f,e=>{r===g.get(q)&&e(v)});var y=g.sibling(f,2),b=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=eY();g.template_effect(()=>g.set_class(t,1,`badge text-bg${g.get(a)??""}-info`)),g.append(e,t)},n=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=eU();g.template_effect(()=>g.set_class(t,1,`badge text-bg${g.get(a)??""}-info`)),g.append(e,t)};g.if(r,e=>{g.get(t).handSize||e(i)},!0),g.append(e,s)};g.if(r,e=>{g.get(t).passed?e(i):e(n,!1)}),g.append(e,s)},_=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=ez();g.template_effect(()=>g.set_class(t,1,`badge text-bg${g.get(a)??""}-info`)),g.append(e,t)};g.if(r,e=>{g.get(t).passed&&e(i)},!0),g.append(e,s)};g.if(y,e=>{g.get(ei)===d.PLAY?e(b):e(_,!1)});var I=g.sibling(y,2),x=e=>{var t=g.comment(),r=g.first_child(t);g.each(r,17,()=>g.get(e4),g.index,(e,t,r,i)=>{var a=eF(),n=g.first_child(a);{let e=g.derived(()=>r>=g.get(e6).played.length);H(n,{get card(){return g.get(t)},get colorScheme(){return s.colorScheme},get outline(){return g.get(e)}})}g.sibling(n).nodeValue="  ",g.append(e,a)}),g.append(e,t)},S=e=>{var r=eQ(),i=g.first_child(r);g.each(i,17,()=>g.get(t).played,g.index,(e,t)=>{var r=eB(),i=g.first_child(r);H(i,{get card(){return g.get(t)},get colorScheme(){return s.colorScheme},outline:!1}),g.sibling(i).nodeValue="  ",g.append(e,r)});var a=g.sibling(i,2);g.each(a,17,()=>({length:g.get(t).handSize}),g.index,(e,t)=>{var s=eJ();g.append(e,s)}),g.append(e,r)};g.if(I,e=>{g.get(i)&&g.get(ei)===d.PLAY?e(x):e(S,!1)});var E=g.sibling(I,4),k=g.child(E),P=e=>{var s=eK();g.template_effect(e=>{g.set_class(s,1,`progress-bar bg-${g.get(i)?"success":"danger"}`),g.set_style(s,`width:${e??""}%`)},[()=>Math.min(100*g.get(t).score/Q().mode.optScoreTarget,100)]),g.append(e,s)};g.if(k,e=>{g.get(t).score&&e(P)}),g.reset(E),g.reset(n),g.template_effect(e=>{g.set_class(o,1,`badge text-bg${g.get(a)??""}-${r===g.get(q)?"primary":"secondary"}`),g.set_text(l,e),g.set_text(c,g.get(t).score),g.set_text(p,`/${g.get(et).optScoreTarget??""} `)},[()=>Q().formatPlayerName(g.get(t))]),g.append(e,n)},e=>{var t=eq();g.append(e,t)}),g.reset(M),w=g.sibling(M,2),A=e=>{var t=eZ(),s=g.sibling(g.first_child(t),2);g.each(s,21,()=>g.get(ee),g.index,(e,t,s)=>{let r=g.derived(()=>g.get(t).isMe?"":"-outline");var i=eX(),a=g.child(i),n=g.sibling(a),o=g.child(n,!0);g.reset(n);var l=g.sibling(n,2),h=g.child(l,!0);g.reset(l),g.reset(i),g.template_effect(()=>{g.set_text(a,`#${s+g.get(j).length+1}: `),g.set_class(n,1,`badge text-bg${g.get(r)??""}-danger`),g.set_text(o,g.get(t).ownerName),g.set_text(h,g.get(t).score)}),g.append(e,i)}),g.reset(s),g.append(e,t)},g.if(w,e=>{g.get(ee).length&&e(A)}),g.reset(R),g.reset(c),C=g.sibling(c,2),O=g.child(C),D={get moves(){return g.get(e2)},get colorScheme(){return s.colorScheme}},g.push(D,!0),e5=g.state(!0),$=em(),L=g.sibling(g.first_child($),2),V=g.child(L),g.remove_input_defaults(V),g.next(2),g.reset(L),W=g.sibling(L,2),g.each(W,21,()=>D.moves,g.index,(e,t,s)=>{var r=g.comment(),i=g.first_child(r),a=e=>{let r;var i=eo(),a=g.first_child(i),n=g.child(a);g.reset(a);var o=g.sibling(a,2),l=e=>{var t=en();g.append(e,t)};g.if(o,e=>{s!==D.moves.length-1&&e(l)}),g.template_effect(()=>{r=g.set_class(a,1,"",null,r,{"d-inline-block":g.get(e5)}),g.set_text(n,`[Hand ${g.get(t).hand??""} ended.]`)}),g.append(e,i)},n=e=>{let s,r=g.derived(()=>g.get(t).playerIsMe?"":"-outline");var i=eu(),a=g.first_child(i),n=g.child(a),o=g.child(n,!0);g.reset(n);var l=g.sibling(n,2),h=e=>{var s=el(),r=g.first_child(s),i=e=>{var s=g.text();g.template_effect(()=>g.set_text(s,`got +2 → ${g.get(t).score??""} for revealing`)),g.append(e,s)},a=e=>{var t=g.text("reveals");g.append(e,t)};g.if(r,e=>{g.get(t).bonus?e(i):e(a,!1)}),H(g.sibling(r,2),{get card(){return g.get(t).starter},get colorScheme(){return D.colorScheme}}),g.next(),g.append(e,s)},c=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var s=eg(),r=g.first_child(s),i=e=>{var s=g.text();g.template_effect(()=>g.set_text(s,`got +${g.get(t).scoreDelta??""} → ${g.get(t).score??""}`)),g.append(e,s)};g.if(r,e=>{g.get(t).scoreDelta&&e(i)});var a=g.sibling(r,2),n=e=>{var s=g.text();g.template_effect(()=>g.set_text(s,`for the final card to ${g.get(t).count??""} on turn ${g.get(t).hand??""}:${g.get(t).trick??""}:${g.get(t).turn??""}.`)),g.append(e,s)},o=e=>{var s=ep(),r=g.first_child(s),i=e=>{var s=eh(),r=g.first_child(s),i=g.sibling(r);g.each(i,17,()=>g.get(t).cards,g.index,(e,t)=>{H(e,{get card(){return g.get(t)},get colorScheme(){return D.colorScheme}})}),g.template_effect(()=>g.set_text(r,`for ${g.get(t).isCrib?"crib":"hand"} `)),g.append(e,s)},a=e=>{var s=ec(),r=g.first_child(s);H(g.sibling(r),{get card(){return g.get(t).card},get colorScheme(){return D.colorScheme}}),g.template_effect(()=>g.set_text(r,`${g.get(t).scoreDelta?"by playing":"played"} `)),g.append(e,s)};g.if(r,e=>{"show"===g.get(t).type?e(i):e(a,!1)});var n=g.sibling(r,2),o=e=>{var s=ed();ea(g.sibling(g.first_child(s)),{get scoreReasons(){return g.get(t).scoreReasons},get colorScheme(){return D.colorScheme}}),g.next(),g.append(e,s)},l=e=>{var t=g.text("(+0).");g.append(e,t)};g.if(n,e=>{g.get(t).scoreReasons.length?e(o):e(l,!1)}),g.append(e,s)};g.if(a,e=>{"final"===g.get(t).type?e(n):e(o,!1)}),g.append(e,s)},a=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=g.text("passed.");g.append(e,t)},a=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=g.text("was out.");g.append(e,t)},a=e=>{var s=g.comment(),r=g.first_child(s),i=e=>{var t=g.text("left.");g.append(e,t)},a=e=>{var s=g.text();g.template_effect(e=>g.set_text(s,`[unknown move ${e??""}]`),[()=>JSON.stringify(g.get(t))]),g.append(e,s)};g.if(r,e=>{"leave"===g.get(t).type?e(i):e(a,!1)},!0),g.append(e,s)};g.if(r,e=>{"out"===g.get(t).type?e(i):e(a,!1)},!0),g.append(e,s)};g.if(r,e=>{"pass"===g.get(t).type?e(i):e(a,!1)},!0),g.append(e,s)};g.if(r,e=>{"final"===g.get(t).type||"play"===g.get(t).type||"show"===g.get(t).type?e(i):e(a,!1)},!0),g.append(e,s)};g.if(l,e=>{"start"===g.get(t).type?e(h):e(c,!1)}),g.reset(a),g.sibling(a).nodeValue="  ",g.template_effect(()=>{s=g.set_class(a,1,"",null,s,{"d-inline-block":g.get(e5)}),g.set_class(n,1,`badge text-bg${g.get(r)??""}-primary`),g.set_text(o,g.get(t).playerName)}),g.append(e,i)};g.if(i,e=>{"endHand"===g.get(t).type?e(a):e(n,!1)}),g.append(e,r)},e=>{g.next();var t=g.text("No moves yet!");g.append(e,t)}),g.reset(W),g.bind_checked(V,()=>g.get(e5),e=>g.set(e5,e)),g.append(O,$),g.pop(),g.reset(C),G=g.sibling(C,2),Y=g.child(G),g.reset(G),U=g.sibling(G,4),(0,er.A)(U,{get localClient(){return Q().localClient},get inGame(){return Q().roundPlayers},get inQueue(){return Q().roundPlayerQueue},get spectators(){return Q().spectators}}),g.template_effect(e=>{g.set_text(u,`Game Phase: ${(g.get(K)===l.ACTIVE?["Deal","Play","Pre-Show","Post-Show"][g.get(ei)]:"Inactive")??""} `),g.set_text(m,` Turn ${Q().handNum??""}:${Q().trickNum??""}:${Q().trickTurn??""} `),g.set_text(Y,`Game Mode: ${e??""}`)},[()=>z(g.get(et))]),g.append(e,r),g.pop()},$$slots:{default:!0}})}var te=g.sibling(e8,2),tt=g.child(te),ts=g.child(tt);R={get canClear(){return g.get(c).length},onClear:()=>n.clearHistory(),children:(e,t)=>{var s,r;s={get results(){return g.get(c)}},g.push(s,!0),r=et(),g.each(r,21,()=>s.results,g.index,(e,t)=>{var s=Z(),r=g.child(s),i=g.sibling(r);g.each(i,21,()=>g.get(t).players,g.index,(e,s)=>{var r=X(),i=g.child(r),a=g.sibling(i),n=g.child(a,!0);g.reset(a);var o=g.sibling(a,2),l=g.child(o,!0);g.reset(o);var h=g.sibling(o),c=g.sibling(h),d=g.child(c),p=e=>{var r=q();g.template_effect(e=>{g.set_class(r,1,`progress-bar bg-${g.get(s).rank>1?"secondary":"primary"}`),g.set_style(r,`width:${e??""}%`)},[()=>Math.min(100*g.get(s).score/g.get(t).scoreTarget,100)]),g.append(e,r)};g.if(d,e=>{g.get(s).score&&e(p)}),g.reset(c),g.reset(r),g.template_effect(()=>{g.set_text(i,`#${g.get(s).rank??""} `),g.set_class(a,1,`badge text-bg-${g.get(s).isMe?"":"outline-"}${g.get(s).rank>1?"secondary":"primary"}`),g.set_text(n,g.get(s).name),g.set_text(l,g.get(s).score),g.set_text(h,`/${g.get(t).scoreTarget??""} `)}),g.append(e,r)}),g.reset(i),g.reset(s),g.template_effect(e=>g.set_text(r,`Turn ${g.get(t).hand??""}:${g.get(t).trick??""}:${g.get(t).turn??""} in ${e??""}: `),[()=>{var e;let s;return s=Number((e=g.get(t).duration)%1000n),`${e/1000n}${(s/1e3+"").slice(1)}s`}]),g.append(e,s)},e=>{var t=ee();g.append(e,t)}),g.reset(r),g.append(e,r),g.pop()},$$slots:{default:!0}},M=f(),A=g.child(M),(D=g.sibling(g.child(A),2)).__click=function(...e){R.onClear?.apply(this,e)},g.reset(A),L=g.sibling(A,2),g.snippet(L,()=>R.children),g.reset(M),g.template_effect(()=>r=g.set_class(D,1,"btn btn-sm btn-danger float-end",null,r,{"d-none":!R.canClear})),g.append(ts,M);var tr=g.sibling(ts,2);(0,v.A)(tr,{get leaderboard(){return g.get(p)},get localClient(){return g.get(x)},get inGame(){return g.get(o)},get canReset(){return g.get(h)},onReset:()=>n.sendReset(),columns:[["Score",e=>e.score],["Win",e=>e.wins],["Loss",e=>e.losses],["Streak",e=>e.streak],["Rank Last",e=>e.rankLast],["Best",e=>e.rankBest],["Worst",e=>e.rankWorst]]}),g.reset(tt);var ti=g.sibling(tt,2),ta=g.child(ti);(0,u.A)(ta,{get chatState(){return a},get canSend(){return n.room},onInput:e=>(0,m.Oo)(n,e)}),g.reset(ti),g.reset(te),g.bind_checked(B,()=>P.value,e=>P.value=e),g.bind_checked(j,()=>N.value,e=>N.value=e),g.bind_checked(e5,()=>T.value,e=>T.value=e),g.append(e,V),g.pop()})},122(e,t,s){s.d(t,{JY:()=>r});function r(e){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="";for(;e--;)s+=t[Math.random()*t.length|0];return s}}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],n.O=(t,s,r,i)=>{if(s){i=i||0;for(var a=e.length;a>0&&e[a-1][2]>i;a--)e[a]=e[a-1];e[a]=[s,r,i];return}for(var o=1/0,a=0;a<e.length;a++){for(var[s,r,i]=e[a],l=!0,h=0;h<s.length;h++)(!1&i||o>=i)&&Object.keys(n.O).every(e=>n.O[e](s[h]))?s.splice(h--,1):(l=!1,i<o&&(o=i));if(l){e.splice(a--,1);var c=r();void 0!==c&&(t=c)}}return t},n.rv=()=>"1.7.3",t={95:0},n.O.j=e=>0===t[e],s=(e,s)=>{var r,i,[a,o,l]=s,h=0;if(a.some(e=>0!==t[e])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)var c=l(n)}for(e&&e(s);h<a.length;h++)i=a[h],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},(r=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r)),n.ruid="bundler=rspack@1.7.3";var o=n.O(void 0,["14","21","37","22","41","36"],()=>n(149));o=n.O(o)})();