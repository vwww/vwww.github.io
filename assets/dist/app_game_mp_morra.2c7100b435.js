(()=>{"use strict";var e,t,s,n,i={139:function(e,t,s){s(1);var n,i,r,a,o=s(2),l=s(120),d=s(121),p=s(122),c=s(123),_=s(124),g=s(125),m=s(126),u=s(127),v=s(130);let h=[["optInverted","b",!1,"Inverted","switch winning and losing"],["optAddRandom","b",!1,"Random","add a random number to the result"],["optTeams","i",0,"Teams","number of teams",0,45]];function f({optInverted:e,optAddRandom:t,optTeams:s}){return(e?"Inverted ":"")+(t?"Randomized ":"")+(s?s+"-team":"FFA")}var b=s(133);class y extends v.wG{}class E extends v.Nd{}(n=r||(r={}))[n.WELCOME=0]="WELCOME",n[n.JOIN=1]="JOIN",n[n.LEAVE=2]="LEAVE",n[n.RESET=3]="RESET",n[n.RENAME=4]="RENAME",n[n.PING=5]="PING",n[n.PING_TIME=6]="PING_TIME",n[n.CHAT=7]="CHAT",n[n.ACTIVE=8]="ACTIVE",n[n.ROUND_WAIT=9]="ROUND_WAIT",n[n.ROUND_INTERM=10]="ROUND_INTERM",n[n.ROUND_START=11]="ROUND_START",n[n.READY=12]="READY",n[n.END_ROUND=13]="END_ROUND",n[n.MOVE_CONFIRM=14]="MOVE_CONFIRM",(i=a||(a={}))[i.RESET=0]="RESET",i[i.RENAME=1]="RENAME",i[i.PONG=2]="PONG",i[i.CHAT=3]="CHAT",i[i.ACTIVE=4]="ACTIVE",i[i.READY=5]="READY",i[i.MOVE=6]="MOVE";class R extends y{#e=o.state(0);get wins(){return o.get(this.#e)}set wins(e){o.set(this.#e,e,!0)}#t=o.state(0);get losses(){return o.get(this.#t)}set losses(e){o.set(this.#t,e,!0)}#s=o.state(0);get total(){return o.get(this.#s)}set total(e){o.set(this.#s,e,!0)}#n=o.state(0);get streak(){return o.get(this.#n)}set streak(e){o.set(this.#n,e,!0)}resetScore(){this.wins=0,this.losses=0,this.total=0,this.streak=0}readWelcome(e){super.readWelcome(e),this.wins=e.getInt(),this.losses=e.getInt(),this.total=this.wins+this.losses,this.streak=e.getInt()}}class I extends E{#i=o.state(o.proxy((0,m.q)(h)));get mode(){return o.get(this.#i)}set mode(e){o.set(this.#i,e,!0)}#r=o.state(0);get pendingMove(){return o.get(this.#r)}set pendingMove(e){o.set(this.#r,e,!0)}#a=o.state(0);get pendingMoveAck(){return o.get(this.#a)}set pendingMoveAck(e){o.set(this.#a,e,!0)}INTERMISSION_TIME=5e3;ROUND_TIME=3e3;newClient(){return new R}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",a.RESET)}sendRename(e){this.sendf("is",a.RENAME,e)}sendPong(e){this.sendf("i2",a.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",a.CHAT,t,s,(0,b.JK)(e))}sendActive(){this.sendf("i",a.ACTIVE)}sendReady(){this.sendf("i",a.READY)}sendMove(){this.sendf("iU",a.MOVE,BigInt(this.pendingMove))}MESSAGE_HANDLERS={[r.WELCOME]:this.processWelcome,[r.JOIN]:this.processJoin,[r.LEAVE]:this.processLeave,[r.RESET]:this.processReset,[r.RENAME]:this.processRename,[r.PING]:this.processPing,[r.PING_TIME]:this.processPingTime,[r.CHAT]:this.processChat,[r.ACTIVE]:this.processActive,[r.ROUND_WAIT]:this.processRoundWait,[r.ROUND_INTERM]:this.processRoundInterm,[r.ROUND_START]:this.processRoundStart,[r.READY]:this.processReady,[r.END_ROUND]:this.processEndRound,[r.MOVE_CONFIRM]:this.processMoveConfirm};processWelcomeMode(e){let t=e.get();this.mode.optInverted=!!(1&t),this.mode.optAddRandom=!!(2&t),this.mode.optTeams=e.getInt()}processRoundStart(e){super.processRoundStart(e),this.localClient.inRound&&(this.pendingMove=Math.floor(Math.random()*(this.mode.optTeams||this.roundPlayers.length)),this.sendMove())}processMoveConfirm(e){this.pendingMoveAck=Number(e.getUint64())}processEndRound(e){let t=Math.min(e.getInt(),this.clients.length),s=e.getUint64(),n=e.getInt(),i=Math.min(e.getInt(),this.clients.length),r=this.mode.optInverted,a=Number(s%BigInt(t)),o={playerCount:i,moveSum:s,moveRnd:n,winner:a,inverted:r,teams:Array.from({length:t},(e,t)=>({id:t,winner:t===a!==r,moveSum:0n,players:[]}))};for(let s=0;s<i;s++){let n=e.getCN();if(n<0)break;let i=e.getUint64(),r=this.clients[n];if(!r)continue;let a=s%t,l=o.teams[a];l.winner?(r.wins++,r.streak<0&&(r.streak=0),r.streak++):(r.losses++,r.streak>0&&(r.streak=0),r.streak--),r.total++,r==this.localClient&&(l.meIndex=l.players.length),l.moveSum+=i,l.players.push({name:r.name,cn:r.cn,move:i})}this.updatePlayers(),this.addHistory(o)}playersSortProps=[e=>e.streak,e=>e.wins-e.losses,e=>e.wins]}var M=o.from_html("<span> </span>:",1),A=o.from_html('<div class="d-inline-block"><span> </span> <span> </span></div>'),k=o.from_html("<div><span></span> <!> <!></div>"),N=o.from_html('<div>Random: <span class="badge me-2 text-bg-outline-primary"> </span></div>'),T=o.from_html('<li class="list-group-item"><div> <span class="badge text-bg-success"> </span> </div> <!> <!></li>'),w=o.from_html('<li class="list-group-item">No past games!</li>'),x=o.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),O=s(128),C=s(135),S=o.from_html("<!> <!>",1),P=(e,t)=>t().sendMove(),D=(e,t)=>t().sendMove(),$=o.from_html('<input type="number" min="0" max="9007199254740992"/> <input type="range" class="form-range" min="0" max="9007199254740992"/>',1),G=o.from_html("<!> <div> </div> <!> <!>",1);o.delegate(["change"]);var U=s(102),V=o.from_html('<!> <!> <!> <div class="row"><div class="col-12 col-lg-8"><!> <!></div> <div class="col-12 col-lg-4 mb-3"><!></div></div>',1);(0,s(96).A)(function(e,t){let s;o.push(t,!0);let n=new d.Ay,i=new I(n),r=o.derived(()=>i.pastGames),a=o.derived(()=>i.leaderboard),b=o.derived(()=>i.localClient),y=o.derived(()=>i.roundState),E=(0,U.C)("game/mp/_shared/name","");var R=V(),L=o.first_child(R);(0,_.A)(L,{get value(){return E.value},set value($$value){E.value=$$value}});var z=o.sibling(L,2);{let e=o.derived(()=>({name:E.value}));o.bind_this((0,u.A)(z,{gameId:"morra-prb9sv8g70oyhq9eznhkyq",roomType:"MorraRoom",get joinData(){return o.get(e)},get gameRoom(){return i.room},onJoinedRoom:e=>i.enterGame(e,E.value),formatGameMode:e=>f((0,m.e)(h,e)),get roomCreateOptions(){return h}}),e=>s=e,()=>s)}var W=o.sibling(z,2);{let e=o.derived(()=>o.get(y)===v.mk.INTERMISSION);(0,g.A)(W,{get inGame(){return i.room},get isActive(){return i.localClient.active},get canReady(){return o.get(e)},get isReady(){return i.localClient.ready},onActive:()=>i.sendActive(),onReady:()=>i.sendReady(),onReset:()=>i.sendReset(),onDisconnect:()=>(i.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,n,r,a,l,d,p,c,_,g;let m,u,h,b;s={get gameState(){return i}},o.push(s,!0),m=o.prop(s,"gameState",7),u=o.derived(()=>m().localClient),h=o.derived(()=>m().roundState),b=o.derived(()=>o.get(u).active&&o.get(h)==v.mk.ACTIVE&&o.get(u).inRound),n=G(),r=o.first_child(n),a=e=>{var t=o.text("Waiting for players…");o.append(e,t)},l=e=>{var t=S(),s=o.first_child(t),n=e=>{var t=o.text("Intermission:");o.append(e,t)},i=e=>{var t=o.comment(),s=o.first_child(t),n=e=>{var t=o.text("Make a move:");o.append(e,t)},i=e=>{var t=o.text("Results are coming soon:");o.append(e,t)};o.if(s,e=>{o.get(b)?e(n):e(i,!1)},!0),o.append(e,t)};o.if(s,e=>{o.get(h)===v.mk.INTERMISSION?e(n):e(i,!1)});var r=o.sibling(s,2);(0,O.A)(r,{get startTime(){return m().roundTimerStart},get endTime(){return m().roundTimerEnd},get active(){return m().room}}),o.append(e,t)},o.if(r,e=>{o.get(h)===v.mk.WAITING?e(a):e(l,!1)}),d=o.sibling(r,2),p=o.child(d),o.reset(d),c=o.sibling(d,2),_=e=>{var t=$(),s=o.first_child(t);o.remove_input_defaults(s),s.__change=[P,m];var n=o.sibling(s,2);o.remove_input_defaults(n),n.__change=[D,m],o.template_effect(()=>o.set_class(s,1,`form-control is-${m().pendingMove===m().pendingMoveAck?"":"in"}valid`)),o.bind_value(s,()=>m().pendingMove,e=>m().pendingMove=e),o.bind_value(n,()=>m().pendingMove,e=>m().pendingMove=e),o.append(e,t)},o.if(c,e=>{o.get(b)&&e(_)}),g=o.sibling(c,2),(0,C.A)(g,{get localClient(){return o.get(u)},get inGame(){return m().roundPlayers},get inQueue(){return m().roundPlayerQueue}}),o.template_effect(e=>o.set_text(p,`Game Mode: ${e??""}`),[()=>f(m().mode)]),o.append(e,n),o.pop()},$$slots:{default:!0}})}var Y=o.sibling(W,2),j=o.child(Y),B=o.child(j);(0,p.A)(B,{get canClear(){return o.get(r).length},onClear:()=>i.clearHistory(),children:(e,t)=>{var s,n;s={get results(){return o.get(r)}},n=x(),o.each(n,21,()=>s.results,o.index,(e,t)=>{var s=T(),n=o.child(s),i=o.child(n),r=o.sibling(i),a=o.child(r,!0);o.reset(r);var l=o.sibling(r);o.reset(n);var d=o.sibling(n,2);o.each(d,17,()=>o.get(t).teams,o.index,(e,s,n)=>{let i=o.derived(()=>null!=o.get(s).meIndex?"":"-outline");var r=k(),a=o.child(r);a.textContent=`#${n}`;var l=o.sibling(a,2),d=e=>{var t=M(),n=o.first_child(t),r=o.child(n,!0);o.reset(n),o.next(),o.template_effect(()=>{o.set_class(n,1,`badge text-bg${o.get(i)??""}-primary`),o.set_text(r,o.get(s).moveSum)}),o.append(e,t)};o.if(l,e=>{o.get(t).teams.length<o.get(t).playerCount&&e(d)});var p=o.sibling(l,2);o.each(p,17,()=>o.get(s).players,o.index,(e,t,n,i)=>{let r=o.derived(()=>o.get(s).meIndex==n?"":"-outline");var a=A(),l=o.child(a),d=o.child(l);o.reset(l);var p=o.sibling(l,2),c=o.child(p,!0);o.reset(p),o.reset(a),o.template_effect(()=>{o.set_class(l,1,`badge me-1 text-bg${o.get(r)??""}-secondary`),o.set_text(d,`${o.get(t).name??""} (${o.get(t).cn??""})`),o.set_class(p,1,`badge me-2 text-bg${o.get(r)??""}-primary`),o.set_text(c,o.get(t).move)}),o.append(e,a)}),o.reset(r),o.template_effect(()=>o.set_class(a,1,`badge me-1 text-bg${o.get(i)??""}-${o.get(s).winner?"success":"danger"}`)),o.append(e,r)});var p=o.sibling(d,2),c=e=>{var s=N(),n=o.sibling(o.child(s)),i=o.child(n,!0);o.reset(n),o.reset(s),o.template_effect(()=>o.set_text(i,o.get(t).moveRnd)),o.append(e,s)};o.if(p,e=>{o.get(t).moveRnd>=0&&e(c)}),o.reset(s),o.template_effect(()=>{o.set_text(i,`Total:
        ${o.get(t).moveSum??""} ≡ `),o.set_text(a,o.get(t).winner),o.set_text(l,` (mod ${o.get(t).teams.length??""})`)}),o.append(e,s)},e=>{var t=w();o.append(e,t)}),o.reset(n),o.append(e,n)},$$slots:{default:!0}});var q=o.sibling(B,2);(0,c.A)(q,{get leaderboard(){return o.get(a)},get localClient(){return o.get(b)},columns:[["Streak",e=>e.streak],["Score",e=>e.wins-e.losses],["Win",e=>[e.wins,e.total]],["Loss",e=>[e.losses,e.total]]]}),o.reset(j);var H=o.sibling(j,2),J=o.child(H);(0,l.A)(J,{get chatState(){return n},onInput:e=>(0,d.Oo)(i,e)}),o.reset(H),o.reset(Y),o.append(e,R),o.pop()})},131:function(e,t,s){s.d(t,{M0:()=>l,iq:()=>i,iw:()=>r,yh:()=>o,yn:()=>a});var n=s(132);let i=64;function r(e){return(e=e.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function a(){let e=new n.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function o(e,t){let s=e.filter(e=>e).sort((e,s)=>{for(let n of t){let t=n(e),i=n(s);if(t<i)return 1;if(t>i)return -1}return e.cn-s.cn}),n=1;return s.forEach((e,i)=>{if(i){let r=s[i-1];t.some(t=>t(e)!==t(r))&&(n=i+1)}s[i].rank=n}),s.sort((e,t)=>t.active-e.active)}function l(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}},2:function(e,t,s){s.r(t),s.d(t,{CLASS:()=>x.tp,FILENAME:()=>i.Uh,HMR:()=>i.OM,NAMESPACE_SVG:()=>i.pQ,STYLE:()=>x.Y,aborted:()=>ee.QH,action:()=>T.X,active_effect:()=>eo.Fg,add_legacy_event_listener:()=>F.oe,add_locations:()=>l.D,add_svelte_meta:()=>r.G7,animation:()=>D.l,append:()=>Q.BC,append_styles:()=>N.k,apply:()=>C.Bb,assign:()=>a.kp,assign_and:()=>a._R,assign_nullish:()=>a.Sc,assign_or:()=>a.im,async:()=>m.b,async_body:()=>Z.cZ,async_derived:()=>X.zx,attach:()=>w.K,attachment:()=>n.r,attr:()=>eg.CF,attribute_effect:()=>x.p_,autofocus:()=>S.wC,await:()=>v.x,bind_active_element:()=>$.m,bind_buffered:()=>U.w$,bind_checked:()=>G.mS,bind_content_editable:()=>j.b1,bind_current_time:()=>U.M$,bind_element_size:()=>W.B,bind_ended:()=>U.$T,bind_files:()=>G.md,bind_focused:()=>j.oP,bind_group:()=>G.CJ,bind_muted:()=>U.iX,bind_online:()=>V.s,bind_paused:()=>U.lY,bind_playback_rate:()=>U.hc,bind_played:()=>U.YL,bind_prop:()=>L.E,bind_property:()=>j.IY,bind_ready_state:()=>U.mM,bind_resize_observer:()=>W.y,bind_seekable:()=>U.xx,bind_seeking:()=>U.Je,bind_select_value:()=>z.$t,bind_this:()=>Y.L,bind_value:()=>G.oJ,bind_volume:()=>U.Jo,bind_window_scroll:()=>B.f,bind_window_size:()=>B.r,boundary:()=>ei.pP,bubble_event:()=>F.Ib,check_target:()=>c.X,child:()=>e_.jf,cleanup_styles:()=>o.O,clsx:()=>eg.$z,comment:()=>Q.Im,component:()=>M.s,create_custom_element:()=>ec.Q,create_ownership_validator:()=>p.a,css_props:()=>b.d,deep_read:()=>eo.o1,deep_read_state:()=>eo.iT,delegate:()=>C.Mm,derived:()=>X.eO,derived_safe_equal:()=>X.Xd,document:()=>e_.gk,each:()=>y.__,effect:()=>ee.QZ,effect_root:()=>ee.Fc,effect_tracking:()=>ee.oJ,element:()=>A.N,equals:()=>eh.aI,event:()=>C.f0,exclude_from_object:()=>eo.SE,fallback:()=>eu.Np,first_child:()=>e_.es,flush:()=>K.qX,for_await_track_reactivity_loss:()=>Z.IP,from_html:()=>Q.vU,from_mathml:()=>Q.$N,from_svg:()=>Q._i,from_tree:()=>Q.el,get:()=>eo.Jt,head:()=>k.d,hmr:()=>d.c,html:()=>E.q,hydrate_template:()=>q.PK,if:()=>h.A,index:()=>y.Pe,init:()=>J.T,init_select:()=>z.wf,inspect:()=>g.N,invalid_default_snippet:()=>ev.y8,invalidate_inner_signals:()=>er.p,invalidate_store:()=>en.qB,invoke_error_boundary:()=>eb.n,key:()=>f.E,legacy_api:()=>c.j,legacy_pre_effect:()=>ee.M3,legacy_pre_effect_reset:()=>ee.iq,legacy_rest_props:()=>es.gj,log_if_contains_state:()=>ef.f,mark_store_binding:()=>en.io,mutable_source:()=>et.zg,mutate:()=>et.Tk,next:()=>q.K2,noop:()=>eu.lQ,once:()=>H.Oo,pending:()=>ei.Ub,pop:()=>r.uY,preventDefault:()=>H.wo,prevent_snippet_stringification:()=>ev.bk,prop:()=>es._w,props_id:()=>Q.zA,proxy:()=>ep.B,push:()=>r.VC,raf:()=>ed.e,reactive_import:()=>F.Iu,remove_input_defaults:()=>x.R0,remove_textarea_child:()=>S.VU,render_effect:()=>ee.VB,replay_events:()=>C.ES,reset:()=>q.cL,rest_props:()=>es.iR,safe_get:()=>eo.$i,sanitize_slots:()=>R.i,save:()=>Z.UN,select_option:()=>z.fs,self:()=>H.bg,set:()=>et.hZ,set_attribute:()=>x.aI,set_checked:()=>x.BY,set_class:()=>O.y,set_custom_element_data:()=>x.p,set_default_checked:()=>x.V$,set_default_value:()=>x.xp,set_selected:()=>x.$Z,set_style:()=>P.h,set_text:()=>ea.j,set_value:()=>x.to,set_xlink_attribute:()=>x.To,setup_stores:()=>en.DZ,sibling:()=>e_.hg,slot:()=>R.N,snapshot:()=>em.P,snippet:()=>I.UA,spread_props:()=>es.Du,state:()=>et.wk,stopImmediatePropagation:()=>H.CA,stopPropagation:()=>H.dG,store_get:()=>en.Hz,store_mutate:()=>en.hY,store_set:()=>en.fT,store_unsub:()=>en.QK,strict_equals:()=>eh.IP,tag:()=>_.Tc,tag_proxy:()=>_._e,template_effect:()=>ee.vN,text:()=>Q.Qq,tick:()=>eo.io,to_array:()=>eu._N,trace:()=>_.uP,track_reactivity_loss:()=>Z.t_,transition:()=>D.k,trusted:()=>H.IZ,untrack:()=>eo.vz,update:()=>et.yo,update_legacy_props:()=>F.hp,update_pre:()=>et.cE,update_pre_prop:()=>es.CB,update_pre_store:()=>en.IL,update_prop:()=>es.k$,update_store:()=>en.yb,user_effect:()=>ee.MW,user_pre_effect:()=>ee.Go,validate_binding:()=>el.R,validate_dynamic_element_tag:()=>ev.Bm,validate_each_keys:()=>el.e,validate_snippet_args:()=>u.j,validate_store:()=>ev.T3,validate_void_dynamic_element:()=>ev.zA,window:()=>e_.Lk,with_script:()=>Q.jB,wrap_snippet:()=>I.DK});var n=s(3),i=s(4),r=s(22),a=s(42),o=s(43),l=s(44),d=s(45),p=s(46),c=s(47),_=s(20),g=s(48),m=s(49),u=s(105),v=s(50),h=s(51),f=s(52),b=s(53),y=s(54),E=s(55),R=s(56),I=s(39),M=s(57),A=s(58),k=s(35),N=s(59),T=s(60),w=s(61),x=s(62),O=s(64),C=s(34),S=s(31),P=s(65),D=s(67),$=s(70),G=s(71),U=s(72),V=s(73),L=s(74),z=s(66),W=s(75),Y=s(76),j=s(77),B=s(78),q=s(13),H=s(79),J=s(80),F=s(81),Q=s(36),Z=s(29),K=s(23),X=s(26),ee=s(8),et=s(17),es=s(82),en=s(83),ei=s(27),er=s(32),ea=s(33),eo=s(6),el=s(86),ed=s(68),ep=s(16),ec=s(87),e_=s(12),eg=s(63),em=s(21),eu=s(7),ev=s(40),eh=s(15),ef=s(89),eb=s(25)}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return i[e](s,s.exports,a),s.exports}a.m=i,a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],a.O=(t,s,n,i)=>{if(s){i=i||0;for(var r=e.length;r>0&&e[r-1][2]>i;r--)e[r]=e[r-1];e[r]=[s,n,i];return}for(var o=1/0,r=0;r<e.length;r++){for(var[s,n,i]=e[r],l=!0,d=0;d<s.length;d++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](s[d]))?s.splice(d--,1):(l=!1,i<o&&(o=i));if(l){e.splice(r--,1);var p=n();void 0!==p&&(t=p)}}return t},a.rv=()=>"1.5.8",t={83:0},a.O.j=e=>0===t[e],s=(e,s)=>{var n,i,[r,o,l]=s,d=0;if(r.some(e=>0!==t[e])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var p=l(a)}for(e&&e(s);d<r.length;d++)i=r[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(p)},(n=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n)),a.ruid="bundler=rspack@1.5.8";var o=a.O(void 0,["11","17","34","36","35","33"],function(){return a(139)});o=a.O(o)})();