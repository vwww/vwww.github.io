(()=>{"use strict";var e,t,r,s,a={161(e,t,r){r(1);var s,a,n,o,i,d,l,c,g=r(2),p=r(127),m=r(128),h=r(129),u=r(130),v=r(131),b=r(132),f=r(158),R=r(133),E=r(134),_=r(137),T=r(144);function y(e,t){return I(e,t?A:O)}function S(e){for(let t=0;t<18;t+=2)if(!(e&3<<t))return!1;return!0}function I(e,t,r=t){return t.some((t,s)=>t===(e&r[s]))}(s=i||(i={}))[s.None=0]="None",s[s.P1=1]="P1",s[s.P2=2]="P2",(a=d||(d={}))[a.None=0]="None",a[a.P1=1]="P1",a[a.P2=2]="P2",a[a.Tie=3]="Tie";let O=[86016,1344,21,66576,16644,4161,65793,4368],A=[172032,2688,42,133152,33288,8322,131586,8736],N=[258048,258048,258048,4032,4032,4032,63,63,63,199728,199728,199728,49932,49932,49932,12483,12483,12483,197379,197379,197379,13104,13104,13104],M=[20480,69632,81920,320,1088,1280,5,17,20,1040,65552,66560,260,16388,16640,65,4097,4160,257,65537,65792,272,4112,4352],x=[40960,139264,163840,640,2176,2560,10,34,40,2080,131104,133120,520,32776,33280,130,8194,8320,514,131074,131584,544,8224,8704];var k=r(140),w=r(159);let C=[["optTurnTime","i",15e3,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optInverted","b",!1,"Inverted","switch winning and losing"],["optChecked","b",!1,"Checked","disallow obviously bad moves"],["optQuick","b",!1,"Quick","capture one small board to win"],["optAnyBoard","b",!1,"Open","move in any board"]];function D(e){let t=[e.optInverted&&"inverted",e.optChecked&&"checked",e.optQuick&&"quick",e.optAnyBoard&&"open"].filter(e=>e);return`${t.length?t.join(" "):"standard"} ${e.optTurnTime}ms`}(n=l||(l={}))[n.WELCOME=0]="WELCOME",n[n.JOIN=1]="JOIN",n[n.LEAVE=2]="LEAVE",n[n.RESET=3]="RESET",n[n.RENAME=4]="RENAME",n[n.PING=5]="PING",n[n.PING_TIME=6]="PING_TIME",n[n.CHAT=7]="CHAT",n[n.ACTIVE=8]="ACTIVE",n[n.ROUND_WAIT=9]="ROUND_WAIT",n[n.ROUND_INTERM=10]="ROUND_INTERM",n[n.ROUND_START=11]="ROUND_START",n[n.READY=12]="READY",n[n.END_ROUND=13]="END_ROUND",n[n.MOVE_CONFIRM=14]="MOVE_CONFIRM",n[n.END_TURN=15]="END_TURN",n[n.OFFER_DRAW=16]="OFFER_DRAW",(o=c||(c={}))[o.RESET=0]="RESET",o[o.RENAME=1]="RENAME",o[o.PONG=2]="PONG",o[o.CHAT=3]="CHAT",o[o.ACTIVE=4]="ACTIVE",o[o.READY=5]="READY",o[o.MOVE=6]="MOVE",o[o.MOVE_END=7]="MOVE_END",o[o.FORFEIT=8]="FORFEIT",o[o.OFFER_DRAW=9]="OFFER_DRAW",o[o.REJECT_DRAW=10]="REJECT_DRAW";let G={board:0,boards:[0,0,0,0,0,0,0,0,0],boardRestrict:[0,0,0,0,0,0,0,0,0],boardFinal:0,boardMustMove:-1};class P extends w.V{#e=g.state(g.proxy((0,R.q)(C)));get mode(){return g.get(this.#e)}set mode(e){g.set(this.#e,e,!0)}#t=g.state(g.proxy([G]));get boardStates(){return g.get(this.#t)}set boardStates(e){g.set(this.#t,e,!0)}#r=g.state(0);get boardIndex(){return g.get(this.#r)}set boardIndex(e){g.set(this.#r,e,!0)}#s=g.state(g.proxy([]));get moveHistory(){return g.get(this.#s)}set moveHistory(e){g.set(this.#s,e,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",c.RESET)}sendRename(e){this.sendf("is",c.RENAME,e)}sendPong(e){this.sendf("i2",c.PONG,e)}sendChat(e,t,r=-1){this.sendf("i3s",c.CHAT,t,r,(0,k.JK)(e))}sendActive(){this.sendf("i",c.ACTIVE)}sendReady(){this.sendf("i",c.READY)}sendMove(e,t){this.sendf("i3",c.MOVE,e,t)}sendMoveEnd(){this.sendf("i",c.MOVE_END)}sendResign(){this.sendf("i",c.FORFEIT)}sendDrawOffer(){this.sendf("i",c.OFFER_DRAW)}sendDrawReject(){this.sendf("i",c.REJECT_DRAW)}historyGo(e){this.boardIndex=(0,T.q)(e,0,this.moveHistory.length)}MESSAGE_HANDLERS={[l.WELCOME]:this.processWelcome,[l.JOIN]:this.processJoin,[l.LEAVE]:this.processLeave,[l.RESET]:this.processReset,[l.RENAME]:this.processRename,[l.PING]:this.processPing,[l.PING_TIME]:this.processPingTime,[l.CHAT]:this.processChat,[l.ACTIVE]:this.processActive,[l.ROUND_WAIT]:this.processRoundWait,[l.ROUND_INTERM]:this.processRoundInterm,[l.ROUND_START]:this.processRoundStart,[l.READY]:this.processReady,[l.END_ROUND]:this.processEndRound,[l.MOVE_CONFIRM]:this.processMoveConfirm,[l.END_TURN]:this.processEndTurn,[l.OFFER_DRAW]:this.processOfferDraw};processWelcomeMode(e){this.mode.optTurnTime=e.getInt();let t=e.get();this.mode.optInverted=!!(1&t),this.mode.optChecked=!!(2&t),this.mode.optQuick=!!(4&t),this.mode.optAnyBoard=!!(8&t)}processMoveConfirm(e){e.getInt(),e.getInt()}processEndTurn(e){let t=e.getInt(),r=e.getInt();this.applyMove(t,r),this.nextTurn(),this.setTimer(this.mode.optTurnTime)}processRoundInfo(e){this.reset();for(let t=0;t<=81;t++){let r=e.getInt();if(r<0){this.ply=t;break}let s=e.getInt();this.applyMove(r,s)}}processRoundStartInfo(e){this.reset()}reset(){this.boardStates=[G],this.boardIndex=0,this.moveHistory=[]}applyMove(e,t){let r=this.boardStates,s=this.moveHistory,a=r[r.length-1],n=1&r.length,o=1^n,{board:i,boardFinal:d}=a,l=a.boards.slice(0),c=1<<(t<<1)+o,g=1<<t,p=1<<(e<<1)+o,m=1<<e;l[e]|=c,y(l[e],!!o)?(i|=p,d|=m):S(l[e])&&(d|=m);let h=this.mode.optAnyBoard||d&g?-1:t,u=(e,t)=>{if(this.mode.optChecked){let r=1<<(t<<1)+n;if(this.mode.optInverted){if(y(l[e]|r,!o)&&(this.mode.optQuick||y(i|1<<(e<<1)+n,!o)))return!0}else{let s=l[t]|(e===t?r:0);if(this.mode.optAnyBoard||!this.mode.optQuick&&(d&1<<t||S(s)||y(s,!o))){for(let t=0;t<9;t++)if(!(d&1<<t)&&I(l[t]|(t===e?r:0),n?M:x,N)&&(this.mode.optQuick||y(i|1<<(t<<1)+o,!n)))return!0}else if(I(s,n?M:x,N)&&(this.mode.optQuick||y(i|1<<(t<<1)+o,!n)))return!0}}return!1};r.push({board:i,boards:l,boardFinal:d,boardMustMove:h,boardRestrict:[0,1,2,3,4,5,6,7,8].map(e=>{if(!(e===h||h<0&&!(d&1<<e)))return 511;let t=0;for(let r=0;r<9;r++)u(e,r)&&(t|=1<<r);return t})}),s.push([e,t]),this.boardStates=r,this.moveHistory=s,this.boardIndex===r.length-2&&this.boardIndex++}}var W=r(135),F=r(142),H=r(160),V=g.from_html("<td></td>"),U=g.from_html("<tr></tr>"),$=g.from_html("<td><table><tbody></tbody></table></td>"),j=g.from_html("<tr></tr>"),L=g.from_html("<table><tbody></tbody></table>");let Q={hash:"svelte-1ah898t",code:".outerGrid.svelte-1ah898t {margin:auto;}.innerGrid.svelte-1ah898t {margin:1vmin;border-collapse:separate;border-spacing:.6vmin;background-color:#a9a9a9;&.p1 {background-color:#008000}&.p2 {background-color:#ffa07a}&.p3 {background-color:#add8e6}}.innerCell.svelte-1ah898t {width:6vmin;height:6vmin;opacity:0.6;&.p0 {background-color:#696969}&.p1 {background-color:#9acd32;opacity:1;}&.p2 {background-color:#ff7f50;opacity:1;}&.p3 {background-color:#98afc7}.outerGrid.m1:where(.svelte-1ah898t) &, .outerGrid.m2:where(.svelte-1ah898t) & {cursor:not-allowed;&.p3 {cursor:pointer}}&.p3:hover {.m1:where(.svelte-1ah898t) & {background-color:#9acd32}.m2:where(.svelte-1ah898t) & {background-color:#ff7f50}}}"};g.delegate(["click"]);var J=g.from_html("<!> <!>",1),q=g.from_html('<span class="badge text-bg-secondary">spectating</span>.',1),Y=g.from_html('<span class="badge text-bg-success">player X</span>.',1),B=g.from_html('<span class="badge text-bg-danger">player O</span>.',1),X=g.from_html('<span class="badge text-bg-success">X wins!</span>'),z=g.from_html('<span class="badge text-bg-danger">O wins!</span>'),K=g.from_html('It\'s a <span class="badge text-bg-warning">draw</span>!',1),Z=g.from_html('<span role="button" tabindex="0"> </span>'),ee=g.from_html('<button class="btn btn-outline-secondary d-block w-100 my-2">End Turn (Auto Random)</button>'),et=g.from_html("<!> <!>",1),er=g.from_html('<div class="mb-2"><!></div> <p>You are <!> <!></p> <!> <div><div class="progress mb-2"><div> <!></div></div> <div class="btn-group d-flex mb-3" role="group"><span class="input-group-text">Navigate</span> <button>&laquo;</button> <button>&lsaquo;</button> <button>&rsaquo;</button> <button>&raquo;</button></div> Moves: <!></div> <!> <div> </div> <b>Lobby</b> <!>',1);g.delegate(["click"]);var es=r(108),ea=g.from_html('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,r(102).A)(function(e,t){let r;g.push(t,!0);let s=new m.Ay,a=new P(s),n=g.derived(()=>a.room),o=g.derived(()=>a.canReset),i=g.derived(()=>a.pastGames),l=g.derived(()=>a.leaderboard),c=g.derived(()=>a.localClient),T=g.derived(()=>a.roundState),y=(0,es.C)("game/mp/_shared/name","");var S=ea(),I=g.first_child(S);(0,v.A)(I,{onchange:()=>a.sendRename(y.value),get value(){return y.value},set value($$value){y.value=$$value}});var O=g.sibling(I,2);g.bind_this((0,E.A)(O,{gameId:"ut3-zpfnljsogeu8x8fopwhylg",roomType:"UT3Room",get gameRoom(){return a.room},onJoinedRoom:e=>a.enterGame(e,y.value),formatGameMode:e=>D((0,R.e)(C,e)),get roomCreateOptions(){return C}}),e=>r=e,()=>r);var A=g.sibling(O,2);{let e=g.derived(()=>g.get(T)===_.mk.INTERMISSION);(0,b.A)(A,{get inGame(){return g.get(n)},get isActive(){return a.localClient.active},get canReady(){return g.get(e)},get isReady(){return a.localClient.ready},onActive:()=>a.sendActive(),onReady:()=>a.sendReady(),onDisconnect:()=>(a.leaveGame(),r.refreshRooms()),children:(e,t)=>{var r,s,n,o,i,l,c,p,m,h,u,v,b,f,R,E,T,y,S,I,O,A,N,M,x,k,w,C,G,P,es;let ea,en,eo,ei,ed,el,ec,eg,ep,em,eh,eu,ev,eb,ef,eR,eE,e_;r={get gameState(){return a}},g.push(r,!0),ed=g.derived(()=>r.gameState.localClient),el=g.derived(()=>r.gameState.roundState),ec=g.derived(()=>r.gameState.playing),eg=g.derived(()=>r.gameState.canMove),ep=g.derived(()=>r.gameState.myPlayer),em=g.derived(()=>r.gameState.drawOffer),eh=g.derived(()=>r.gameState.boardStates),eu=g.derived(()=>r.gameState.boardIndex),ev=g.derived(()=>r.gameState.winner),eb=g.derived(()=>r.gameState.moveHistory),ef=g.derived(()=>g.get(eh)[g.get(eu)]),eR=g.derived(()=>g.get(eb).length),eE=g.derived(()=>g.get(eu)>=g.get(eR)),s=er(),n=g.first_child(s),o=g.child(n),i=e=>{var t=g.text("Waiting for players…");g.append(e,t)},l=e=>{var t=J(),s=g.first_child(t),a=e=>{var t=g.text("Intermission:");g.append(e,t)},n=e=>{var t=g.comment(),r=g.first_child(t),s=e=>{var t=g.text("Make a move:");g.append(e,t)},a=e=>{var t=g.comment(),r=g.first_child(t),s=e=>{var t=g.text("Waiting for opponent to move…");g.append(e,t)},a=e=>{var t=g.text("Spectating:");g.append(e,t)};g.if(r,e=>{g.get(ed).inRound?e(s):e(a,!1)},!0),g.append(e,t)};g.if(r,e=>{g.get(eg)?e(s):e(a,!1)},!0),g.append(e,t)};g.if(s,e=>{g.get(el)===_.mk.INTERMISSION?e(a):e(n,!1)});var o=g.sibling(s,2);(0,W.A)(o,{get startTime(){return r.gameState.roundTimerStart},get endTime(){return r.gameState.roundTimerEnd},get active(){return r.gameState.room}}),g.append(e,t)},g.if(o,e=>{g.get(el)===_.mk.WAITING?e(i):e(l,!1)}),g.reset(n),c=g.sibling(n,2),p=g.sibling(g.child(c)),m=e=>{var t=q();g.next(),g.append(e,t)},h=e=>{var t=g.comment(),r=g.first_child(t),s=e=>{var t=Y();g.next(),g.append(e,t)},a=e=>{var t=B();g.next(),g.append(e,t)};g.if(r,e=>{1===g.get(ep)?e(s):e(a,!1)},!0),g.append(e,t)},g.if(p,e=>{g.get(el)===_.mk.WAITING?e(m):e(h,!1)}),u=g.sibling(p,2),v=e=>{var t=X();g.append(e,t)},b=e=>{var t=g.comment(),r=g.first_child(t),s=e=>{var t=z();g.append(e,t)},a=e=>{var t=g.comment(),r=g.first_child(t),s=e=>{var t=K();g.next(2),g.append(e,t)};g.if(r,e=>{g.get(ev)===d.Tie&&e(s)},!0),g.append(e,t)};g.if(r,e=>{g.get(ev)===d.P2?e(s):e(a,!1)},!0),g.append(e,t)},g.if(u,e=>{g.get(ev)===d.P1?e(v):e(b,!1)}),g.reset(c),f=g.sibling(c,2),e_=g.derived(()=>g.get(eg)&&g.get(eE)?g.get(ep):0),function(e,t){g.push(t,!0),g.append_styles(e,Q);let r=[[0,1,2],[3,4,5],[6,7,8]];function s(e,t,r){return e>>(t<<1)&3||3*!!r}var a=L(),n=g.child(a);g.each(n,21,()=>r,g.index,(e,a)=>{var n=j();g.each(n,21,()=>g.get(a),g.index,(e,a)=>{var n=$(),o=g.child(n),i=g.child(o);g.each(i,21,()=>r,g.index,(e,r,n,o)=>{var i=U();g.each(i,21,()=>g.get(r),g.index,(e,r)=>{var n=V();n.__click=()=>t.onMove(g.get(a),g.get(r)),g.template_effect(e=>g.set_class(n,1,`innerCell p${e??""}`,"svelte-1ah898t"),[()=>s(t.boardState.boards[g.get(a)],g.get(r),!(t.boardState.boardRestrict[g.get(a)]>>g.get(r)&1))]),g.append(e,n)}),g.reset(i),g.append(e,i)}),g.reset(i),g.reset(o),g.reset(n),g.template_effect(e=>g.set_class(o,1,`innerGrid p${e??""}`,"svelte-1ah898t"),[()=>s(t.boardState.board,g.get(a),t.boardState.boardMustMove<0||t.boardState.boardMustMove===g.get(a))]),g.append(e,n)}),g.reset(n),g.append(e,n)}),g.reset(n),g.reset(a),g.template_effect(()=>g.set_class(a,1,`outerGrid m${t.markHover??""}`,"svelte-1ah898t")),g.append(e,a),g.pop()}(f,{get boardState(){return g.get(ef)},get markHover(){return g.get(e_)},onMove:(e,t)=>g.get(eE)&&r.gameState.sendMove(e,t)}),R=g.sibling(f,2),E=g.child(R),T=g.child(E),y=g.child(T),S=g.sibling(y),I=e=>{var t=g.text();g.template_effect(()=>g.set_text(t,`/${g.get(eR)??""}`)),g.append(e,t)},g.if(S,e=>{g.get(eE)||e(I)}),g.reset(T),g.reset(E),O=g.sibling(E,2),(A=g.sibling(g.child(O),2)).__click=()=>r.gameState.historyGo(0),(N=g.sibling(A,2)).__click=()=>r.gameState.historyGo(g.get(eu)-1),(M=g.sibling(N,2)).__click=()=>r.gameState.historyGo(g.get(eu)+1),(x=g.sibling(M,2)).__click=()=>r.gameState.historyGo(g.get(eR)),g.reset(O),k=g.sibling(O,2),g.each(k,17,()=>g.get(eb),g.index,(e,t,s)=>{var a=Z();a.__click=()=>r.gameState.historyGo(s+1);var n=g.child(a,!0);g.reset(a),g.template_effect(e=>{g.set_class(a,1,`badge text-bg${g.get(ep)==(1&s)+1?"":"-outline"}-${g.get(eu)<=s?"warning":1&s?"danger":"success"} me-1`),g.set_text(n,e)},[()=>g.get(t).join("")]),g.append(e,a)},e=>{g.next();var t=g.text("(none)");g.append(e,t)}),g.reset(R),w=g.sibling(R,2),C=e=>{var t=et(),s=g.first_child(t),a=e=>{var t=ee();t.__click=()=>r.gameState.sendMoveEnd(),g.append(e,t)};g.if(s,e=>{g.get(eg)&&e(a)});var n=g.sibling(s,2);(0,H.A)(n,{get drawOffer(){return g.get(em)},onResign:()=>r.gameState.sendResign(),onDrawOffer:()=>r.gameState.sendDrawOffer(),onDrawReject:()=>r.gameState.sendDrawReject()}),g.append(e,t)},g.if(w,e=>{g.get(ec)&&e(C)}),G=g.sibling(w,2),P=g.child(G),g.reset(G),es=g.sibling(G,4),(0,F.A)(es,{get localClient(){return r.gameState.localClient},get inGame(){return r.gameState.roundPlayers},get inQueue(){return r.gameState.roundPlayerQueue},get spectators(){return r.gameState.spectators}}),g.template_effect(e=>{g.set_class(T,1,`progress-bar progress-bar-striped ${g.get(eg)?!g.get(eE)?"text-bg-warning":"text-bg-success":""}`),g.set_style(T,`width:${(g.get(eu)+1)/(g.get(eR)+1)*100}%`),g.set_text(y,`Ply ${g.get(eu)??""}`),ea=g.set_class(A,1,"w-100 btn btn-secondary",null,ea,{disabled:!g.get(eu)}),en=g.set_class(N,1,"w-100 btn btn-secondary",null,en,{disabled:!g.get(eu)}),eo=g.set_class(M,1,"w-100 btn btn-secondary",null,eo,{disabled:g.get(eE)}),ei=g.set_class(x,1,"w-100 btn btn-secondary",null,ei,{disabled:g.get(eE)}),g.set_text(P,`Game Mode: ${e??""}`)},[()=>D(r.gameState.mode)]),g.append(e,s),g.pop()},$$slots:{default:!0}})}var N=g.sibling(A,2),M=g.child(N),x=g.child(M);(0,h.A)(x,{get canClear(){return g.get(i).length},onClear:()=>a.clearHistory(),children:(e,t)=>{(0,f.A)(e,{get results(){return g.get(i)}})},$$slots:{default:!0}});var k=g.sibling(x,2);(0,u.A)(k,{get leaderboard(){return g.get(l)},get localClient(){return g.get(c)},get inGame(){return g.get(n)},get canReset(){return g.get(o)},onReset:()=>a.sendReset(),columns:[["Streak",e=>e.streak],["Score",e=>e.score],["Win",e=>[e.wins,e.total]],["Loss",e=>[e.loss,e.total]],["Ties",e=>[e.ties,e.total]]]}),g.reset(M);var w=g.sibling(M,2),G=g.child(w);(0,p.A)(G,{get chatState(){return s},get canSend(){return a.room},onInput:e=>(0,m.Oo)(a,e)}),g.reset(w),g.reset(N),g.append(e,S),g.pop()})}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return a[e](r,r.exports,o),r.exports}o.m=a,o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],o.O=(t,r,s,a)=>{if(r){a=a||0;for(var n=e.length;n>0&&e[n-1][2]>a;n--)e[n]=e[n-1];e[n]=[r,s,a];return}for(var i=1/0,n=0;n<e.length;n++){for(var[r,s,a]=e[n],d=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every(e=>o.O[e](r[l]))?r.splice(l--,1):(d=!1,a<i&&(i=a));if(d){e.splice(n--,1);var c=s();void 0!==c&&(t=c)}}return t},o.rv=()=>"1.7.3",t={104:0},o.O.j=e=>0===t[e],r=(e,r)=>{var s,a,[n,i,d]=r,l=0;if(n.some(e=>0!==t[e])){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(d)var c=d(o)}for(e&&e(r);l<n.length;l++)a=n[l],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},(s=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s)),o.ruid="bundler=rspack@1.7.3";var i=o.O(void 0,["14","21","37","38","36","50"],()=>o(161));i=o.O(i)})();