(()=>{"use strict";var e,t,s,i,r={140:function(e,t,s){s(1);var i,r,n,a,o,d,l,c,h,p,g,u,v,m,_,f,k=s(2),b=s(120),I=s(121),y=s(122),N=s(123),x=s(124),E=s(125),M=s(126),R=s(127),T=s(130),A=s(131),C=s(133);class P extends T.wG{}class S{#e=k.state(-1);get owner(){return k.get(this.#e)}set owner(e){k.set(this.#e,e,!0)}}class w{isMe;ownerName=""}class O extends T.Nd{#t=k.state(k.proxy([]));get playerInfo(){return k.get(this.#t)}set playerInfo(e){k.set(this.#t,e,!0)}#s=k.state(0);get turnIndex(){return k.get(this.#s)}set turnIndex(e){k.set(this.#s,e,!0)}#i=k.state(k.proxy([]));get playerDiscInfo(){return k.get(this.#i)}set playerDiscInfo(e){k.set(this.#i,e,!0)}discIndex=0;#r=k.derived(()=>this.playing&&this.playerIsMe(this.playerInfo[this.turnIndex]));get canMove(){return k.get(this.#r)}set canMove(e){k.set(this.#r,e)}formatPlayerName(e,t){return e?(0,A.M0)(this.clients[e.owner],e.owner):`<unknown${void 0===t?"":" pn#"+t}>`}playerIsMe(e){return e?.owner===this.localClient.cn}processWelcomeGame(e){super.processWelcomeGame(e),this.processPlayerInfos(e),this.processDiscInfos(e),this.processRoundInfo(e)}processPlayerInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let i=new this.PlayerInfoType;i.owner=s,this.processPlayerInfo(e,i),t.push(i)}if((this.playerInfo=t).length){if(this.turnIndex=e.getInt(),this.turnIndex<0||this.turnIndex>=t.length)throw Error("bad turnIndex")}else this.turnIndex=0}processDiscInfos(e){let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getString(20);if(!s)break;let i=e.getCN(),r=new this.PlayerDiscType;r.ownerName=`${s} (${i})`,this.processDiscInfo(e,r),t.push(r)}if(this.playerDiscInfo=t,this.discIndex=e.getInt(),this.discIndex<0||this.discIndex>this.playerDiscInfo.length)throw Error("bad discIndex")}processRoundStart(e){super.processRoundStart(e);let t=[];for(let s=0;s<=this.clients.length;s++){let s=e.getCN();if(s<0)break;let i=new this.PlayerInfoType;i.owner=s,t.push(i)}this.playerInfo=t,this.playerDiscInfo=[],this.turnIndex=0,this.discIndex=0,this.processRoundStartInfo(e)}processEliminateBase(e,t){let s=e.getInt(),i=this.playerInfo[s];if(!i)throw Error("invalid eliminate pn "+s);let r=new this.PlayerDiscType,n=this.clients[i.owner];if(!n)throw Error(`invalid owner ${i.owner} of pn ${s}`);r.ownerName=(0,A.M0)(n,i.owner),r.isMe=n===this.localClient;let a=this.eliminatePlayer(e,r,s,i,n,t);this.playerInfo.splice(s,1),this.playerDiscInfo.splice(this.discIndex,0,r),a&&this.discIndex++}processEliminate(e){this.processEliminateBase(e,!1)}processEliminateEarly(e){this.processEliminateBase(e,!0)}nextTurn(){++this.turnIndex==this.playerInfo.length&&(this.turnIndex=0)}}let D=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optDecks","I",1,"Decks","number of decks",1,0x8000000000000],["optJokers","i",2,"Jokers","number of jokers per deck",0,2],["optKeepJokers","b",!1,"Keep Jokers","Scum and HS keep jokers during card transfer"],["optMustGiveLowest","b",!1,"Must give lowest","President and VP must give lowest cards during card transfer"],["optRev","e",0,"Revolutions","combo of 4 or more cards (and selected condition) reverses rankings",["off","on, strict (no jokers)","on, relaxed (any 4 are non-joker)","on, jokers (any)"]],["optRevEndTrick","b",!1,"Revolution ends trick","a revolution ends the current trick and starts a new one"],["opt1Fewer2","b",!0,"One fewer 2",""],["optPass","e",1,"Pass","",["pass turn","pass trick","single turn"]],["optEqualize","e",1,"Equalize","",["disallow","allow","equalize or skip","equalize or pass","force skip (next player skips)"]],["optEqualizeEndTrickByScum","b",!1,"Equalize end trick by Scum","trick ends if Scum equalizes"],["optEqualizeEndTrickByOthers","b",!1,"Equalize end trick by non-Scum","trick ends if others equalize"],["optEqualizeOnlyScum","b",!1,"Equalize only by Scum","only Scum can equalize"],["opt4inARow","b",!1,"4-in-a-row","4 or more cards of the same rank (including equalizing) ends trick"],["opt8","b",!1,"8-rule","rank 8 ends trick"],["optPenalizeFinal2","b",!1,"Penalize final 2","playing 2 as last card incurs rank penalty"],["optPenalizeFinalJoker","b",!1,"Penalize final joker","playing joker as last card incurs rank penalty"],["optFirstTrick","e",0,"First Trick","who starts?",["Scum","President","Random"]]];function U(e){return e.optTurnTime+"/"+e.optDecks+"/"+e.optJokers+(e.optKeepJokers?"J":"j")+(e.optMustGiveLowest?"G":"g")+e.optRev+(e.optRevEndTrick?"R":"r")+(e.opt1Fewer2?"T":"t")+e.optPass+e.optEqualize+(e.optEqualizeEndTrickByScum?"E":"e")+(e.optEqualizeEndTrickByOthers?"E":"e")+(e.optEqualizeOnlyScum?"E":"e")+(e.opt4inARow?"F":"f")+(e.opt8?"B":"b")+(e.optPenalizeFinal2?"P":"p")+(e.optPenalizeFinalJoker?"P":"p")+e.optFirstTrick}(i=h||(h={}))[i.WELCOME=0]="WELCOME",i[i.JOIN=1]="JOIN",i[i.LEAVE=2]="LEAVE",i[i.RESET=3]="RESET",i[i.RENAME=4]="RENAME",i[i.PING=5]="PING",i[i.PING_TIME=6]="PING_TIME",i[i.CHAT=7]="CHAT",i[i.ACTIVE=8]="ACTIVE",i[i.ROUND_WAIT=9]="ROUND_WAIT",i[i.ROUND_INTERM=10]="ROUND_INTERM",i[i.ROUND_START=11]="ROUND_START",i[i.READY=12]="READY",i[i.END_ROUND=13]="END_ROUND",i[i.MOVE_CONFIRM=14]="MOVE_CONFIRM",i[i.END_TURN=15]="END_TURN",i[i.END_TURN_TRANSFER=16]="END_TURN_TRANSFER",i[i.END_TURN_TRANSFER_DISCARD=17]="END_TURN_TRANSFER_DISCARD",i[i.PLAYER_ELIMINATE=18]="PLAYER_ELIMINATE",i[i.PLAYER_ELIMINATE_EARLY=19]="PLAYER_ELIMINATE_EARLY",i[i.PLAYER_PRIVATE_INFO_HAND=20]="PLAYER_PRIVATE_INFO_HAND",i[i.PLAYER_PRIVATE_INFO_GIVE=21]="PLAYER_PRIVATE_INFO_GIVE",(r=p||(p={}))[r.RESET=0]="RESET",r[r.RENAME=1]="RENAME",r[r.PONG=2]="PONG",r[r.CHAT=3]="CHAT",r[r.ACTIVE=4]="ACTIVE",r[r.READY=5]="READY",r[r.MOVE_PASS=6]="MOVE_PASS",r[r.MOVE_CONTINUE=7]="MOVE_CONTINUE",r[r.MOVE_START=8]="MOVE_START",r[r.MOVE_TRANSFER=9]="MOVE_TRANSFER",r[r.MOVE_END=10]="MOVE_END";class L extends P{#n=k.state(0);get score(){return k.get(this.#n)}set score(e){k.set(this.#n,e,!0)}#a=k.state(0);get streak(){return k.get(this.#a)}set streak(e){k.set(this.#a,e,!0)}#o=k.state(0);get rankLast(){return k.get(this.#o)}set rankLast(e){k.set(this.#o,e,!0)}#d=k.state(5);get roleLast(){return k.get(this.#d)}set roleLast(e){k.set(this.#d,e,!0)}#l=k.state(k.proxy([0,0,0,0,0]));get roleCount(){return k.get(this.#l)}set roleCount(e){k.set(this.#l,e,!0)}updateScore(e,t){this.rankLast=e,this.score+=t-e+1,2===(this.roleLast=z(e,t))?(this.streak<0&&(this.streak=0),this.streak++):(this.streak>0&&(this.streak=0),this.streak--),this.roleCount[this.roleLast+2]++}resetScore(){this.score=0,this.streak=0,this.rankLast=0,this.rankLast=5,this.roleCount=[0,0,0,0,0]}readWelcome(e){super.readWelcome(e),this.score=e.getInt(),this.streak=e.getInt(),this.rankLast=e.getInt(),this.roleLast=e.getInt();for(let t=0;t<5;t++)this.roleCount[t]=e.getInt()}}class $ extends S{#c=k.state(0);get role(){return k.get(this.#c)}set role(e){k.set(this.#c,e,!0)}#h=k.state(k.proxy(B()));get discarded(){return k.get(this.#h)}set discarded(e){k.set(this.#h,e,!0)}#p=k.state(0n);get handSize(){return k.get(this.#p)}set handSize(e){k.set(this.#p,e,!0)}#g=k.state(!1);get passed(){return k.get(this.#g)}set passed(e){k.set(this.#g,e,!0)}}class F extends w{trickNum=0;trickTurn=0;duration=0n;discarded=B();hand=B();prevRole=0;newRole=0}(n=g||(g={}))[n.OFF=0]="OFF",n[n.ON_STRICT=1]="ON_STRICT",n[n.ON_RELAXED=2]="ON_RELAXED",n[n.ON=3]="ON",n[n.NUM=4]="NUM",(a=u||(u={}))[a.PASS_TURN=0]="PASS_TURN",a[a.PASS_TRICK=1]="PASS_TRICK",a[a.SINGLE_TURN=2]="SINGLE_TURN",a[a.NUM=3]="NUM",(o=v||(v={}))[o.DISALLOW=0]="DISALLOW",o[o.ALLOW=1]="ALLOW",o[o.CONTINUE_OR_SKIP=2]="CONTINUE_OR_SKIP",o[o.CONTINUE_OR_PASS=3]="CONTINUE_OR_PASS",o[o.FORCE_SKIP=4]="FORCE_SKIP",o[o.NUM=5]="NUM",(d=m||(m={}))[d.SCUM=0]="SCUM",d[d.PRESIDENT=1]="PRESIDENT",d[d.RANDOM=2]="RANDOM",d[d.NUM=3]="NUM";let G=1n<<51n;class J extends O{PlayerInfoType=$;PlayerDiscType=F;#u=k.state(k.proxy((0,M.q)(D)));get mode(){return k.get(this.#u)}set mode(e){k.set(this.#u,e,!0)}#v=k.state(k.proxy(_.GIVE_CARDS));get gamePhase(){return k.get(this.#v)}set gamePhase(e){k.set(this.#v,e,!0)}#m=k.state(0);get giveFlags(){return k.get(this.#m)}set giveFlags(e){k.set(this.#m,e,!0)}#_=k.state(0);get givePlayerIndex(){return k.get(this.#_)}set givePlayerIndex(e){k.set(this.#_,e,!0)}#f=k.state(0);get pres(){return k.get(this.#f)}set pres(e){k.set(this.#f,e,!0)}#k=k.state(0);get scum(){return k.get(this.#k)}set scum(e){k.set(this.#k,e,!0)}#b=k.state(0);get vicePres(){return k.get(this.#b)}set vicePres(e){k.set(this.#b,e,!0)}#I=k.state(0);get highScum(){return k.get(this.#I)}set highScum(e){k.set(this.#I,e,!0)}#y=k.state(!1);get giveDown(){return k.get(this.#y)}set giveDown(e){k.set(this.#y,e,!0)}#N=k.state(0);get take0(){return k.get(this.#N)}set take0(e){k.set(this.#N,e,!0)}#x=k.state(0);get take1(){return k.get(this.#x)}set take1(e){k.set(this.#x,e,!0)}#E=k.state(0);get give0(){return k.get(this.#E)}set give0(e){k.set(this.#E,e,!0)}#M=k.state(0);get give1(){return k.get(this.#M)}set give1(e){k.set(this.#M,e,!0)}#R=k.state(!1);get revolution(){return k.get(this.#R)}set revolution(e){k.set(this.#R,e,!0)}#T=k.state(0);get trickNum(){return k.get(this.#T)}set trickNum(e){k.set(this.#T,e,!0)}#A=k.state(0);get trickTurn(){return k.get(this.#A)}set trickTurn(e){k.set(this.#A,e,!0)}#C=k.state(0n);get trickCount(){return k.get(this.#C)}set trickCount(e){k.set(this.#C,e,!0)}#P=k.state(0n);get trickTotal(){return k.get(this.#P)}set trickTotal(e){k.set(this.#P,e,!0)}#S=k.state(0);get trickRank(){return k.get(this.#S)}set trickRank(e){k.set(this.#S,e,!0)}#w=k.state(!1);get trick1Fewer(){return k.get(this.#w)}set trick1Fewer(e){k.set(this.#w,e,!0)}penalty=!1;#O=k.state(0);get passIndex(){return k.get(this.#O)}set passIndex(e){k.set(this.#O,e,!0)}#D=k.state(k.proxy(B()));get cardCountTotal(){return k.get(this.#D)}set cardCountTotal(e){k.set(this.#D,e,!0)}#U=k.state(k.proxy(B()));get cardCountMine(){return k.get(this.#U)}set cardCountMine(e){k.set(this.#U,e,!0)}#L=k.state(k.proxy(B()));get cardCountDiscard(){return k.get(this.#L)}set cardCountDiscard(e){k.set(this.#L,e,!0)}#$=k.derived(()=>this.cardCountTotal.map((e,t)=>e-this.cardCountMine[t]-this.cardCountDiscard[t]));get cardCountOthers(){return k.get(this.#$)}set cardCountOthers(e){k.set(this.#$,e)}#F=k.state(k.proxy([]));get moveHistory(){return k.get(this.#F)}set moveHistory(e){k.set(this.#F,e,!0)}#G=k.state(0);get pendingMoveRank(){return k.get(this.#G)}set pendingMoveRank(e){k.set(this.#G,e,!0)}#J=k.state(0);get pendingMoveBase(){return k.get(this.#J)}set pendingMoveBase(e){k.set(this.#J,e,!0)}#z=k.state(0);get pendingMoveJokers(){return k.get(this.#z)}set pendingMoveJokers(e){k.set(this.#z,e,!0)}#B=k.state(0);get pendingMoveRankAck(){return k.get(this.#B)}set pendingMoveRankAck(e){k.set(this.#B,e,!0)}#V=k.state(0);get pendingMoveBaseAck(){return k.get(this.#V)}set pendingMoveBaseAck(e){k.set(this.#V,e,!0)}#Y=k.state(0);get pendingMoveJokersAck(){return k.get(this.#Y)}set pendingMoveJokersAck(e){k.set(this.#Y,e,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new L}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",p.RESET)}sendRename(e){this.sendf("is",p.RENAME,e)}sendPong(e){this.sendf("i2",p.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",p.CHAT,t,s,(0,C.JK)(e))}sendActive(){this.sendf("i",p.ACTIVE)}sendReady(){this.sendf("i",p.READY)}setPendingRank(e,t,s){if(this.pendingMoveRank=e,this.trickTurn){let e=this.trickCount-(s&&this.mode.opt1Fewer2&&this.trickCount>1?1n:0n);t>e?(this.pendingMoveBase=Number(e),this.pendingMoveJokers=0):(this.pendingMoveBase=Number(t),this.pendingMoveJokers=Number(e-t))}else this.pendingMoveJokers=+!(this.pendingMoveBase=Number(t))}sendMove(){this.pendingMoveRank<0?(this.pendingMoveBase=this.pendingMoveJokers=0,this.sendf("i",p.MOVE_PASS)):this.trickTurn||!this.pendingMoveBase?(this.pendingMoveBase=0,this.sendf("i2U",p.MOVE_CONTINUE,this.pendingMoveRank,BigInt(this.pendingMoveJokers))):this.sendf("i2U2",p.MOVE_START,this.pendingMoveRank,BigInt(this.pendingMoveJokers),BigInt(this.pendingMoveBase))}sendMoveTransfer(e,t){this.sendf("i3",p.MOVE_TRANSFER,e,t)}sendMoveEnd(){this.sendf("i",p.MOVE_END)}MESSAGE_HANDLERS={[h.WELCOME]:this.processWelcome,[h.JOIN]:this.processJoin,[h.LEAVE]:this.processLeave,[h.RESET]:this.processReset,[h.RENAME]:this.processRename,[h.PING]:this.processPing,[h.PING_TIME]:this.processPingTime,[h.CHAT]:this.processChat,[h.ACTIVE]:this.processActive,[h.ROUND_WAIT]:this.processRoundWait,[h.ROUND_INTERM]:this.processRoundInterm,[h.ROUND_START]:this.processRoundStart,[h.READY]:this.processReady,[h.END_ROUND]:this.processEndRound,[h.MOVE_CONFIRM]:this.processMoveConfirm,[h.END_TURN]:this.processEndTurn,[h.END_TURN_TRANSFER]:this.processEndTurnTransfer,[h.END_TURN_TRANSFER_DISCARD]:this.processEndTurnTransferDiscard,[h.PLAYER_ELIMINATE]:this.processEliminate,[h.PLAYER_ELIMINATE_EARLY]:this.processEliminateEarly,[h.PLAYER_PRIVATE_INFO_HAND]:this.processPrivateInfoHand,[h.PLAYER_PRIVATE_INFO_GIVE]:this.processPrivateInfoGive};processWelcomeMode(e){var t;this.mode.optTurnTime=e.getInt(),this.mode.optDecks=(t=e.getUint64(),1n>t?1n:t<G?t:G);let s=e.get(),i=e.get(),r=e.get();this.mode.optJokers=Math.min(3&s,2),this.mode.optRev=s>>2&3,this.mode.optPass=Math.min(s>>4&3,u.NUM-1),this.mode.optFirstTrick=Math.min(s>>6&3,m.NUM-1),this.mode.optEqualize=Math.min(7&i,v.NUM-1),this.mode.optKeepJokers=!!(8&i),this.mode.optMustGiveLowest=!!(16&i),this.mode.optRevEndTrick=!!(32&i),this.mode.opt1Fewer2=!!(64&i),this.mode.optEqualizeEndTrickByScum=!!(128&i),this.mode.optEqualizeEndTrickByOthers=!!(1&r),this.mode.optEqualizeOnlyScum=!!(2&r),this.mode.opt4inARow=!!(4&r),this.mode.opt8=!!(8&r),this.mode.optPenalizeFinal2=!!(16&r),this.mode.optPenalizeFinalJoker=!!(32&r)}processPlayerInfo(e,t){t.role=0,t.discarded=Y(e);let s=e.getUint64();t.handSize=s>>1n,t.passed=!!(1n&s)}processDiscInfo(e,t){t.trickNum=e.getInt(),t.trickTurn=e.getInt(),t.duration=e.getUint64(),t.discarded=Y(e),t.hand=Y(e),t.prevRole=e.getInt(),t.newRole=e.getInt()}processRoundStartInfo(e){let t=BigInt(52+this.mode.optJokers)*this.mode.optDecks,s=BigInt(this.roundPlayers.length),i=t/s,r=t%s;if(this.playerInfo.forEach((e,t)=>{e.role=0,e.discarded=B(),e.handSize=i,t<r&&e.handSize++,e.passed=!1}),this.moveHistory=[],this.giveFlags=0,this.giveDown=!1,this.givePlayerIndex=-1,this.give0=this.give1=-1,(this.scum=e.getCN())>=0){this.pres=0;let e=this.playerInfo[this.pres],t=this.playerInfo[this.scum];e.role=2,t.role=-2,this.giveFlags=2,e.owner===this.localClient.cn?this.givePlayerIndex=this.scum:t.owner===this.localClient.cn&&(this.givePlayerIndex=this.pres),this.addGivePublic(t,e,2)}else this.pres=-1;if((this.highScum=e.getCN())>=0){this.vicePres=e.getCN();let t=this.playerInfo[this.vicePres],s=this.playerInfo[this.highScum];t.role=1,s.role=-1,this.giveFlags|=1,t.owner===this.localClient.cn?this.givePlayerIndex=this.highScum:s.owner===this.localClient.cn&&(this.givePlayerIndex=this.vicePres),this.addGivePublic(s,t,1)}else this.vicePres=-1;this.revolution=!1,this.trickNum=this.trickTurn=0,this.trickCount=this.trickTotal=0n,this.cardCountDiscard=B(),this.cardCountTotal=V(this.mode.optDecks,this.mode.optJokers),this.turnIndex=e.getInt(),this.passIndex=-1,this.giveFlags?this.gamePhase=_.GIVE_CARDS:this.gamePhase=_.PLAYING_MUST_3,this.resetMove()}processRoundInfo(e){let t;if(this.moveHistory=[],this.cardCountMine=B(),this.cardCountDiscard=B(),this.cardCountTotal=V(this.mode.optDecks,this.mode.optJokers),this.roundState!==T.mk.ACTIVE)return;let s=e.get();if(this.gamePhase=3&s,this.gamePhase===_.GIVE_CARDS?(this.giveFlags=s>>2&3,this.revolution=!1):this.revolution=!!(4&s),(t=this.playerInfo[this.pres=16&s?e.getCN():-1])&&(t.role=2),(t=this.playerInfo[this.scum=32&s?e.getCN():-1])&&(t.role=-2),(t=this.playerInfo[this.vicePres=64&s?e.getCN():-1])&&(t.role=1),(t=this.playerInfo[this.highScum=128&s?e.getCN():-1])&&(t.role=-1),this.trickNum=e.getInt(),this.trickTurn=e.getInt()){this.trickRank=e.getInt();let t=e.getUint64();this.trickCount=t>>1n,this.trickTotal=e.getUint64(),this.trick1Fewer=!!(1n&t)}else this.trickCount=this.trickTotal=0n;this.playerInfo.forEach(e=>{for(let t=0;t<=f.NUM;t++)this.cardCountDiscard[t]+=e.discarded[t]}),this.playerDiscInfo.forEach(e=>{for(let t=0;t<=f.NUM;t++)this.cardCountDiscard[t]+=e.discarded[t]+e.hand[t]}),this.passIndex=e.getInt()}processMoveConfirm(e){this.pendingMoveRankAck=e.getInt(),this.pendingMoveJokersAck=Number(e.getUint64()),this.pendingMoveBaseAck=Number(e.getUint64())}processEndTurn(e){let t=this.playerInfo[this.turnIndex],s=this.clients[t.owner],i=(0,A.M0)(s,t.owner),r=s===this.localClient,n=e.getInt();if(n<0)this.moveHistory.push({type:"pass",playerName:i,playerIsMe:r}),this.gamePhase===_.PLAYING_MUST_EQUALIZE&&this.mode.optEqualize===v.CONTINUE_OR_SKIP?this.turnIndex=this.nextUnpassed(this.turnIndex):this.nextTurnAfterPass(t)&&this.nextTrick(),this.gamePhase=_.PLAYING;else{let s=e.getUint64(),a=this.trickTurn?BigInt(this.trickCount):e.getUint64()+s;if(this.mode.opt1Fewer2){let e=this.revolution?f.N3:f.N2;(this.trick1Fewer=!!this.trickTurn&&a>1&&n===e)?a--:n===f.Joker&&(n=e)}let o=a-s,d=this.mode.opt8&&n===f.N8,l=!1;a>=4&&this.mode.optRev&&(this.mode.optRev===g.ON_STRICT?!s:this.mode.optRev===g.ON_RELAXED?o>=4:this.mode.optRev===g.ON)&&(this.revolution=!this.revolution,this.mode.optRevEndTrick&&(d=!0)),this.trickTurn&&this.trickRank===n?this.trickTotal+=a:this.trickTotal=a,this.mode.opt4inARow&&this.trickTotal>=4&&(d=!0),this.gamePhase=_.PLAYING,this.trickTurn&&this.trickRank===n&&((-2===t.role?this.mode.optEqualizeEndTrickByScum:this.mode.optEqualizeEndTrickByOthers)&&(d=!0),!d&&this.mode.optEqualize>=v.CONTINUE_OR_SKIP&&(this.mode.optEqualize===v.FORCE_SKIP?l=!0:this.gamePhase=_.PLAYING_MUST_EQUALIZE));let c=d,h=this.revolution?f.N3:f.N2,p=this.nextUnpassed(this.turnIndex);(p===this.turnIndex||n===h&&(!this.mode.optEqualize||this.mode.optEqualizeOnlyScum&&this.scum!==p))&&(d=!0),t.discarded[n]+=o,t.discarded[f.Joker]+=s,t.discarded[f.NUM]+=a,(t.handSize-=a)||(this.penalty=!!(n===f.N2&&this.mode.optPenalizeFinal2&&o||s&&this.mode.optPenalizeFinalJoker)),this.cardCountDiscard[n]+=o,this.cardCountDiscard[f.Joker]+=s,this.cardCountDiscard[f.NUM]+=a,r&&(this.cardCountMine[n]-=o,this.cardCountMine[f.Joker]-=s,this.cardCountMine[f.NUM]-=a),this.passIndex=-1,!d&&(this.mode.optPass===u.SINGLE_TURN&&this.trickTurn?d=this.nextTurnAfterPass(t):(this.mode.optPass===u.PASS_TURN&&this.unsetPassed(),this.turnIndex=p,l&&(this.turnIndex=this.nextUnpassed(this.turnIndex)))),d?this.nextTrick(c):(this.trickRank=n,this.trickTurn++||(this.trickCount=a)),this.moveHistory.push({type:"move",playerName:i,playerIsMe:r,rank:n,base:Number(o),jokers:Number(s)})}this.resetMove(),this.setTimer(this.mode.optTurnTime)}nextTrick(e=!1){this.moveHistory.push({type:"tEnd",trick:this.trickNum,turn:this.trickTurn,move:e}),this.unsetPassed(),this.trickNum++,this.trickTurn=0}nextTurnAfterPass(e){let t=this.nextUnpassed(this.turnIndex);return t===this.turnIndex||this.passIndex<0&&this.nextUnpassed(t)===this.turnIndex?(this.turnIndex=this.passIndex<0?t:this.passIndex,this.passIndex=-1,!0):(this.turnIndex=t,e.passed=!0,!1)}nextUnpassed(e){let t=e;do++t===this.playerInfo.length&&(t=0);while(t!==e&&this.playerInfo[t].passed);return t}unsetPassed(){this.playerInfo.forEach(e=>e.passed=!1)}resetMove(){this.pendingMoveRank=this.pendingMoveRankAck=-1,this.pendingMoveBase=this.pendingMoveBaseAck=this.pendingMoveJokers=this.pendingMoveJokersAck=0}processEndRound(e){let t=e.getUint64(),s={duration:t,trickNum:this.trickNum,trickTurn:this.trickTurn,players:this.playerDiscInfo.map(e=>({...e,name:e.ownerName}))},[i]=this.playerInfo,r=this.clients[i.owner],n=this.discIndex+1,a=1+this.playerDiscInfo.length;r.updateScore(n,a),s.players.splice(this.discIndex,0,{name:r.formatName(),isMe:r===this.localClient,trickNum:this.trickNum,trickTurn:this.trickTurn,duration:t,prevRole:i.role,newRole:z(n,a)}),this.addHistory(s)}eliminatePlayer(e,t,s,i,r,n){if(t.trickNum=this.trickNum,t.trickTurn=this.trickTurn,t.duration=e.getUint64(),t.discarded=i.discarded,t.hand=Y(e),r!==this.localClient)for(let e=0;e<=f.NUM;e++)this.cardCountDiscard[e]+=t.hand[e];t.prevRole=i.role,n&&(this.gamePhase===_.GIVE_CARDS?(this.pres===s?this.giveFlags&=-3:this.vicePres===s&&(this.giveFlags&=-2),this.checkGivePhaseEnd()):(s===this.turnIndex&&(this.gamePhase===_.PLAYING_MUST_EQUALIZE&&this.mode.optEqualize===v.CONTINUE_OR_SKIP?this.turnIndex=this.nextUnpassed(this.turnIndex):this.nextTurnAfterPass(i)&&this.nextTrick(),this.gamePhase=_.PLAYING),this.setTimer(this.mode.optTurnTime))),this.moveHistory.push({type:"leave",playerName:r.formatName(),playerIsMe:r===this.localClient,cards:t.hand});let a=this.playerInfo.length+this.playerDiscInfo.length,o=this.discIndex+(n||this.penalty?this.playerInfo.length:1);r.updateScore(o,a),t.newRole=z(o,a);let d=this.playerInfo.length-1;return this.turnIndex>s?this.turnIndex--:this.turnIndex===d&&(this.turnIndex=0),n?this.passIndex>s?this.passIndex--:this.passIndex===d&&(this.passIndex=0):this.passIndex=this.turnIndex,this.fixGiveIndex("givePlayerIndex",s),this.fixGiveIndex("pres",s),this.fixGiveIndex("scum",s),this.fixGiveIndex("vicePres",s),this.fixGiveIndex("highScum",s),!n}fixGiveIndex(e,t){this[e]>t?this[e]--:this[e]===t&&(this[e]=-1)}processPrivateInfoHand(e){this.cardCountMine=Y(e)}processEndTurnTransfer(e){let t=e.getCN(),s=this.playerInfo[t],i=2===s.role?this.scum:this.highScum,r=this.playerInfo[i];this.giveFlags&=~s.role,this.addGivePublic(s,r,s.role),this.checkGivePhaseEnd()}addGivePublic(e,t,s){let i=this.clients[e.owner],r=this.clients[t.owner];e.handSize-=BigInt(s),t.handSize+=BigInt(s),this.moveHistory.push({type:"give_public",playerName:i.formatName(),playerIsMe:i===this.localClient,targetName:r.formatName(),targetIsMe:r===this.localClient,cardCount:s})}processEndTurnTransferDiscard(e){let t,s=e.getCN(),i=this.playerInfo[s],r=this.clients[i.owner],n=r.formatName(),a=r===this.localClient,o=e.getInt();this.updateDiscardCount(i,o),2===i.role&&this.updateDiscardCount(i,t=e.getInt()),this.giveFlags&=~i.role,this.moveHistory.push({type:"discard",playerName:n,playerIsMe:a,card0:o,card1:t}),this.checkGivePhaseEnd()}checkGivePhaseEnd(){this.giveFlags||(this.gamePhase=_.PLAYING,this.setTimer(this.mode.optTurnTime))}processPrivateInfoGive(e){let t,s=this.playerInfo[this.givePlayerIndex],i=this.clients[s.owner].formatName(),r=s.role>0===this.giveDown,n=r?1n:-1n,a=e.getInt();this.cardCountMine[this.take0=a]+=n,this.cardCountMine[f.NUM]+=n,(2===s.role||-2===s.role)&&(t=e.getInt(),this.cardCountMine[this.take1=t]+=n,this.cardCountMine[f.NUM]+=n),this.moveHistory.push({type:r?"give":"take",playerName:i,card0:a,card1:t}),this.giveDown=!0}updateDiscardCount(e,t,s=1n){e.discarded[t]+=s,e.discarded[f.NUM]+=s,this.cardCountDiscard[t]+=s,this.cardCountDiscard[f.NUM]+=s,e.owner===this.localClient.cn&&(this.cardCountMine[t]-=s,this.cardCountMine[f.NUM]-=s),e.handSize-=s}allowRank(e,t){let s=this.cardCountMine[f.Joker];if(this.trickTurn){let i=this.mode.opt1Fewer2&&this.trickCount>1,r=e===f.Joker,n=this.revolution?f.N3:f.N2,a=this.trickCount-(i&&e===n?1n:0n),o=i&&this.trickRank==n&&!this.trick1Fewer,d=o?f.Joker:this.trickRank,l=this.cardCountMine[r?n:e];return l+s>=a&&(e===d?this.mode.optEqualize!==v.DISALLOW&&(!this.mode.optEqualizeOnlyScum||t):this.gamePhase!==_.PLAYING_MUST_EQUALIZE&&(this.revolution?!o&&(e<d||r):e>d))?l==a?3:l>=a?2:1:0}let i=this.cardCountMine[e];return i+s>0&&(this.gamePhase!==_.PLAYING_MUST_3||e===f.N3)?i?3:1:0}playersSortProps=[e=>e.score,e=>e.streak,e=>-e.rankLast,e=>e.roleLast,e=>e.roleCount[4],e=>e.roleCount[3],e=>e.roleCount[2],e=>-e.roleCount[1],e=>-e.roleCount[0]]}function z(e,t){if(1===e)return 2;if(e===t)return -2;if(t>=4){if(2===e)return 1;if(e===t-1)return -1}return 0}function B(){return[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n]}function V(e,t){let s=4n*e;return[s,s,s,s,s,s,s,s,s,s,s,s,s,BigInt(t)*e,BigInt(52+t)*e]}function Y(e){let t=Array.from({length:f.NUM},()=>e.getUint64());return t.push(t.reduce((e,t)=>e+t,0n)),t}(l=_||(_={}))[l.GIVE_CARDS=0]="GIVE_CARDS",l[l.PLAYING=1]="PLAYING",l[l.PLAYING_MUST_3=2]="PLAYING_MUST_3",l[l.PLAYING_MUST_EQUALIZE=3]="PLAYING_MUST_EQUALIZE",(c=f||(f={}))[c.N3=0]="N3",c[c.N4=1]="N4",c[c.N5=2]="N5",c[c.N6=3]="N6",c[c.N7=4]="N7",c[c.N8=5]="N8",c[c.N9=6]="N9",c[c.N10=7]="N10",c[c.FJack=8]="FJack",c[c.FQueen=9]="FQueen",c[c.FKing=10]="FKing",c[c.Ace=11]="Ace",c[c.N2=12]="N2",c[c.Joker=13]="Joker",c[c.NUM=14]="NUM";let q=[["Scum","danger"],["High-Scum","warning"],["∅","secondary"],["Vice-President","success"],["President","primary"]];function H(e){return q[e+2][0]}function j(e,t){return`badge text-bg-${t?"":"outline-"}${q[e+2][1]}`}var K=k.from_html("<span> </span>"),W=k.from_html("<!> ",1),Q=k.from_html("<span> </span>"),Z=k.from_html("<span> <!> <!></span>");function X(e,t){k.push(t,!0);var s=Z(),i=k.child(s),r=k.sibling(i),n=e=>{var s=W(),i=k.first_child(s),r=e=>{var s=k.text();k.template_effect(e=>k.set_text(s,e),[()=>H(t.prevRole)]),k.append(e,s)};k.if(i,e=>{t.prevRole&&e(r)});var n=k.sibling(i);k.template_effect(()=>k.set_text(n,` ${t.prevRole<t.newRole?"➚":"➘"}`)),k.append(e,s)};k.if(r,e=>{t.prevRole!=t.newRole&&e(n)});var a=k.sibling(r,2),o=e=>{var s=Q(),i=k.child(s,!0);k.reset(s),k.template_effect((e,t)=>{k.set_class(s,1,e),k.set_text(i,t)},[()=>k.clsx(j(t.newRole,t.isMe)),()=>H(t.newRole)]),k.append(e,s)};k.if(a,e=>{(t.prevRole!=t.newRole||t.newRole)&&e(o)}),k.reset(s),k.template_effect(e=>{k.set_class(s,1,e),k.set_text(i,`${t.name??""} `)},[()=>k.clsx(j(t.prevRole,t.isMe))]),k.append(e,s),k.pop()}var ee=k.from_html(' <div class="d-inline-block"> <!> </div>',1),et=k.from_html('<li class="list-group-item"><div> <!></div></li>'),es=k.from_html('<li class="list-group-item">No past games!</li>'),ei=k.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),er=k.from_html('<span class="badge text-bg-light"> </span><!>,',1),en=k.from_html('<div class="progress"><div class="progress-bar"></div></div>'),ea=k.from_html('<div class="progress-stacked my-1"><div class="progress" style="width: 3.125%"><div class="progress-bar bg-info"></div></div> <!></div>'),eo=k.from_html('<div class="progress bg-primary"></div>'),ed=k.from_html('<tr><td> </td><td class="w-100"><!></td><td> </td></tr>'),el=k.from_html('<!> <table class="table table-sm"><tbody></tbody></table>',1);function ec(e,t){k.push(t,!0);let s=k.derived(()=>t.cards.at(-1));var i=k.comment(),r=k.first_child(i),n=e=>{let i=k.derived(()=>t.cards.length-2),r=k.derived(()=>t.cards[k.get(i)]),n=k.derived(()=>t.cards.slice(0,-2)),a=k.derived(()=>BigInt(k.get(n).filter(e=>e).reduce((e,t)=>e<t?e:t))),o=k.derived(()=>BigInt(k.get(n).reduce((e,t)=>e>t?e:t))),d=k.derived(()=>k.get(o)-k.get(a));var l=el(),c=k.first_child(l),h=e=>{var s=er(),n=k.first_child(s),a=k.child(n,!0);k.reset(n);var o=k.sibling(n),d=e=>{var t=k.text();k.template_effect(()=>k.set_text(t,` \xd7${k.get(r)??""}`)),k.append(e,t)};k.if(o,e=>{k.get(r)>1&&e(d)}),k.next(),k.template_effect(()=>k.set_text(a,t.ranks[k.get(i)])),k.append(e,s)};k.if(c,e=>{k.get(r)&&e(h)});var p=k.sibling(c),g=k.sibling(p),u=k.child(g);k.each(u,21,()=>k.get(n),k.index,(e,s,i)=>{var r=k.comment(),n=k.first_child(r),o=e=>{var r=ed(),n=k.child(r),o=k.child(n,!0);k.reset(n);var l=k.sibling(n),c=k.child(l),h=e=>{var t=ea(),i=k.sibling(k.child(t),2),r=e=>{var t=en();k.template_effect(e=>k.set_style(t,`width:${e??""}%`),[()=>Number((BigInt(k.get(s))-k.get(a))*96875n/k.get(d))/1e3]),k.append(e,t)};k.if(i,e=>{k.get(s)>k.get(a)&&e(r)}),k.reset(t),k.append(e,t)},p=e=>{var t=eo();k.append(e,t)};k.if(c,e=>{k.get(d)?e(h):e(p,!1)}),k.reset(l);var g=k.sibling(l),u=k.child(g,!0);k.reset(g),k.reset(r),k.template_effect(()=>{k.set_text(o,t.ranks[i]),k.set_text(u,k.get(s))}),k.append(e,r)};k.if(n,e=>{k.get(s)&&e(o)}),k.append(e,r)}),k.reset(u),k.reset(g),k.template_effect(()=>k.set_text(p,` ${k.get(s)??""} total.   `)),k.append(e,l)};k.if(r,e=>{k.get(s)&&e(n)}),k.append(e,i),k.pop()}var eh=k.from_html('<span class="badge text-bg-light"> </span><!> ',1);function ep(e,t){k.push(t,!0);var s=k.comment(),i=k.first_child(s);k.each(i,17,()=>t.cards,k.index,(e,s,i)=>{var r=k.comment(),n=k.first_child(r),a=e=>{var r=k.comment(),n=k.first_child(r),a=e=>{var t=k.text();k.template_effect(()=>k.set_text(t,` ${k.get(s)??""} total.`)),k.append(e,t)},o=e=>{var r=eh(),n=k.first_child(r),a=k.child(n,!0);k.reset(n);var o=k.sibling(n),d=e=>{var t=k.text();k.template_effect(()=>k.set_text(t,` \xd7${k.get(s)??""}`)),k.append(e,t)};k.if(o,e=>{k.get(s)>1&&e(d)}),k.sibling(o).nodeValue=", ",k.template_effect(()=>k.set_text(a,t.ranks[i])),k.append(e,r)};k.if(n,e=>{i+1==t.cards.length?e(a):e(o,!1)}),k.append(e,r)};k.if(n,e=>{k.get(s)&&e(a)}),k.append(e,r)}),k.append(e,s),k.pop()}var eg=k.from_html('<th scope="col"> </th>'),eu=k.from_html("<td> </td>"),ev=k.from_html('<tr><th scope="row"> </th><!></tr>'),em=k.from_html('<div class="table-responsive"><table class="table table-sm"><thead><tr><th></th><!></tr></thead><tbody></tbody></table></div>');function e_(e,t){var s=em(),i=k.child(s),r=k.child(i),n=k.child(r),a=k.sibling(k.child(n));k.each(a,17,()=>t.ranks,k.index,(e,t)=>{var s=eg(),i=k.child(s,!0);k.reset(s),k.template_effect(()=>k.set_text(i,k.get(t))),k.append(e,s)}),k.reset(n),k.reset(r);var o=k.sibling(r);k.each(o,21,()=>t.counts,k.index,(e,t)=>{var s=ev(),i=k.child(s),r=k.child(i,!0);k.reset(i);var n=k.sibling(i);k.each(n,17,()=>k.get(t)[1],k.index,(e,t)=>{var s=eu(),i=k.child(s,!0);k.reset(s),k.template_effect(()=>k.set_text(i,k.get(t))),k.append(e,s)}),k.reset(s),k.template_effect(()=>k.set_text(r,k.get(t)[0])),k.append(e,s)}),k.reset(o),k.reset(i),k.reset(s),k.append(e,s)}var ef=s(128),ek=s(135),eb=k.from_html('and <span class="badge text-bg-light"> </span>',1),eI=k.from_html(' <span class="badge text-bg-light"> </span> <!> <span class="badge text-bg-outline-secondary"> </span>)',1),ey=k.from_html(" <!>",1),eN=k.from_html('played <span class="badge text-bg-light"> </span><!>.',1),ex=k.from_html(" <span> </span>.",1),eE=k.from_html('and <span class="badge text-bg-light"> </span>',1),eM=k.from_html('discarded <span class="badge text-bg-light"> </span> <!>.',1),eR=k.from_html("left, discarding <!>",1),eT=k.from_html("<span> </span> <!>",1),eA=k.from_html("<div><!></div> ",1),eC=k.from_html('<b>Move History</b> <label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">compact</span></label> <div class="overflow-auto" style="max-height: 20rem"></div>',1);let eP=["3","4","5","6","7","8","9","10","J","Q","K","A","2","*","Total"];var eS=k.from_html("<!> <!>",1),ew=k.from_html(' <span class="badge text-bg-light"> </span> <!>',1),eO=k.from_html('<span class="badge text-bg-dark">REVOLUTION ON</span>'),eD=k.from_html('<span class="badge text-bg-outline-dark">OFF REVOLUTION</span>'),eU=k.from_html('and <span class="badge text-bg-light"> </span>',1),eL=k.from_html("<option> </option>"),e$=k.from_html('<select class="form-select"></select>'),eF=(e,t)=>t().sendMoveTransfer(t().give0,t().give1),eG=k.from_html('<div>You got <span class="badge text-bg-light"> </span> <!> </div> <div class="input-group my-2"><!> <!> <button>Give</button></div>',1),eJ=k.from_html("<p>The Scum gave the two highest cards to the President, who must choose two cards to give back.</p>"),ez=k.from_html("<p>The High-Scum gave the highest card to the Vice-President, who must choose a card to give back.</p>"),eB=k.from_html('<div class="my-2"><!> <!> <!></div>'),eV=k.from_html("<span>PASS</span>"),eY=k.from_html("<span> </span> <!> <span> </span>",1),eq=(e,t,s,i,r)=>(t().setPendingRank(s(),k.get(i),s()===k.get(r)),t().sendMove()),eH=k.from_html("<button> </button>"),ej=(e,t)=>(t().pendingMoveRank=-1,t().sendMove()),eK=k.from_html('<div class="alert alert-success">You will pass.</div>'),eW=k.from_html('<div class="alert alert-danger">You cannot pass when starting a trick.</div>'),eQ=(e,t)=>t().sendMove(),eZ=(e,t)=>t().sendMove(),eX=k.from_html('<div class="col">Base Cards <input type="number"/> <input type="range" class="form-range"/></div>'),e0=(e,t)=>t().sendMove(),e1=(e,t)=>t().sendMove(),e2=k.from_html('<div class="col">Jokers <input type="number"/> <input type="range" class="form-range"/></div>'),e3=k.from_html('<!>   <!> <div class="alert alert-success">You will make this move.</div>',1),e4=k.from_html('<div class="alert alert-danger">You cannot make this move. <!></div>'),e6=(e,t)=>t().sendMoveEnd(),e5=k.from_html(`<div class="my-2 text-center">Your move: <!></div> <div class="btn-group d-flex my-2" role="group"><button>Pass</button> <!> <!> <!></div> <div class="my-2"><small>Legend:
            can play <span class="badge text-bg-outline-primary">all cards</span>, <span class="badge text-bg-outline-success">leftover cards</span>, <span class="badge text-bg-outline-info">need jokers</span>, <span class="badge text-bg-outline-secondary">using jokers</span> cannot play <span class="badge text-bg-outline-warning">have cards</span>, <span class="badge text-bg-outline-danger">no cards</span></small></div> <!> <div class="col-12 mb-2"><button class="btn btn-primary d-block w-100 mb-2">End Move</button></div>`,1),e7=k.from_html('<div class="my-2"><label class="form-check d-inline-block"><input type="checkbox" class="form-check-input"/> <span class="form-check-label">Your hand:</span></label> <!></div> <!>',1),e8=k.from_html('<li><span class="badge text-bg-outline-success">IN</span></li>'),e9=k.from_html("<span>MOVE</span>"),te=k.from_html("<span>OUT</span>"),tt=k.from_html("<!> <li><span> </span> <!> <!> <!></li>",1),ts=k.from_html("<li>No players!</li>"),ti=k.from_html("<li> <!> </li>"),tr=k.from_html("<li>No leavers yet!</li>"),tn=k.from_html('<!> <div class="row"><div class="col-12"><div class="my-2 text-center"> <!> <!></div> <!></div> <div class="col-sm-4"><b>Active Players</b> <ol class="list-unstyled"></ol> <b>Done Players</b> <ol class="list-unstyled"></ol></div> <div class="col-12 col-sm-8"><!></div> <div class="col mt-2"><!> Played Cards <!></div></div> <div> </div> <b>Lobby</b> <!>',1);k.delegate(["click","change"]);var ta=s(102),to=k.from_html('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,s(96).A)(function(e,t){let s;k.push(t,!0);let i=new I.Ay,r=new J(i),n=k.derived(()=>r.pastGames),a=k.derived(()=>r.leaderboard),o=k.derived(()=>r.localClient),d=k.derived(()=>r.roundState),l=(0,ta.C)("game/mp/_shared/name","");var c=to(),h=k.first_child(c);(0,x.A)(h,{get value(){return l.value},set value($$value){l.value=$$value}});var p=k.sibling(h,2);k.bind_this((0,R.A)(p,{gameId:"president-ftmxqwcwukyisw4waewyua",roomType:"PresidentRoom",get gameRoom(){return r.room},onJoinedRoom:e=>r.enterGame(e,l.value),formatGameMode:e=>U((0,M.e)(D,e)),get roomCreateOptions(){return D}}),e=>s=e,()=>s);var g=k.sibling(p,2);{let e=k.derived(()=>k.get(d)===T.mk.INTERMISSION);(0,E.A)(g,{get inGame(){return r.room},get isActive(){return r.localClient.active},get canReady(){return k.get(e)},get isReady(){return r.localClient.ready},onActive:()=>r.sendActive(),onReady:()=>r.sendReady(),onReset:()=>r.sendReset(),onDisconnect:()=>(r.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,i,n,a,o,d,l,c,h,p,g,u,v,m,b,I,y,N,x,E,M,R,C,P,S,w,O,D,L,$,F,G;let J,z,B,V,Y,q,W,Q,Z,ee,et,es,ei,er,en,ea;s={get gameState(){return r}},k.push(s,!0),J=k.prop(s,"gameState",7),z=k.derived(()=>J().localClient),B=k.derived(()=>J().roundState),V=k.derived(()=>J().playerInfo),Y=k.derived(()=>J().turnIndex),q=k.derived(()=>J().playing),W=k.derived(()=>J().canMove),Q=k.derived(()=>J().playerDiscInfo),Z=k.derived(()=>J().moveHistory),ee=k.derived(()=>J().gamePhase),et=k.derived(()=>J().trickTurn),es=k.derived(()=>J().trickCount),ei=k.state(!1),i=tn(),n=k.first_child(i),a=e=>{var t=k.text("Waiting for players…");k.append(e,t)},o=e=>{var t=eS(),s=k.first_child(t),i=e=>{var t=k.text("Intermission:");k.append(e,t)},r=e=>{var t=k.comment(),s=k.first_child(t),i=e=>{var t=k.text("Make a move:");k.append(e,t)},r=e=>{var t=k.comment(),s=k.first_child(t),i=e=>{var t=k.text("Waiting for opponent to move…");k.append(e,t)},r=e=>{var t=k.text("Spectating:");k.append(e,t)};k.if(s,e=>{k.get(z).inRound?e(i):e(r,!1)},!0),k.append(e,t)};k.if(s,e=>{k.get(W)?e(i):e(r,!1)},!0),k.append(e,t)};k.if(s,e=>{k.get(B)===T.mk.INTERMISSION?e(i):e(r,!1)});var n=k.sibling(s,2);(0,ef.A)(n,{get startTime(){return J().roundTimerStart},get endTime(){return J().roundTimerEnd},get active(){return J().room}}),k.append(e,t)},k.if(n,e=>{k.get(B)===T.mk.WAITING?e(a):e(o,!1)}),d=k.sibling(n,2),l=k.child(d),c=k.child(l),h=k.child(c),p=k.sibling(h),g=e=>{var t=ew(),s=k.first_child(t),i=k.sibling(s),r=k.child(i,!0);k.reset(i);var n=k.sibling(i),a=k.sibling(n),o=e=>{var t=k.text("-1");k.append(e,t)};k.if(a,e=>{J().trick1Fewer&&e(o)}),k.template_effect(()=>{k.set_text(s,`Move ${k.get(et)??""}: `),k.set_text(r,eP[J().trickRank]),k.set_text(n,` \xd7${k.get(es)??""}`)}),k.append(e,t)},u=e=>{var t=k.text("Move 0");k.append(e,t)},k.if(p,e=>{k.get(et)?e(g):e(u,!1)}),v=k.sibling(p,2),m=e=>{var t=k.comment(),s=k.first_child(t),i=e=>{var t=eO();k.append(e,t)},r=e=>{var t=eD();k.append(e,t)};k.if(s,e=>{J().revolution?e(i):e(r,!1)}),k.append(e,t)},k.if(v,e=>{J().mode.optRev&&e(m)}),k.reset(c),b=k.sibling(c,2),I=e=>{let t=k.derived(()=>k.get(ei)?ec:ep);var s=e7(),i=k.first_child(s),r=k.child(i),n=k.child(r);k.remove_input_defaults(n),k.next(2),k.reset(r);var a=k.sibling(r,2);k.component(a,()=>k.get(t),(e,t)=>{t(e,{get ranks(){return eP},get cards(){return J().cardCountMine}})}),k.reset(i);var o=k.sibling(i,2),d=e=>{let t=k.derived(()=>2&J().giveFlags&&J().pres>=0),s=k.derived(()=>1&J().giveFlags&&J().vicePres>=0),i=k.derived(()=>k.get(t)&&k.get(V)[J().pres].owner===k.get(z).cn),r=k.derived(()=>k.get(s)&&k.get(V)[J().vicePres].owner===k.get(z).cn);var n=eB(),a=k.child(n),o=e=>{let t=k.derived(()=>J().cardCountMine[J().give0]&&(k.get(r)||J().cardCountMine[J().give1]&&!(J().give0===J().give1&&J().cardCountMine[J().give0]<2)));var s=eG(),n=k.first_child(s),a=k.sibling(k.child(n)),o=k.child(a,!0);k.reset(a);var d=k.sibling(a,2),l=e=>{var t=eU(),s=k.sibling(k.first_child(t)),i=k.child(s,!0);k.reset(s),k.template_effect(()=>k.set_text(i,eP[J().take1])),k.append(e,t)};k.if(d,e=>{k.get(i)&&e(l)});var c=k.sibling(d);k.reset(n);var h=k.sibling(n,2);{let e,s=(e,t=k.noop)=>{var s=e$();k.each(s,21,()=>({length:f.NUM}),k.index,(e,t,s)=>{let i=k.derived(()=>J().cardCountMine[s]);var r=k.comment(),n=k.first_child(r),a=e=>{var t=eL(),r=k.child(t);k.reset(t),t.value=t.__value=s,k.template_effect(()=>k.set_text(r,`${eP[s]??""} (${k.get(i)??""})`)),k.append(e,t)};k.if(n,e=>{k.get(i)&&e(a)}),k.append(e,r)}),k.reset(s),k.bind_select_value(s,()=>J()[t()],e=>J()[t()]=e),k.append(e,s)};var p=k.child(h);s(p,()=>"give0");var g=k.sibling(p,2),u=e=>{s(e,()=>"give1")};k.if(g,e=>{k.get(i)&&e(u)});var v=k.sibling(g,2);v.__click=[eF,J],k.reset(h),k.template_effect(s=>e=k.set_class(v,1,`btn btn-${k.get(t)?"primary":"outline-secondary"}`,null,e,s),[()=>({disabled:!k.get(t)})])}k.template_effect(e=>{k.set_text(o,eP[J().take0]),k.set_text(c,` from the ${k.get(i)?"Scum":"High-Scum"}. Give back ${k.get(i)?"two cards":"a card"}:`)},[()=>({disabled:!k.get(t)})]),k.append(e,s)};k.if(a,e=>{(k.get(i)||k.get(r))&&e(o)});var d=k.sibling(a,2),l=e=>{var t=eJ();k.append(e,t)};k.if(d,e=>{k.get(t)&&e(l)});var c=k.sibling(d,2),h=e=>{var t=ez();k.append(e,t)};k.if(c,e=>{k.get(s)&&e(h)}),k.reset(n),k.append(e,n)},l=e=>{var t=k.comment(),s=k.first_child(t),i=e=>{let t=k.derived(()=>J().pendingMoveRank<0),s=k.derived(()=>-2===k.get(V)[k.get(Y)].role),i=k.derived(()=>k.get(t)?k.get(et):J().allowRank(J().pendingMoveRank,k.get(s))),r=k.derived(()=>k.get(i)?"":"outline-"),n=k.derived(()=>J().revolution?f.N3:f.N2),a=k.derived(()=>J().mode.opt1Fewer2&&k.get(et)&&k.get(es)>1);var o=e5(),d=k.first_child(o),l=k.sibling(k.child(d)),c=e=>{var t=eV();k.template_effect(()=>k.set_class(t,1,`badge text-bg-${k.get(et)?"":"outline-"}danger`)),k.append(e,t)},h=e=>{let t=k.derived(()=>J().pendingMoveRankAck===f.Joker?k.get(n):J().pendingMoveRankAck);var s=eY(),a=k.first_child(s),o=k.child(a,!0);k.reset(a);var d=k.sibling(a),l=k.sibling(d),c=e=>{var t=k.text();k.template_effect(()=>k.set_text(t,`+${J().pendingMoveJokersAck??""}`)),k.append(e,t)};k.if(l,e=>{J().pendingMoveJokersAck&&e(c)});var h=k.sibling(l,2),p=k.child(h,!0);k.reset(h),k.template_effect(()=>{k.set_class(a,1,`badge text-bg-${k.get(r)??""}light`),k.set_text(o,eP[k.get(t)]),k.set_text(d,` \xd7${J().pendingMoveBaseAck??""}`),k.set_class(h,1,`badge text-bg-outline-${k.get(i)?"success":"danger"}`),k.set_text(p,k.get(i)?"OK":"INVALID")}),k.append(e,s)};k.if(l,e=>{J().pendingMoveRankAck<0?e(c):e(h,!1)}),k.reset(d);var p=k.sibling(d,2);{let e,i=(e,t=k.noop)=>{let i,r=k.derived(()=>t()==f.Joker?k.get(n):t()),o=k.derived(()=>J().cardCountMine[k.get(r)]);var d=eH();d.__click=[eq,J,t,o,n];var l=k.child(d);k.reset(d),k.template_effect((e,s)=>{i=k.set_class(d,1,`fw-bold w-100 btn btn-${J().pendingMoveRankAck===t()?"":"outline-"}${e??""}`,null,i,s),k.set_text(l,`${eP[k.get(r)]??""}${k.get(a)&&t()===k.get(n)?"-":""}`)},[()=>(k.get(o)?["warning","info","success","primary"]:["danger","secondary"])[J().allowRank(t(),k.get(s))],()=>({active:J().pendingMoveRank===t()})]),k.append(e,d)};var g=k.child(p);g.__click=[ej,J];var u=k.sibling(g,2),v=e=>{i(e,()=>f.Joker)};k.if(u,e=>{k.get(a)&&J().revolution&&e(v)});var m=k.sibling(u,2);k.each(m,17,()=>({length:f.Joker}),k.index,(e,t,s)=>{i(e,()=>s)});var b=k.sibling(m,2),I=e=>{i(e,()=>f.Joker)};k.if(b,e=>{k.get(a)&&!J().revolution&&e(I)}),k.reset(p),k.template_effect(t=>e=k.set_class(g,1,`fw-bold w-100 btn btn-${J().pendingMoveRankAck<0?"":"outline-"}${k.get(et)?"danger":"secondary"}`,null,e,t),[()=>({active:k.get(t)})])}var y=k.sibling(p,4),N=e=>{var t=k.comment(),s=k.first_child(t),i=e=>{var t=eK();k.append(e,t)},r=e=>{var t=eW();k.append(e,t)};k.if(s,e=>{k.get(et)?e(i):e(r,!1)}),k.append(e,t)},x=e=>{var t=k.comment(),s=k.first_child(t),r=e=>{let t=k.derived(()=>J().pendingMoveRank===f.Joker?k.get(n):J().pendingMoveRank),s=k.derived(()=>k.get(a)&&J().pendingMoveRank===k.get(n)),i=k.derived(()=>J().cardCountMine[k.get(t)]),r=k.derived(()=>J().cardCountMine[f.Joker]),o=k.derived(()=>k.get(es)-(k.get(s)?1n:0n)),d=k.derived(()=>k.get(et)?k.get(o):1n),l=k.derived(()=>k.get(d)>k.get(i)?k.get(d)-k.get(i):0),c=k.derived(()=>k.get(et)&&k.get(r)>k.get(o)?k.get(o):k.get(r));var h=e3(),p=k.first_child(h),g=e=>{let t=k.derived(()=>k.get(r)&&k.get(ee)!==_.PLAYING_MUST_3?0:1),s=k.derived(()=>Number(k.get(i)));var n=k.comment(),a=k.first_child(n),o=e=>{var i=eX(),r=k.sibling(k.child(i));k.remove_input_defaults(r),r.__change=[eQ,J];var n=k.sibling(r,2);k.remove_input_defaults(n),n.__change=[eZ,J],k.reset(i),k.template_effect(()=>{k.set_class(r,1,`form-control is-${J().pendingMoveBase===J().pendingMoveBaseAck?"":"in"}valid`),k.set_attribute(r,"min",k.get(t)),k.set_attribute(r,"max",k.get(s)),k.set_attribute(n,"min",k.get(t)),k.set_attribute(n,"max",k.get(s))}),k.bind_value(r,()=>J().pendingMoveBase,e=>J().pendingMoveBase=e),k.bind_value(n,()=>J().pendingMoveBase,e=>J().pendingMoveBase=e),k.append(e,i)};k.if(a,e=>{k.get(t)<k.get(s)&&e(o)}),k.append(e,n)};k.if(p,e=>{k.get(et)||e(g)});var u=k.sibling(p,2),v=e=>{let t=k.derived(()=>k.get(l).toString()),s=k.derived(()=>k.get(c).toString());var i=e2(),r=k.sibling(k.child(i));k.remove_input_defaults(r),r.__change=[e0,J];var n=k.sibling(r,2);k.remove_input_defaults(n),n.__change=[e1,J],k.reset(i),k.template_effect(()=>{k.set_class(r,1,`form-control is-${J().pendingMoveJokers===J().pendingMoveJokersAck?"":"in"}valid`),k.set_attribute(r,"min",k.get(t)),k.set_attribute(r,"max",k.get(s)),k.set_attribute(n,"min",k.get(t)),k.set_attribute(n,"max",k.get(s))}),k.bind_value(r,()=>J().pendingMoveJokers,e=>J().pendingMoveJokers=e),k.bind_value(n,()=>J().pendingMoveJokers,e=>J().pendingMoveJokers=e),k.append(e,i)};k.if(u,e=>{k.get(l)<k.get(c)&&e(v)}),k.next(2),k.append(e,h)},o=e=>{var t=e4(),s=k.sibling(k.child(t)),i=e=>{var t=k.text("You must play 3 on the first trick.");k.append(e,t)};k.if(s,e=>{k.get(ee)===_.PLAYING_MUST_3&&e(i)}),k.reset(t),k.append(e,t)};k.if(s,e=>{k.get(i)?e(r):e(o,!1)}),k.append(e,t)};k.if(y,e=>{k.get(t)?e(N):e(x,!1)});var E=k.sibling(y,2);k.child(E).__click=[e6,J],k.reset(E),k.append(e,o)};k.if(s,e=>{k.get(W)&&e(i)},!0),k.append(e,t)};k.if(o,e=>{k.get(ee)===_.GIVE_CARDS?e(d):e(l,!1)}),k.bind_checked(n,()=>k.get(ei),e=>k.set(ei,e)),k.append(e,s)},k.if(b,e=>{k.get(B)===T.mk.ACTIVE&&k.get(q)&&e(I)}),k.reset(l),y=k.sibling(l,2),N=k.sibling(k.child(y),2),k.each(N,21,()=>k.get(V),k.index,(e,t,s)=>{let i=k.derived(()=>J().playerIsMe(k.get(t))),r=k.derived(()=>k.get(i)?"":"-outline");var n=tt(),a=k.first_child(n),o=e=>{var t=e8();k.append(e,t)};k.if(a,e=>{s===J().passIndex&&k.get(V).length>1&&e(o)});var d=k.sibling(a,2),l=k.child(d),c=k.child(l,!0);k.reset(l);var h=k.sibling(l,2),p=e=>{var t=e9();k.template_effect(()=>k.set_class(t,1,`badge text-bg${k.get(r)??""}-primary`)),k.append(e,t)};k.if(h,e=>{s===k.get(Y)&&e(p)});var g=k.sibling(h,2),u=e=>{var t=te();k.template_effect(()=>k.set_class(t,1,`badge text-bg${k.get(r)??""}-danger`)),k.append(e,t)};k.if(g,e=>{k.get(t).passed&&e(u)});var v=k.sibling(g),m=k.sibling(v),_=e=>{var s,i,r;let n;s={get role(){return k.get(t).role}},n=k.prop(s,"solid",3,!1),i=K(),r=k.child(i,!0),k.reset(i),k.template_effect((e,t)=>{k.set_class(i,1,e),k.set_text(r,t)},[()=>k.clsx(j(s.role,n())),()=>H(s.role)]),k.append(e,i)};k.if(m,e=>{k.get(t).role&&e(_)}),k.reset(d),k.template_effect(e=>{k.set_class(l,1,`badge text-bg${k.get(r)??""}-${T.mk.ACTIVE&&s===k.get(Y)?"primary":"secondary"}`),k.set_text(c,e),k.set_text(v,` ${k.get(t).handSize??""} `)},[()=>J().formatPlayerName(k.get(t))]),k.append(e,n)},e=>{var t=ts();k.append(e,t)}),k.reset(N),x=k.sibling(N,4),k.each(x,21,()=>k.get(Q),k.index,(e,t,s)=>{var i=ti(),r=k.child(i),n=k.sibling(r);X(n,k.spread_props({get name(){return k.get(t).ownerName}},()=>k.get(t)));var a=k.sibling(n);k.reset(i),k.template_effect(e=>{k.set_text(r,`#${s+(s>=J().discIndex?1+k.get(V).length:1)}: `),k.set_text(a,` (${k.get(t).hand[f.NUM]?"left "+k.get(t).hand[f.NUM]:"won"}) on ${k.get(t).trickNum??""}:${k.get(t).trickTurn??""} in ${e??""}`)},[()=>(0,A.a3)(k.get(t).duration)]),k.append(e,i)},e=>{var t=tr();k.append(e,t)}),k.reset(x),k.reset(y),E=k.sibling(y,2),M=k.child(E),R={get moves(){return k.get(Z)}},k.push(R,!0),er=k.state(!0),C=eC(),P=k.sibling(k.first_child(C),2),S=k.child(P),k.remove_input_defaults(S),k.next(2),k.reset(P),w=k.sibling(P,2),k.each(w,21,()=>R.moves,k.index,(e,t)=>{let s;var i=eA(),r=k.first_child(i),n=k.child(r),a=e=>{var s=eI(),i=k.first_child(s),r=k.sibling(i),n=k.child(r,!0);k.reset(r);var a=k.sibling(r,2),o=e=>{var s=eb(),i=k.sibling(k.first_child(s)),r=k.child(i,!0);k.reset(i),k.template_effect(()=>k.set_text(r,eP[k.get(t).card1])),k.append(e,s)};k.if(a,e=>{void 0!=k.get(t).card1&&e(o)});var d=k.sibling(a),l=k.sibling(d),c=k.child(l,!0);k.reset(l),k.next(),k.template_effect(()=>{k.set_text(i,`(You
        ${"give"==k.get(t).type?"took":"gave"} `),k.set_text(n,eP[k.get(t).card0]),k.set_text(d,` ${"give"==k.get(t).type?"from":"to"} `),k.set_text(c,k.get(t).playerName)}),k.append(e,s)},o=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{var s=k.text();k.template_effect(()=>k.set_text(s,`[${k.get(t).trick??""}:${k.get(t).turn??""} end${k.get(t).move?" by pass":""}]`)),k.append(e,s)},n=e=>{let s=k.derived(()=>k.get(t).playerIsMe?"":"-outline");var i=eT(),r=k.first_child(i),n=k.child(r,!0);k.reset(r);var a=k.sibling(r,2),o=e=>{var s=eN(),i=k.sibling(k.first_child(s)),r=k.child(i,!0);k.reset(i);var n=k.sibling(i),a=e=>{var s=ey(),i=k.first_child(s),r=k.sibling(i),n=e=>{var s=k.text();k.template_effect(()=>k.set_text(s,`+${k.get(t).jokers??""}`)),k.append(e,s)};k.if(r,e=>{k.get(t).jokers&&e(n)}),k.template_effect(()=>k.set_text(i,` \xd7${k.get(t).base??""}`)),k.append(e,s)};k.if(n,e=>{(1!=k.get(t).base||k.get(t).jokers)&&e(a)}),k.next(),k.template_effect(()=>k.set_text(r,eP[k.get(t).rank])),k.append(e,s)},d=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{var t=k.text("passed.");k.append(e,t)},n=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{let s=k.derived(()=>k.get(t).targetIsMe?"":"-outline");var i=ex(),r=k.first_child(i),n=k.sibling(r),a=k.child(n,!0);k.reset(n),k.next(),k.template_effect(()=>{k.set_text(r,`gave ${k.get(t).cardCount??""} card${1==k.get(t).cardCount?"":"s"} to `),k.set_class(n,1,`badge text-bg${k.get(s)??""}-secondary`),k.set_text(a,k.get(t).targetName)}),k.append(e,i)},n=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{var s=eM(),i=k.sibling(k.first_child(s)),r=k.child(i,!0);k.reset(i);var n=k.sibling(i,2),a=e=>{var s=eE(),i=k.sibling(k.first_child(s)),r=k.child(i,!0);k.reset(i),k.template_effect(()=>k.set_text(r,eP[k.get(t).card1])),k.append(e,s)};k.if(n,e=>{void 0!=k.get(t).card1&&e(a)}),k.next(),k.template_effect(()=>k.set_text(r,eP[k.get(t).card0])),k.append(e,s)},n=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{var s=k.comment(),i=k.first_child(s),r=e=>{var s=eR();ep(k.sibling(k.first_child(s)),{get ranks(){return eP},get cards(){return k.get(t).cards}}),k.append(e,s)},n=e=>{var t=k.text("won.");k.append(e,t)};k.if(i,e=>{k.get(t).cards[f.NUM]?e(r):e(n,!1)}),k.append(e,s)},n=e=>{var s=k.text();k.template_effect(()=>k.set_text(s,`[unknown move ${k.get(t)??""}]`)),k.append(e,s)};k.if(i,e=>{"leave"==k.get(t).type?e(r):e(n,!1)},!0),k.append(e,s)};k.if(i,e=>{"discard"==k.get(t).type?e(r):e(n,!1)},!0),k.append(e,s)};k.if(i,e=>{"give_public"==k.get(t).type?e(r):e(n,!1)},!0),k.append(e,s)};k.if(i,e=>{"pass"==k.get(t).type?e(r):e(n,!1)},!0),k.append(e,s)};k.if(a,e=>{"move"==k.get(t).type?e(o):e(d,!1)}),k.template_effect(()=>{k.set_class(r,1,`badge text-bg${k.get(s)??""}-primary`),k.set_text(n,k.get(t).playerName)}),k.append(e,i)};k.if(i,e=>{"tEnd"==k.get(t).type?e(r):e(n,!1)},!0),k.append(e,s)};k.if(n,e=>{"give"==k.get(t).type||"take"==k.get(t).type?e(a):e(o,!1)}),k.reset(r),k.sibling(r).nodeValue="  ",k.template_effect(e=>s=k.set_class(r,1,"",null,s,e),[()=>({"d-inline-block":k.get(er)})]),k.append(e,i)},e=>{k.next();var t=k.text("No moves yet!");k.append(e,t)}),k.reset(w),k.bind_checked(S,()=>k.get(er),e=>k.set(er,e)),k.append(M,C),k.pop(),k.reset(E),O=k.sibling(E,2),D=k.child(O),en=k.derived(()=>[["You",J().cardCountMine],["Others",J().cardCountOthers],["Played",J().cardCountDiscard],["Total",J().cardCountTotal]]),e_(D,{get ranks(){return eP},get counts(){return k.get(en)}}),L=k.sibling(D,2),ea=k.derived(()=>Array.from(function*(){for(let e of k.get(V))yield[J().clients[e.owner].formatName(),e.discarded];for(let e of k.get(Q))e.discarded[f.NUM]&&(yield[e.ownerName+" (used)",e.discarded]),e.hand[f.NUM]&&(yield[e.ownerName+" (hand)",e.hand])}())),e_(L,{get ranks(){return eP},get counts(){return k.get(ea)}}),k.reset(O),k.reset(d),$=k.sibling(d,2),F=k.child($),k.reset($),G=k.sibling($,4),(0,ek.A)(G,{get localClient(){return J().localClient},get inGame(){return J().roundPlayers},get inQueue(){return J().roundPlayerQueue}}),k.template_effect(e=>{k.set_text(h,`Trick ${J().trickNum??""} `),k.set_text(F,`Game Mode: ${e??""}`)},[()=>U(J().mode)]),k.append(e,i),k.pop()},$$slots:{default:!0}})}var u=k.sibling(g,2),v=k.child(u),m=k.child(v);(0,y.A)(m,{get canClear(){return k.get(n).length},onClear:()=>r.clearHistory(),children:(e,t)=>{var s,i;s={get results(){return k.get(n)}},k.push(s,!0),i=ei(),k.each(i,21,()=>s.results,k.index,(e,t)=>{var s=et(),i=k.child(s),r=k.child(i),n=k.sibling(r);k.each(n,17,()=>k.get(t).players,k.index,(e,t,s)=>{k.next();var i=ee(),r=k.first_child(i);r.nodeValue="  ";var n=k.sibling(r),a=k.child(n);a.nodeValue=`#${s+1} `;var o=k.sibling(a);X(o,k.spread_props(()=>k.get(t)));var d=k.sibling(o);k.reset(n),k.template_effect(e=>k.set_text(d,` (on ${k.get(t).trickNum??""}:${k.get(t).trickTurn??""} in ${e??""})`),[()=>(0,A.a3)(k.get(t).duration)]),k.append(e,i)}),k.reset(i),k.reset(s),k.template_effect(e=>k.set_text(r,`Turn ${k.get(t).trickNum??""}:${k.get(t).trickTurn??""} in ${e??""}: `),[()=>(0,A.a3)(k.get(t).duration)]),k.append(e,s)},e=>{var t=es();k.append(e,t)}),k.reset(i),k.append(e,i),k.pop()},$$slots:{default:!0}});var C=k.sibling(m,2);(0,N.A)(C,{get leaderboard(){return k.get(a)},get localClient(){return k.get(o)},columns:[["Score",e=>e.score],["Streak",e=>e.streak],["President",e=>e.roleCount[4]],["VP",e=>e.roleCount[3]],["Neutral",e=>e.roleCount[2]],["HS",e=>e.roleCount[1]],["Scum",e=>e.roleCount[0]]]}),k.reset(v);var P=k.sibling(v,2),S=k.child(P);(0,b.A)(S,{get chatState(){return i},onInput:e=>(0,I.Oo)(r,e)}),k.reset(P),k.reset(u),k.append(e,c),k.pop()})},131:function(e,t,s){s.d(t,{M0:()=>d,a3:()=>l,iq:()=>r,iw:()=>n,yh:()=>o,yn:()=>a});var i=s(132);let r=64;function n(e){return(e=e.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function a(){let e=new i.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function o(e,t){let s=e.filter(e=>e).sort((e,s)=>{for(let i of t){let t=i(e),r=i(s);if(t<r)return 1;if(t>r)return -1}return e.cn-s.cn}),i=1;return s.forEach((e,r)=>{if(r){let n=s[r-1];t.some(t=>t(e)!==t(n))&&(i=r+1)}s[r].rank=i}),s.sort((e,t)=>t.active-e.active)}function d(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}function l(e){let t=Number(e%1000n);return`${e/1000n}${(t/1e3+"").slice(1)}s`}},2:function(e,t,s){s.r(t),s.d(t,{CLASS:()=>C.tp,FILENAME:()=>r.Uh,HMR:()=>r.OM,NAMESPACE_SVG:()=>r.pQ,STYLE:()=>C.Y,aborted:()=>ee.QH,action:()=>T.X,active_effect:()=>eo.Fg,add_legacy_event_listener:()=>K.oe,add_locations:()=>d.D,add_svelte_meta:()=>n.G7,animation:()=>D.l,append:()=>W.BC,append_styles:()=>R.k,apply:()=>S.Bb,assign:()=>a.kp,assign_and:()=>a._R,assign_nullish:()=>a.Sc,assign_or:()=>a.im,async:()=>u.b,async_body:()=>Q.cZ,async_derived:()=>X.zx,attach:()=>A.K,attachment:()=>i.r,attr:()=>eg.CF,attribute_effect:()=>C.p_,autofocus:()=>w.wC,await:()=>m.x,bind_active_element:()=>U.m,bind_buffered:()=>$.w$,bind_checked:()=>L.mS,bind_content_editable:()=>V.b1,bind_current_time:()=>$.M$,bind_element_size:()=>z.B,bind_ended:()=>$.$T,bind_files:()=>L.md,bind_focused:()=>V.oP,bind_group:()=>L.CJ,bind_muted:()=>$.iX,bind_online:()=>F.s,bind_paused:()=>$.lY,bind_playback_rate:()=>$.hc,bind_played:()=>$.YL,bind_prop:()=>G.E,bind_property:()=>V.IY,bind_ready_state:()=>$.mM,bind_resize_observer:()=>z.y,bind_seekable:()=>$.xx,bind_seeking:()=>$.Je,bind_select_value:()=>J.$t,bind_this:()=>B.L,bind_value:()=>L.oJ,bind_volume:()=>$.Jo,bind_window_scroll:()=>Y.f,bind_window_size:()=>Y.r,boundary:()=>er.pP,bubble_event:()=>K.Ib,check_target:()=>h.X,child:()=>ep.jf,cleanup_styles:()=>o.O,clsx:()=>eg.$z,comment:()=>W.Im,component:()=>x.s,create_custom_element:()=>eh.Q,create_ownership_validator:()=>c.a,css_props:()=>k.d,deep_read:()=>eo.o1,deep_read_state:()=>eo.iT,delegate:()=>S.Mm,derived:()=>X.eO,derived_safe_equal:()=>X.Xd,document:()=>ep.gk,each:()=>b.__,effect:()=>ee.QZ,effect_root:()=>ee.Fc,effect_tracking:()=>ee.oJ,element:()=>E.N,equals:()=>e_.aI,event:()=>S.f0,exclude_from_object:()=>eo.SE,fallback:()=>ev.Np,first_child:()=>ep.es,flush:()=>Z.qX,for_await_track_reactivity_loss:()=>Q.IP,from_html:()=>W.vU,from_mathml:()=>W.$N,from_svg:()=>W._i,from_tree:()=>W.el,get:()=>eo.Jt,head:()=>M.d,hmr:()=>l.c,html:()=>I.q,hydrate_template:()=>q.PK,if:()=>_.A,index:()=>b.Pe,init:()=>j.T,init_select:()=>J.wf,inspect:()=>g.N,invalid_default_snippet:()=>em.y8,invalidate_inner_signals:()=>en.p,invalidate_store:()=>ei.qB,invoke_error_boundary:()=>ek.n,key:()=>f.E,legacy_api:()=>h.j,legacy_pre_effect:()=>ee.M3,legacy_pre_effect_reset:()=>ee.iq,legacy_rest_props:()=>es.gj,log_if_contains_state:()=>ef.f,mark_store_binding:()=>ei.io,mutable_source:()=>et.zg,mutate:()=>et.Tk,next:()=>q.K2,noop:()=>ev.lQ,once:()=>H.Oo,pending:()=>er.Ub,pop:()=>n.uY,preventDefault:()=>H.wo,prevent_snippet_stringification:()=>em.bk,prop:()=>es._w,props_id:()=>W.zA,proxy:()=>ec.B,push:()=>n.VC,raf:()=>el.e,reactive_import:()=>K.Iu,remove_input_defaults:()=>C.R0,remove_textarea_child:()=>w.VU,render_effect:()=>ee.VB,replay_events:()=>S.ES,reset:()=>q.cL,rest_props:()=>es.iR,safe_get:()=>eo.$i,sanitize_slots:()=>y.i,save:()=>Q.UN,select_option:()=>J.fs,self:()=>H.bg,set:()=>et.hZ,set_attribute:()=>C.aI,set_checked:()=>C.BY,set_class:()=>P.y,set_custom_element_data:()=>C.p,set_default_checked:()=>C.V$,set_default_value:()=>C.xp,set_selected:()=>C.$Z,set_style:()=>O.h,set_text:()=>ea.j,set_value:()=>C.to,set_xlink_attribute:()=>C.To,setup_stores:()=>ei.DZ,sibling:()=>ep.hg,slot:()=>y.N,snapshot:()=>eu.P,snippet:()=>N.UA,spread_props:()=>es.Du,state:()=>et.wk,stopImmediatePropagation:()=>H.CA,stopPropagation:()=>H.dG,store_get:()=>ei.Hz,store_mutate:()=>ei.hY,store_set:()=>ei.fT,store_unsub:()=>ei.QK,strict_equals:()=>e_.IP,tag:()=>p.Tc,tag_proxy:()=>p._e,template_effect:()=>ee.vN,text:()=>W.Qq,tick:()=>eo.io,to_array:()=>ev._N,trace:()=>p.uP,track_reactivity_loss:()=>Q.t_,transition:()=>D.k,trusted:()=>H.IZ,untrack:()=>eo.vz,update:()=>et.yo,update_legacy_props:()=>K.hp,update_pre:()=>et.cE,update_pre_prop:()=>es.CB,update_pre_store:()=>ei.IL,update_prop:()=>es.k$,update_store:()=>ei.yb,user_effect:()=>ee.MW,user_pre_effect:()=>ee.Go,validate_binding:()=>ed.R,validate_dynamic_element_tag:()=>em.Bm,validate_each_keys:()=>ed.e,validate_snippet_args:()=>v.j,validate_store:()=>em.T3,validate_void_dynamic_element:()=>em.zA,window:()=>ep.Lk,with_script:()=>W.jB,wrap_snippet:()=>N.DK});var i=s(3),r=s(4),n=s(22),a=s(42),o=s(43),d=s(44),l=s(45),c=s(46),h=s(47),p=s(20),g=s(48),u=s(49),v=s(105),m=s(50),_=s(51),f=s(52),k=s(53),b=s(54),I=s(55),y=s(56),N=s(39),x=s(57),E=s(58),M=s(35),R=s(59),T=s(60),A=s(61),C=s(62),P=s(64),S=s(34),w=s(31),O=s(65),D=s(67),U=s(70),L=s(71),$=s(72),F=s(73),G=s(74),J=s(66),z=s(75),B=s(76),V=s(77),Y=s(78),q=s(13),H=s(79),j=s(80),K=s(81),W=s(36),Q=s(29),Z=s(23),X=s(26),ee=s(8),et=s(17),es=s(82),ei=s(83),er=s(27),en=s(32),ea=s(33),eo=s(6),ed=s(86),el=s(68),ec=s(16),eh=s(87),ep=s(12),eg=s(63),eu=s(21),ev=s(7),em=s(40),e_=s(15),ef=s(89),ek=s(25)}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e](s,s.exports,a),s.exports}a.m=r,a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],a.O=(t,s,i,r)=>{if(s){r=r||0;for(var n=e.length;n>0&&e[n-1][2]>r;n--)e[n]=e[n-1];e[n]=[s,i,r];return}for(var o=1/0,n=0;n<e.length;n++){for(var[s,i,r]=e[n],d=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every(e=>a.O[e](s[l]))?s.splice(l--,1):(d=!1,r<o&&(o=r));if(d){e.splice(n--,1);var c=i();void 0!==c&&(t=c)}}return t},a.rv=()=>"1.5.8",t={84:0},a.O.j=e=>0===t[e],s=(e,s)=>{var i,r,[n,o,d]=s,l=0;if(n.some(e=>0!==t[e])){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(d)var c=d(a)}for(e&&e(s);l<n.length;l++)r=n[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},(i=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i)),a.ruid="bundler=rspack@1.5.8";var o=a.O(void 0,["11","17","34","36","35","33"],function(){return a(140)});o=a.O(o)})();