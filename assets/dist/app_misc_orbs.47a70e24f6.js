(()=>{"use strict";var t,e,i,n,a={170(t,e,i){let n;i(1);var a=i(2);function l(t,e,i=!1){let n=a.state(a.proxy(e));function r(t){return"undefined"===t?void 0:JSON.parse(t)}if(window.localStorage){let l=localStorage.getItem(t);null!==l&&a.set(n,r(l),!0),a.user_effect(()=>localStorage.setItem(t,void 0===a.get(n)?"undefined":JSON.stringify(a.get(n)))),i&&window.addEventListener("storage",i=>i.storageArea===localStorage&&i.key===t&&a.set(n,null==i.newValue?e:r(i.newValue),!0))}return{get value(){return a.get(n)},set value(newVal){a.set(n,newVal,!0)}}}var r=i(5),s=i(94),o=i(171),c=a.from_html('<label class="form-check form-check-inline"><input type="radio" class="form-check-input"/> <span class="form-check-label"> </span></label>'),d=a.from_html('<label class="form-check form-check-inline"><input type="radio" class="form-check-input"/> <span class="form-check-label"> </span></label>'),g=a.from_html('<tr><th scope="row"></th><td> </td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td><td><input type="number" class="form-control"/></td></tr>'),h=a.from_html('<tr><th scope="row"></th><td> </td><td> </td><td> </td></tr>'),u=a.from_html('<div class="my-2" style="container-type: inline-size"><canvas style="width: min(100cqw, 200cqh); height: min(50cqw, 100cqh)"></canvas></div> <h2>Settings</h2> <div class="row row-cols-sm-auto g-3 align-items-center my-2"><div class="col-12"><b>Trajectories</b></div> <div class="col-12"><label class="form-check form-check-inline"><input type="checkbox" class="form-check-input"/> draw path</label></div> <div class="col-12"><input type="number" class="form-control" min="0"/></div></div> <div><b class="me-3">Show velocity</b> <!> <!> <!> <!></div> <div><b class="me-3">Show acceleration</b> <!> <!> <!> <!></div> <h2>Orbs</h2> <h3>Properties <button class="btn btn-outline-primary">Randomize</button></h3> <table class="table table-striped table-bordered table-hover w-auto"><thead><tr><th>Index</th><th>orbitBaseAng</th><th>distX</th><th>distYMin</th><th>distYRange</th><th>baseDistYCycleAng</th><th>distYChangeSpeed</th></tr></thead><tbody></tbody></table> <h3>Kinematics at Time</h3> <input type="number" class="form-control" step="0.1"/> <input type="range" class="form-range" min="0" step="0.001"/> <table class="table table-striped table-bordered table-hover w-auto"><thead><tr><th>Index</th><th>Position</th><th>Velocity</th><th>Acceleration</th></tr></thead><tbody></tbody></table> <h3>Import/Export</h3> <div class="input-group mb-3"><button class="btn btn-outline-primary">Import from JSON</button> <button class="btn btn-outline-danger">Export to JSON</button></div> <textarea class="form-control"></textarea>',1);a.delegate(["mousedown","mousemove","change","click"]),n=document.getElementById("app"),(0,r.Or)(function(t,e){let i;a.push(e,!0);let n=[],b=[],f=2*Math.PI,v=["#dc143c","#da70d6","#6666cd","#00bfff","#00ff7f","#ee0","#ff9912","#c67171"],p=l("misc/orbs/orbs",[]),m=l("misc/orbs/drawPaths",!0),_=l("misc/orbs/drawPathDuration",8),y=l("misc/orbs/modeV",1),w=l("misc/orbs/modeA",1),x=-1,M=a.state(""),k=a.state(void 0),S=a.state(0),Y=Date.now(),D=Date.now(),A=a.state(0),C=o.Ik({distX:o.ai,distYMin:o.ai,distYRange:o.ai,baseDistYCycleAng:o.ai,distYChangeSpeed:o.ai}),T=o.Ik({orbitDist:C,orbitBaseAng:o.ai,_protected:o.lq(o.zM)}),R=o.Ik({orbs:o.YO(T)});function $(t,e,i){let n=e-i/15,a=Math.abs(Math.cos(t.baseDistYCycleAng+t.distYChangeSpeed*i)),l=t.distYMin+t.distYRange*a;return[t.distX*Math.cos(n),l*Math.sin(n)]}function P(t,e,i){let n=e-i/15,a=t.baseDistYCycleAng+t.distYChangeSpeed*i,l=Math.cos(a),r=Math.abs(l),s=t.distYMin+t.distYRange*r,o=-t.distYRange*Math.sign(l)*Math.sin(a)*t.distYChangeSpeed;return[t.distX*Math.sin(n)/15,-(s*Math.cos(n)/15)+Math.sin(n)*o]}function B(t,e,i){let n=e-i/15,a=t.baseDistYCycleAng+t.distYChangeSpeed*i,l=Math.cos(a),r=Math.abs(l),s=t.distYMin+t.distYRange*r,o=-t.distYRange*Math.sign(l)*Math.sin(a)*t.distYChangeSpeed,c=-t.distYRange*r*t.distYChangeSpeed;return[-(t.distX*Math.cos(n)/225),-(o*Math.cos(n)*2/15)+-(s*Math.sin(n)/225)+Math.sin(n)*c]}function O(t,e){return[t[0]-e[0],t[1]-e[1]]}function I(t,e,i){return O($(t,e,i+.5),$(t,e,i-.5))}function X(t,e,i){return O(I(t,e,i+.5),I(t,e,i-.5))}function E(t,e,i){return O(I(t,e,i),P(t,e,i))}function q(t,e,i){return O(X(t,e,i),B(t,e,i))}function J(){p.value=Array.from({length:24},(t,e)=>({orbitDist:{distX:1200+1e3*Math.random()|0,baseDistYCycleAng:f*Math.random(),distYMin:499.98+(1314.6-499.98)*Math.random(),distYRange:103.464+(775-103.464)*Math.random(),distYChangeSpeed:.01+.01*Math.random()},orbitBaseAng:e*f/24})),x=-1,K()}function N(){a.get(S)||(Y=Date.now()-(D-Y),function t(){a.set(S,requestAnimationFrame(t),!0),H()}())}function W(){cancelAnimationFrame(a.get(S)),D=Date.now(),a.set(S,0),H()}function j(){a.get(k).width=Math.floor(a.get(k).clientWidth*window.devicePixelRatio),a.get(k).height=Math.floor(a.get(k).clientHeight*window.devicePixelRatio)}function z(t,e,i,n){t.beginPath(),t.arc(e,i,n,0,f),t.closePath(),t.fill()}function V(t,e,i,n,a,l,r=Math.PI/6){let s=Math.atan2(a-i,n-e);t.beginPath(),t.moveTo(e,i),t.lineTo(n,a),t.lineTo(n-l*Math.cos(s-r),a-l*Math.sin(s-r)),t.moveTo(n,a),t.lineTo(n-l*Math.cos(s+r),a-l*Math.sin(s+r)),t.closePath(),t.stroke()}let F=0;function H(){let t=i;if(!t)return W();F=L?Q:((a.get(S)?Date.now():D)-Y)/1e3;let{width:e,height:n}=a.get(k);t.fillStyle="#0d0d0d",t.fillRect(0,0,e,n);let l=e/8e3,r=64*l,s=e/2/l,o=n/2/l;t.lineWidth=2,t.strokeStyle="#0e0e0e";for(let i=-5*e%500-500;i<=e+1;i+=500)t.beginPath(),t.moveTo(i,0),t.lineTo(i,n),t.stroke();for(let i=-5*n%500-500;i<=n+1;i+=500)t.beginPath(),t.moveTo(0,i),t.lineTo(e,i),t.stroke();t.lineWidth=1,t.strokeStyle="#2b2b2b";for(let i=-5*e%500-25.5;i<=e+1;i+=50)t.beginPath(),t.moveTo(i,0),t.lineTo(i,n),t.stroke();for(let i=-5*n%50-25.5;i<=n+1;i+=50)t.beginPath(),t.moveTo(0,i),t.lineTo(e,i),t.stroke();if(t.fillStyle="#ff0",z(t,.5*e,.5*n,80*l),m.value){let e=F-_.value/2;t.strokeStyle="#777",p.value.forEach(i=>{t.beginPath();for(let n=0;n<=512;n++){let[a,r]=$(i.orbitDist,i.orbitBaseAng,e+n*_.value/512);t[n?"lineTo":"moveTo"]((a+s)*l,(r+o)*l)}t.stroke()})}p.value.forEach((e,i)=>{let[n,a]=$(e.orbitDist,e.orbitBaseAng,F),c=i%3?-1:+"04361527"[i/3];t.fillStyle=c<0?"#aaa":v[c];let d=(n+s)*l,g=(a+o)*l,h=35+2/3;if(z(t,d,g,25*l),e._protected&&(t.globalAlpha=.75,z(t,d,g,h*l),t.globalAlpha=1),x==i){t.fillStyle="#fff";let e=h-4.5;for(let i=0;i<16;i++){let n=i/16*f+F/2;z(t,d+e*Math.cos(n)*l,g+e*Math.sin(n)*l,4.5*l)}}if(y.value){let[i,c]=[P,I,E][y.value-1](e.orbitDist,e.orbitBaseAng,F),d=y.value>=3?16384:4;t.strokeStyle="#00f",V(t,(n+s)*l,(a+o)*l,(n+i*d+s)*l,(a+c*d+o)*l,r)}if(w.value){let[i,c]=[B,X,q][w.value-1](e.orbitDist,e.orbitBaseAng,F),d=w.value>=3?128:16;t.strokeStyle="#f00",V(t,(n+s)*l,(a+o)*l,(n+i*d+s)*l,(a+c*d+o)*l,r)}c>=0&&(t.font="11px Arial",t.textAlign="center",t.textBaseline="alphabetic",t.fillStyle="#fff",t.fillText(`player${c}`,(n+s)*l,(a+o-80)*l))});let c=.91*n|0,d=.04*e|0,g=(.05*n|0)-2,h=L?G:a.get(S);t.lineWidth=4,t.strokeStyle=h?"#7f0000":"#007f00",t.fillStyle="#000",t.strokeRect(2,c,d,g),t.fillRect(2,c,d,g),t.font=`${.012*e}px sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff",t.fillText(h?"⏹️":"▶️",.02*e,.935*n),t.textAlign="start",t.fillText(`${F.toFixed(3)}`,.06*e,.935*n);let u=.96*n|0,b=.04*n|0;t.lineWidth=2,t.strokeStyle="#777",t.beginPath(),t.moveTo(0,u),t.lineTo(e,u),t.closePath(),t.stroke(),t.fillStyle="#000",t.fillRect(0,u+1,e,b),t.fillStyle="#f00",t.fillRect(0,u+1,F/600*e,b)}function K(){a.get(S)||H()}let L=!1,G=!1,Q=0,U=0,Z=0,tt=0;function te(){L&&(Y=0,D=1e3*Q,L=!1,G&&N())}function ti(t,e){let i,{clientWidth:n,clientHeight:l}=a.get(k),r=t-a.get(k).getBoundingClientRect().left,s=e-a.get(k).getBoundingClientRect().top;if(s>.95*l)return L=!0,(G=!!a.get(S))&&W(),!0;if(s>.9*l&&r<.04*n)return(a.get(S)?W:N)(),!0;let o=1/0;function c(t,e,n,a){let l=r-e,c=s-n,d=l*l+c*c;d<o&&d<=4*a*a&&(i=t,o=d)}let d=n/8e3,g=n/2/d,h=l/2/d;if(c(-1,.5*n,.5*l,80*d),p.value.forEach((t,e)=>{let[i,n]=$(t.orbitDist,t.orbitBaseAng,F);c(e,(i+g)*d,(n+h)*d,25*d)}),void 0!==i)return x==i&&i>=0&&(p.value[i]._protected=!p.value[i]._protected),x=i,K(),!0}function tn(t){if(t.targetTouches.length<1)return;let e=t.targetTouches.item(0);e&&ti(e.clientX,e.clientY)&&t.preventDefault()}function ta(t,e){var i,n;let{left:l,top:r}=a.get(k).getBoundingClientRect(),s=(i=(t-l)/a.get(k).clientWidth,0>i?0:i<1?i:1),o=(n=(e-r)/a.get(k).clientHeight,0>n?0:n<1?n:1);if(o>.95)Q=600*(tt=s),U=s,Z=1;else{let t=Math.min(o/.95,1),e=Math.pow(t,2.5);o<Z&&(tt=(Q/600-U*e)/(1-e)),Q=(tt+(s-tt)*e)*600,U=s,Z=t}H()}function tl(t){if(t.targetTouches.length<1||!L)return;t.preventDefault();let e=t.targetTouches.item(0);e&&ta(e.clientX,e.clientY)}(0,r.Rc)(()=>{i=a.get(k).getContext("2d"),j(),(p.value.length?K:J)()});var tr=u();a.event("resize",a.window,function(){j(),H()}),a.event("mouseup",a.window,te),a.event("touchend",a.window,te);var ts=a.first_child(tr),to=a.child(ts);to.__mousedown=function(t){ti(t.x,t.y)},to.__mousemove=function(t){L&&ta(t.x,t.y)},a.bind_this(to,t=>a.set(k,t),()=>a.get(k)),a.action(to,(t,e)=>(0,s.vr)?.(t,e),()=>["touchstart",()=>tn]),a.action(to,(t,e)=>(0,s.vr)?.(t,e),()=>["touchmove",()=>tl]),a.reset(ts);var tc=a.sibling(ts,4),td=a.sibling(a.child(tc),2),tg=a.child(td),th=a.child(tg);a.remove_input_defaults(th),th.__change=K,a.next(),a.reset(tg),a.reset(td);var tu=a.sibling(td,2),tb=a.child(tu);a.remove_input_defaults(tb),tb.__change=K,a.reset(tu),a.reset(tc);var tf=a.sibling(tc,2);{let t=(t,e=a.noop,i=a.noop)=>{var l,r=c(),s=a.child(r);a.remove_input_defaults(s),s.__change=K;var o=a.sibling(s,2),d=a.child(o,!0);a.reset(o),a.reset(r),a.template_effect(()=>{l!==(l=e())&&(s.value=(s.__value=e())??""),a.set_text(d,i())}),a.bind_group(n,[],s,()=>(e(),y.value),t=>y.value=t),a.append(t,r)};var tv=a.sibling(a.child(tf),2);t(tv,()=>0,()=>"off");var tp=a.sibling(tv,2);t(tp,()=>1,()=>"4 * actual");var tm=a.sibling(tp,2);t(tm,()=>2,()=>"4 * approx"),t(a.sibling(tm,2),()=>3,()=>"16384 * (actual - approx)"),a.reset(tf)}var t_=a.sibling(tf,2);{let t=(t,e=a.noop,i=a.noop)=>{var n,l=d(),r=a.child(l);a.remove_input_defaults(r),r.__change=K;var s=a.sibling(r,2),o=a.child(s,!0);a.reset(s),a.reset(l),a.template_effect(()=>{n!==(n=e())&&(r.value=(r.__value=e())??""),a.set_text(o,i())}),a.bind_group(b,[],r,()=>(e(),w.value),t=>w.value=t),a.append(t,l)};var ty=a.sibling(a.child(t_),2);t(ty,()=>0,()=>"off");var tw=a.sibling(ty,2);t(tw,()=>1,()=>"16 * actual");var tx=a.sibling(tw,2);t(tx,()=>2,()=>"16 * approx"),t(a.sibling(tx,2),()=>3,()=>"128 * (approx - actual)"),a.reset(t_)}var tM=a.sibling(t_,4);a.sibling(a.child(tM)).__click=J,a.reset(tM);var tk=a.sibling(tM,2),tS=a.sibling(a.child(tk));a.each(tS,21,()=>p.value,a.index,(t,e,i)=>{var n=g(),l=a.child(n);l.textContent=i;var r=a.sibling(l),s=a.child(r);a.reset(r);var o=a.sibling(r),c=a.child(o);a.remove_input_defaults(c),a.reset(o);var d=a.sibling(o),h=a.child(d);a.remove_input_defaults(h),a.reset(d);var u=a.sibling(d),b=a.child(u);a.remove_input_defaults(b),a.reset(u);var f=a.sibling(u),v=a.child(f);a.remove_input_defaults(v),a.reset(f);var m=a.sibling(f),_=a.child(m);a.remove_input_defaults(_),a.reset(m),a.reset(n),a.template_effect(()=>a.set_text(s,`${i}/${p.value.length??""} τ`)),a.bind_value(c,()=>a.get(e).orbitDist.distX,t=>a.get(e).orbitDist.distX=t),a.bind_value(h,()=>a.get(e).orbitDist.distYMin,t=>a.get(e).orbitDist.distYMin=t),a.bind_value(b,()=>a.get(e).orbitDist.distYRange,t=>a.get(e).orbitDist.distYRange=t),a.bind_value(v,()=>a.get(e).orbitDist.baseDistYCycleAng,t=>a.get(e).orbitDist.baseDistYCycleAng=t),a.bind_value(_,()=>a.get(e).orbitDist.distYChangeSpeed,t=>a.get(e).orbitDist.distYChangeSpeed=t),a.append(t,n)}),a.reset(tS),a.reset(tk);var tY=a.sibling(tk,4);a.remove_input_defaults(tY);var tD=a.sibling(tY,2);a.remove_input_defaults(tD),a.set_attribute(tD,"max",600);var tA=a.sibling(tD,2),tC=a.sibling(a.child(tA));a.each(tC,21,()=>p.value,a.index,(t,e,i)=>{let n=a.derived(()=>$(a.get(e).orbitDist,a.get(e).orbitBaseAng,a.get(A))),l=a.derived(()=>P(a.get(e).orbitDist,a.get(e).orbitBaseAng,a.get(A))),r=a.derived(()=>I(a.get(e).orbitDist,a.get(e).orbitBaseAng,a.get(A))),s=a.derived(()=>O(a.get(r),a.get(l))),o=a.derived(()=>B(a.get(e).orbitDist,a.get(e).orbitBaseAng,a.get(A))),c=a.derived(()=>X(a.get(e).orbitDist,a.get(e).orbitBaseAng,a.get(A))),d=a.derived(()=>O(a.get(c),a.get(o)));var g=h(),u=a.child(g);u.textContent=i;var b=a.sibling(u),f=a.child(b);a.reset(b);var v=a.sibling(b),p=a.child(v);a.reset(v);var m=a.sibling(v),_=a.child(m);a.reset(m),a.reset(g),a.template_effect(()=>{a.set_text(f,`${a.get(n)[0]??""}, ${a.get(n)[1]??""}`),a.set_attribute(v,"title",`approx
(${a.get(r)[0]??""}, ${a.get(r)[1]??""})
actual
(${a.get(l)[0]??""}, ${a.get(l)[1]??""})
error
(${a.get(s)[0]??""}, ${a.get(s)[1]??""})`),a.set_text(p,`${a.get(l)[0]??""}, ${a.get(l)[1]??""}`),a.set_attribute(m,"title",`approx
(${a.get(c)[0]??""}, ${a.get(c)[1]??""})
actual
(${a.get(o)[0]??""}, ${a.get(o)[1]??""})
error
(${a.get(d)[0]??""}, ${a.get(d)[1]??""})`),a.set_text(_,`${a.get(o)[0]??""}, ${a.get(o)[1]??""}`)}),a.append(t,g)}),a.reset(tC),a.reset(tA);var tT=a.sibling(tA,4),tR=a.child(tT);tR.__click=function(){try{let t=JSON.parse(a.get(M));p.value=R.verify(t,o.KS).orbs,x=-1}catch(t){alert(t)}},a.sibling(tR,2).__click=function(){a.set(M,JSON.stringify({orbs:p.value}),!0)},a.reset(tT);var t$=a.sibling(tT,2);a.remove_textarea_child(t$),a.bind_checked(th,()=>m.value,t=>m.value=t),a.bind_value(tb,()=>_.value,t=>_.value=t),a.bind_value(tY,()=>a.get(A),t=>a.set(A,t)),a.bind_value(tD,()=>a.get(A),t=>a.set(A,t)),a.bind_value(t$,()=>a.get(M),t=>a.set(M,t)),a.append(t,tr),a.pop()},{target:n}),document.getElementById("appLoading")?.remove()}},l={};function r(t){var e=l[t];if(void 0!==e)return e.exports;var i=l[t]={exports:{}};return a[t](i,i.exports,r),i.exports}r.m=a,r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=[],r.O=(e,i,n,a)=>{if(i){a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[i,n,a];return}for(var s=1/0,l=0;l<t.length;l++){for(var[i,n,a]=t[l],o=!0,c=0;c<i.length;c++)(!1&a||s>=a)&&Object.keys(r.O).every(t=>r.O[t](i[c]))?i.splice(c--,1):(o=!1,a<s&&(s=a));if(o){t.splice(l--,1);var d=n();void 0!==d&&(e=d)}}return e},r.rv=()=>"1.7.3",e={112:0},r.O.j=t=>0===e[t],i=(t,i)=>{var n,a,[l,s,o]=i,c=0;if(l.some(t=>0!==e[t])){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(o)var d=o(r)}for(t&&t(i);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},(n=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n)),r.ruid="bundler=rspack@1.7.3";var s=r.O(void 0,["1","5","16","3","9","10","17","56","19","63"],()=>r(170));s=r.O(s)})();