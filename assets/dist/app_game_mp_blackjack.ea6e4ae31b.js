(()=>{"use strict";var e,t,s,a,n={143(e,t,s){s(1);var a,n,r,i,d,l,o,h,c,u,g,p,m,f,v,b,_,E,S=s(2),I=s(127),A=s(128),N=s(129),C=s(130),y=s(131),T=s(132),x=s(133),H=s(134),R=s(137);let D=[["optTurnTime","i",2e4,"Turn Time / ms","duration of each turn, in milliseconds",5e3,6e4],["optSpeed","b",!0,"Speed","all players move at once"],["optInverted","b",!1,"Inverted","negate balance changes"],["optDecks","I",1,"Decks","number of decks, 0 is treated as infinity (increases house edge)",0,0x8000000000000],["optDealerHitSoft","b",!0,"Dealer Hits on Soft 17","(increases house edge)"],["optDealer","e",2,"Dealer Hole Card and Peek","(later options decrease house edge)",["off","on, no peek","on, late surrender","on, early surrender"]],["opt21","b",!1,"Simple","only hit and stand"],["optDouble","e",0,"Double","doubling is allowed for hard hand values of (later options increase house edge)",["any","9 to 11","10 or 11"]],["optSplitDouble","b",!0,"Double After Split","(decreases house edge)"],["optSplitSurrender","b",!1,"Surrender After Split","(decreases house edge)"],["optHitSurrender","b",!1,"Surrender After Hit","(decreases house edge)"],["optSurrender","e",2,"Surrender","when is surrendering allowed? (later options decrease house edge)",["never","dealer shows non-ace","always"]],["optSplitNonAce","i",3,"Split Non-Ace","pairs of 2 to 10 can be split N times to make N+1 hands (decreases house edge)",0,254],["optSplitAce","i",1,"Split Ace","pairs of aces can be split N times to make N+1 hands (decreases house edge) 10 with split ace is not a natural blackjack",0,254],["optSplitAceAdd","b",!0,"Hit Split Ace","allow hit/double after splitting ace (decreases house edge)"],["optInsurePartial","b",!0,"Partial Insurance","allow insuring up to rather than exactly"],["optInsureLate","b",!1,"Late Insurance","offer Insurance after all players have moved"]];function P(e){return e.optTurnTime+"/"+(e.optSpeed?"S":"s")+(e.optInverted?"I":"i")+"/"+e.optDecks+"/"+(e.optDealerHitSoft?"H":"h")+e.optDealer+(e.opt21?"-":e.optDouble+(e.optSplitDouble?"D":"d")+(e.optSplitSurrender?"S":"s")+(e.optHitSurrender?"P":"p")+e.optSurrender+"/"+e.optSplitNonAce+"/"+e.optSplitAce+(e.optSplitAceAdd?"A":"")+"/"+(e.optInsurePartial?"P":"p")+(e.optInsureLate?"L":""))}var O=s(144),M=s(140),k=s(145);(a=u||(u={}))[a.WELCOME=0]="WELCOME",a[a.JOIN=1]="JOIN",a[a.LEAVE=2]="LEAVE",a[a.RESET=3]="RESET",a[a.RENAME=4]="RENAME",a[a.PING=5]="PING",a[a.PING_TIME=6]="PING_TIME",a[a.CHAT=7]="CHAT",a[a.ACTIVE=8]="ACTIVE",a[a.ROUND_WAIT=9]="ROUND_WAIT",a[a.ROUND_INTERM=10]="ROUND_INTERM",a[a.ROUND_START=11]="ROUND_START",a[a.READY=12]="READY",a[a.END_ROUND=13]="END_ROUND",a[a.END_TURN=14]="END_TURN",a[a.END_TURN_AMOUNT=15]="END_TURN_AMOUNT",a[a.END_TURN_READY=16]="END_TURN_READY",a[a.PLAYER_ELIMINATE=17]="PLAYER_ELIMINATE",(n=g||(g={}))[n.RESET=0]="RESET",n[n.RENAME=1]="RENAME",n[n.PONG=2]="PONG",n[n.CHAT=3]="CHAT",n[n.ACTIVE=4]="ACTIVE",n[n.READY=5]="READY",n[n.MOVE_BET=6]="MOVE_BET",n[n.MOVE_INSURANCE=7]="MOVE_INSURANCE",n[n.MOVE=8]="MOVE",n[n.MOVE_READY=9]="MOVE_READY";class U extends k.Iu{#e=S.state(0);get balance(){return S.get(this.#e)}set balance(e){S.set(this.#e,e,!0)}#t=S.state(0);get streak(){return S.get(this.#t)}set streak(e){S.set(this.#t,e,!0)}#s=S.state(0);get wins(){return S.get(this.#s)}set wins(e){S.set(this.#s,e,!0)}#a=S.state(0);get loss(){return S.get(this.#a)}set loss(e){S.set(this.#a,e,!0)}#n=S.state(0);get ties(){return S.get(this.#n)}set ties(e){S.set(this.#n,e,!0)}#r=S.state(0);get total(){return S.get(this.#r)}set total(e){S.set(this.#r,e,!0)}resetScore(){this.balance=0,this.streak=0,this.wins=0,this.loss=0,this.ties=0,this.total=0}canResetScore(){return this.total}addWin(){this.streak<0&&(this.streak=0),this.streak++,this.wins++,this.total++}addLoss(){this.streak>0&&(this.streak=0),this.streak--,this.loss++,this.total++}addTie(){this.ties++,this.total++}readWelcome(e){super.readWelcome(e),this.balance=Number(e.getInt64()),this.streak=e.getInt(),this.wins=e.getInt(),this.loss=e.getInt(),this.ties=e.getInt(),this.total=this.wins+this.loss+this.ties}}class L{#i=S.state(S.proxy([]));get cards(){return S.get(this.#i)}set cards(e){S.set(this.#i,e,!0)}#d=S.state(0);get value(){return S.get(this.#d)}set value(e){S.set(this.#d,e,!0)}#l=S.state(0);get valueHard(){return S.get(this.#l)}set valueHard(e){S.set(this.#l,e,!0)}#o=!1;#h=S.state(!1);get isSoft(){return S.get(this.#h)}set isSoft(e){S.set(this.#h,e,!0)}addCard(e,t){this.cards[t?"unshift":"push"](e),e===E.Ace&&(this.#o=!0),this.valueHard+=e+1,this.value=this.valueHard+10*!!(this.isSoft=this.#o&&this.valueHard<=11)}split(e,t){let s=new L;return s.addCard(this.cards[1]),s.addCard(t),this.valueHard=this.cards[0]+(this.cards[1]=e)+2,this.#o=this.cards[0]===E.Ace||this.cards[1]===E.Ace,this.value=this.valueHard+10*!!(this.isSoft=this.#o&&this.valueHard<=11),s}isNaturalBlackjack(e){return 2===this.cards.length&&21===this.value&&!(e&&this.cards[0]===E.Ace)}}function B(e,t,s){return e.map(([a,n])=>{let r,i=0;return n<0?(r=p.SURRENDERED,i=n/2):a.value>21?(r=p.BUST,i=-n):a.isNaturalBlackjack(e.length>1)?s?r=p.PUSH:(r=p.BLACKJACK_NATURAL,i=1.5*n):s||a.value!==t?t>21||a.value>t?(r=p.WIN,i=n):(r=p.LOSE,i=-n):r=p.PUSH,[a,n,r,i]})}class w extends k.$G{#c=S.state(S.proxy([]));get hands(){return S.get(this.#c)}set hands(e){S.set(this.#c,e,!0)}#u=S.state(0);get handIndex(){return S.get(this.#u)}set handIndex(e){S.set(this.#u,e,!0)}#g=S.state(0);get bet(){return S.get(this.#g)}set bet(e){S.set(this.#g,e,!0)}#p=S.state(0n);get insurance(){return S.get(this.#p)}set insurance(e){S.set(this.#p,e,!0)}#m=S.state(!1);get ready(){return S.get(this.#m)}set ready(e){S.set(this.#m,e,!0)}}class $ extends k.p${hands=[];insurance=0n;score=0;scoreChange=0n;dealerCanBJ=!1}(r=p||(p={}))[r.SURRENDERED=0]="SURRENDERED",r[r.BUST=1]="BUST",r[r.BLACKJACK_NATURAL=2]="BLACKJACK_NATURAL",r[r.WIN=3]="WIN",r[r.PUSH=4]="PUSH",r[r.LOSE=5]="LOSE",(i=m||(m={}))[i.NO_HOLE=0]="NO_HOLE",i[i.HOLE_NO_PEEK=1]="HOLE_NO_PEEK",i[i.HOLE0=2]="HOLE0",i[i.HOLE1=3]="HOLE1",i[i.NUM=4]="NUM",(d=f||(f={}))[d.ANY=0]="ANY",d[d.ON_9_10_11=1]="ON_9_10_11",d[d.ON_10_11=2]="ON_10_11",d[d.NUM=3]="NUM",(l=v||(v={}))[l.OFF=0]="OFF",l[l.NOT_ACE=1]="NOT_ACE",l[l.ANY=2]="ANY",l[l.NUM=3]="NUM",(o=b||(b={}))[o.HIT=0]="HIT",o[o.STAND=1]="STAND",o[o.DOUBLE=2]="DOUBLE",o[o.SPLIT=3]="SPLIT",o[o.SURRENDER=4]="SURRENDER",o[o.NUM=5]="NUM";let Y=1n<<51n,V=-9000000000000000n;class G extends k.jQ{PlayerInfoType=w;PlayerDiscType=$;#f=S.state(S.proxy((0,x.q)(D)));get mode(){return S.get(this.#f)}set mode(e){S.set(this.#f,e,!0)}#v=S.state(S.proxy(_.BET));get gamePhase(){return S.get(this.#v)}set gamePhase(e){S.set(this.#v,e,!0)}#b=S.state(S.proxy(new L));get dealerHand(){return S.get(this.#b)}set dealerHand(e){S.set(this.#b,e,!0)}#_=S.state(S.proxy(J()));get cardCountHole(){return S.get(this.#_)}set cardCountHole(e){S.set(this.#_,e,!0)}#E=S.state(!1);get cardCountShoeHasHole(){return S.get(this.#E)}set cardCountShoeHasHole(e){S.set(this.#E,e,!0)}#S=S.state(S.proxy(J()));get cardCountShoe(){return S.get(this.#S)}set cardCountShoe(e){S.set(this.#S,e,!0)}#I=S.derived(()=>j(this.mode.optDecks));get cardCountTotal(){return S.get(this.#I)}set cardCountTotal(e){S.set(this.#I,e)}#A=S.derived(()=>this.cardCountTotal.map((e,t)=>e-this.cardCountShoe[t]));get cardCountPlayed(){return S.get(this.#A)}set cardCountPlayed(e){S.set(this.#A,e)}#N=S.state(0);get pendingAmount(){return S.get(this.#N)}set pendingAmount(e){S.set(this.#N,e,!0)}#C=S.state();get localPlayer(){return S.get(this.#C)}set localPlayer(e){S.set(this.#C,e,!0)}#y=S.state();get result(){return S.get(this.#y)}set result(e){S.set(this.#y,e,!0)}#T=S.derived(()=>this.playing&&(this.gamePhase!==_.PLAY||this.mode.optSpeed||this.playerIsMe(this.playerInfo[this.turnIndex])));get canMove(){return S.get(this.#T)}set canMove(e){S.set(this.#T,e)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;newClient(){return new U}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",g.RESET)}sendRename(e){this.sendf("is",g.RENAME,e)}sendPong(e){this.sendf("i2",g.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",g.CHAT,t,s,(0,M.JK)(e))}sendActive(){this.sendf("i",g.ACTIVE)}sendReady(){this.sendf("i",g.READY)}sendMoveBet(e=BigInt(this.pendingAmount)){this.sendf("iU",g.MOVE_BET,e)}sendMoveInsurance(e=BigInt(this.pendingAmount)){this.sendf("iU",g.MOVE_INSURANCE,e)}sendMoveSurrender(){this.sendMove(b.SURRENDER)}sendMove(e){this.sendf("i2",g.MOVE,e)}sendMoveReady(){this.sendf("i",g.MOVE_READY)}MESSAGE_HANDLERS={[u.WELCOME]:this.processWelcome,[u.JOIN]:this.processJoin,[u.LEAVE]:this.processLeave,[u.RESET]:this.processReset,[u.RENAME]:this.processRename,[u.PING]:this.processPing,[u.PING_TIME]:this.processPingTime,[u.CHAT]:this.processChat,[u.ACTIVE]:this.processActive,[u.ROUND_WAIT]:this.processRoundWait,[u.ROUND_INTERM]:this.processRoundInterm,[u.ROUND_START]:this.processRoundStart,[u.READY]:this.processReady,[u.END_ROUND]:this.processEndRound,[u.END_TURN]:this.processEndTurn,[u.END_TURN_AMOUNT]:this.processEndTurnAmount,[u.END_TURN_READY]:this.processEndTurnReady,[u.PLAYER_ELIMINATE]:this.processEliminate};processWelcomeMode(e){this.mode.optTurnTime=e.getInt(),this.mode.optDecks=(0,O.q)(e.getUint64(),0n,Y);let t=e.get();if(this.mode.optSpeed=!!(1&t),this.mode.optInverted=!!(2&t),this.mode.opt21=!!(4&t),this.mode.optDealerHitSoft=!!(8&t),this.mode.optDealer=t>>4&3,this.mode.opt21)this.mode.optInsureLate=!1;else{this.mode.optSplitNonAce=Math.min(e.get(),254),this.mode.optSplitAce=Math.min(e.get(),254);let s=e.get();this.mode.optDouble=Math.min(3&s,f.NUM-1),this.mode.optSurrender=Math.min(s>>2&3,v.NUM-1),this.mode.optSplitDouble=!!(16&s),this.mode.optSplitSurrender=!!(32&s),this.mode.optHitSurrender=!!(64&s),this.mode.optSplitAceAdd=!!(128&s),this.mode.optInsurePartial=!!(64&t),this.mode.optInsureLate=!!(128&t)}this.localPlayer=void 0,this.result=void 0}processPlayerInfo(e,t){if(this.roundState!==R.mk.ACTIVE)return;t.hands=W(e),t.handIndex=e.getInt();let s=e.getUint64(),a=s>>1n;t.bet=this.roundState===R.mk.ACTIVE&&this.gamePhase===_.BET?Number(a):0,t.insurance=this.roundState===R.mk.ACTIVE&&this.gamePhase!==_.BET?a:0n,t.ready=!!(1n&s)}processDiscInfo(e,t){let s=e.getUint64();t.hands=B(W(e),21,t.dealerCanBJ=!!(1n&s)),t.insurance=s>>1n,t.score=Number(e.getInt64()),t.scoreChange=e.getInt64()}processRoundStartInfo(){this.gamePhase=_.BET,this.dealerHand=new L,this.cardCountShoeHasHole=!1,this.localPlayer=void 0,this.playerInfo.forEach(e=>{let t=Math.max(2,Math.min(Number(9000000000000000n-BigInt(this.clients[e.owner].balance)),100));e.hands=[],e.handIndex=0,e.bet=t,e.insurance=0n,e.ready=!1,e.owner===this.localClient.cn&&(this.localPlayer=e,this.pendingAmount=t)})}processRoundInfo(e){if(this.cardCountShoe=K(e),this.roundState!==R.mk.ACTIVE)return this.processRoundStartInfo();let t=e.get();if(this.gamePhase=3&t,this.gamePhase===_.BET)return this.processRoundStartInfo();let s=e.get();this.dealerHand=new L,this.dealerHand.addCard(15&s),this.cardCountShoeHasHole=!!(16&s),this.mode.optDecks&&this.mode.optDealer>m.NO_HOLE&&(this.cardCountHole=K(e))}processEndTurn(e){let t;if(this.gamePhase===_.PRE){let t=this.playerInfo[e.getInt()],s=t.hands[t.handIndex];s[1]=-s[1],t.handIndex++;return}if(this.gamePhase!==_.PLAY)return;let s=this.mode.optSpeed?e.getInt():this.turnIndex,a=(0,O.q)(e.get(),0,b.NUM-1),n=this.playerInfo[s],r=n.hands[n.handIndex],[i,d]=r;switch(a){case b.DOUBLE:r[1]*=2,t=!0;case b.HIT:let l=e.get();this.consumeCard(l),i.addCard(l),t||=i.value>=21;break;case b.SPLIT:let o=e.get(),h=e.get();this.consumeCard(o),this.consumeCard(h);let c=i.split(o,h);n.hands.splice(n.handIndex+1,0,[c,d]),t=i.value>=21;break;case b.SURRENDER:r[1]=-r[1];case b.STAND:t=!0}if(this.setTimer(this.mode.optTurnTime),t){for(;++n.handIndex<n.hands.length&&(!(n.hands[n.handIndex][0].value<21)||!(n.hands[n.handIndex][1]>0)););if(!this.mode.optSpeed){for(;this.playerInfo[this.turnIndex].handIndex>=this.playerInfo[this.turnIndex].hands.length;)if(++this.turnIndex>=this.playerInfo.length){this.turnIndex=0;break}}}}processEndTurnAmount(e){let t=this.playerInfo[e.getInt()];this.gamePhase===_.BET?t.bet=Number(e.getUint64()):t.insurance=e.getUint64()}processEndTurnReady(e){this.playerInfo[e.getInt()].ready=!0}processEndRound(e){this.setTimer(this.mode.optTurnTime);e:switch(this.gamePhase){case _.BET:{for(let t of(this.pendingAmount=0,this.playerInfo)){let s=e.get(),a=new L;a.addCard(15&s),a.addCard(s>>4),t.hands=[[a,t.bet]],t.handIndex=+(a.value>=21),t.ready=!1}let t=e.get();for(let e of(this.dealerHand.addCard(t),this.cardCountShoeHasHole=!1,this.playerInfo))this.consumeCard(e.hands[0][0].cards[0]);for(let e of(this.mode.optDecks&&this.mode.optDealer>m.NO_HOLE?(this.cardCountShoeHasHole=!0,this.cardCountHole=this.cardCountShoe.slice(),this.checkHoleCard()):this.consumeCard(t),this.playerInfo))this.consumeCard(e.hands[0][0].cards[1]);if(this.mode.optDealer>m.NO_HOLE&&this.consumeCard(t),!this.playerInfo.length)break;for(;this.playerInfo[this.turnIndex].handIndex;)if(++this.turnIndex===this.playerInfo.length)break e;if(this.mode.optDealer===m.HOLE0&&(t===E.Ten||t===E.Ace&&this.mode.opt21)){if(e.get())break;else if(this.cardCountShoeHasHole){let e=t===E.Ace?E.Ten:E.Ace;this.cardCountHole[E.NUM]-=this.cardCountHole[e],this.cardCountHole[e]=0n}}this.gamePhase=this.mode.opt21||(this.mode.optInsureLate||t!==E.Ace)&&(this.mode.optDealer!==m.HOLE1||t!==E.Ten)?_.PLAY:_.PRE;return}case _.PRE:{if(!this.playerInfo.length)break;for(;this.playerInfo[this.turnIndex].handIndex;)if(++this.turnIndex===this.playerInfo.length)break e;let t=this.dealerHand.cards.at(-1);if(this.mode.optDealer>=m.HOLE0&&t===E.Ace||this.mode.optDealer===m.HOLE1&&t===E.Ten){if(e.get())break;else if(this.cardCountShoeHasHole){let e=t===E.Ace?E.Ten:E.Ace;this.cardCountHole[E.NUM]-=this.cardCountHole[e],this.cardCountHole[e]=0n}}this.gamePhase=_.PLAY;return}case _.PLAY:if(!this.playerInfo.length)break;if(this.mode.optInsureLate&&this.dealerHand.cards.at(-1)===E.Ace){for(let e of this.playerInfo)e.handIndex=e.hands.length;this.gamePhase=_.POST;return}}this.turnIndex=0;let t=e.getUint64();if(this.mode.optDealer>m.NO_HOLE){let t=e.get();this.dealerHand.addCard(t,!0),this.cardCountShoeHasHole&&(this.cardCountShoeHasHole=!1,this.consumeCard(t))}if(this.playerInfo.some(e=>e.hands.some(([t,s])=>s>0&&t.value<=21&&!t.isNaturalBlackjack(e.hands.length>1))))for(;this.dealerShouldHit();){let t=e.get();this.dealerHand.addCard(t),this.consumeCard(t)}let s={duration:t,dealerHand:this.dealerHand,players:[]},a=this.dealerHand.isNaturalBlackjack(!1);for(let e of this.playerInfo){let t=this.clients[e.owner],n=a?e.insurance<<1n:-e.insurance,r=BigInt(n),i=B(e.hands,this.dealerHand.value,a);for(let[e,s,a,n]of i)r+=BigInt(n),t[n>0?"addWin":n?"addLoss":"addTie"]();this.mode.optInverted&&(r=-r),t.balance=Number((0,O.q)(BigInt(t.balance)+r,V,9000000000000000n)),s.players.push({name:t.formatName(),isMe:t===this.localClient,hands:i,insurance:e.insurance,insuranceDelta:n,score:t.balance,scoreChange:r})}for(let e of this.playerDiscInfo)s.players.push({name:e.ownerName,isMe:e.isMe,hands:e.hands,insurance:e.insurance,insuranceDelta:-e.insurance,score:e.score,scoreChange:e.scoreChange,dealerCanBJ:e.dealerCanBJ});this.updatePlayers(),this.addHistory(this.result=s)}eliminatePlayer(e,t,s,a,n){t.insurance=a.insurance;let r=BigInt(-a.insurance);for(let[e,s,i,d]of t.hands=B(a.hands,21,t.dealerCanBJ=this.dealerCanBJ()))r+=BigInt(d),n[d>0?"addWin":d?"addLoss":"addTie"]();this.mode.optInverted&&(r=-r),t.score=n.balance=Number((0,O.q)(BigInt(n.balance)+(t.scoreChange=r),V,9000000000000000n)),this.mode.optSpeed||this.gamePhase!==_.PLAY||s!==this.turnIndex||this.setTimer(this.mode.optTurnTime);let i=this.playerInfo.length-1;return this.turnIndex>s?this.turnIndex--:this.turnIndex===i&&(this.turnIndex=0),!0}playersSortProps=[e=>e.balance,e=>e.wins-e.loss,e=>e.wins,e=>e.ties,e=>e.streak];consumeCard(e){if(this.mode.optDecks){if(this.cardCountShoe[e]--,this.cardCountShoe[E.NUM]--,this.cardCountShoeHasHole&&this.cardCountHole[e]>this.cardCountShoe[e]){let t=this.cardCountHole[e]-this.cardCountShoe[e];this.cardCountHole[e]-=t,this.cardCountHole[E.NUM]-=t}this.checkHoleCard(),this.checkRefillShoe()}}checkHoleCard(){if(!this.cardCountShoeHasHole)return;let e=this.cardCountHole[E.NUM],t=this.cardCountHole.findIndex(t=>t===e);t<E.NUM&&(this.cardCountShoeHasHole=!1,this.cardCountHole[t]=this.cardCountHole[E.NUM]=1n,this.cardCountShoe[t]--,this.cardCountShoe[E.NUM]--,this.checkRefillShoe())}checkRefillShoe(){this.cardCountShoe[E.NUM]||(this.cardCountShoe=j(this.mode.optDecks))}dealerShouldHit(){let{value:e,isSoft:t}=this.dealerHand;return e<17||this.mode.optDealerHitSoft&&17===e&&t}dealerCanBJ(){let e=this.dealerHand.cards.at(-1);return(e===E.Ace||e===E.Ten)&&(this.mode.optDealer<m.HOLE0||!this.mode.opt21&&this.gamePhase===_.PRE&&(this.mode.optDealer===m.HOLE1||e===E.Ace))}}function W(e){return Array.from({length:e.get()}).map(()=>[function(e){let t=e.get(),s=new L;for(let a=0;a<t;a++)s.addCard(Math.min(e.get(),E.NUM-1));return s}(e),Number(e.getInt64())])}function J(){return[0n,0n,0n,0n,0n,0n,0n,0n,0n,0n,0n]}function j(e){let t=4n*e||1n;return[t,t,t,t,t,t,t,t,t,4n*t,13n*t]}function K(e){let t=Array.from({length:E.NUM},()=>e.getUint64());return t.push(t.reduce((e,t)=>e+t,0n)),t}(h=_||(_={}))[h.BET=0]="BET",h[h.PRE=1]="PRE",h[h.PLAY=2]="PLAY",h[h.POST=3]="POST",(c=E||(E={}))[c.Ace=0]="Ace",c[c.N2=1]="N2",c[c.N3=2]="N3",c[c.N4=3]="N4",c[c.N5=4]="N5",c[c.N6=5]="N6",c[c.N7=6]="N7",c[c.N8=7]="N8",c[c.N9=8]="N9",c[c.Ten=9]="Ten",c[c.NUM=10]="NUM";var F=s(138),q=s(146),Q=s(147),z=s(135),X=s(142),Z=S.from_html("<span> </span>");function ee(e,t){var s=Z(),a=S.child(s);S.reset(s),S.template_effect(()=>{S.set_class(s,1,`badge text-bg-${t.solid?"":"outline-"}${t.delta?t.delta<0?"danger":"success":"warning"}`),S.set_text(a,`${t.delta>=0?"+":""}${t.delta??""}`)}),S.append(e,s)}var et=S.from_html('Bet <span class="badge text-bg-outline-secondary"> </span> on <!> <span> </span> <!>',1);function es(e,t){S.push(t,!0);let s=S.derived(()=>S.to_array(t.hand,4)),a=S.derived(()=>S.get(s)[0]),n=S.derived(()=>S.get(s)[1]),r=S.derived(()=>S.get(s)[2]),i=S.derived(()=>S.get(s)[3]);S.next();var d=et(),l=S.sibling(S.first_child(d)),o=S.child(l,!0);S.reset(l);var h=S.sibling(l,2);ew(h,{get hand(){return S.get(a)},final:!0});var c=S.sibling(h,2),u=S.child(c,!0);S.reset(c),ee(S.sibling(c,2),{get delta(){return S.get(i)}}),S.template_effect(()=>{S.set_text(o,0>S.get(n)?-S.get(n):S.get(n)),S.set_class(c,1,`badge text-bg-${["outline-secondary","secondary","primary","success","warning","danger"][S.get(r)]??""}`),S.set_text(u,["SURRENDERED","BUST","BLACKJACK","WIN","PUSH","LOSE"][S.get(r)])}),S.append(e,d),S.pop()}let ea=["A","2","3","4","5","6","7","8","9","10","Total"];var en=S.from_html("<!> <!>",1),er=S.from_html('<br/> Balance: <span class="badge text-bg-secondary"> </span>',1),ei=S.from_html("<p>Possible hole card: <!></p>"),ed=S.from_html('<div class="my-2 text-center"><p>Dealer: <!></p> <!></div>'),el=S.from_html('<div>Bet Amount <input type="number" min="2"/> <input type="range" class="form-range" min="2"/></div> <div class="text-center"><button>&#9989; Ready</button></div>',1),eo=S.from_html('<p class="text-center">You bet <span class="badge text-bg-outline-secondary"> </span> on <!></p>'),eh=S.from_html('<div class="text-center"><button>&#8252;&#65039; Double</button> <button>&#11014;&#65039; Hit</button> <button class="btn btn-danger btn-lg">&#9940; Stand</button> <button>&harr;&#65039; Split</button> <button>&#127987; Surrender</button></div>'),ec=S.from_html('<div>Insurance Amount <input type="number" min="0"/> <input type="range" class="form-range" min="0"/></div>'),eu=S.from_html("<button>&#127987; Surrender</button>"),eg=S.from_html('<!> <div class="text-center"><button>&#9989; Ready</button> <!></div>',1),ep=S.from_html("<!> <!>",1),em=S.from_html('<div class="my-3"><!></div>'),ef=S.from_html("<span> </span>"),ev=S.from_html('<span class="badge text-bg-outline-secondary"> </span>'),eb=S.from_html('Insurance <span class="badge text-bg-outline-secondary"> </span> ',1),e_=S.from_html('<span class="badge text-bg-primary">BLACKJACK</span>'),eE=S.from_html('<span class="badge text-bg-outline-secondary">SURRENDERED</span>'),eS=S.from_html('<span class="badge text-bg-secondary">BUST</span>'),eI=S.from_html('<span class="badge text-bg-outline-info">PENDING</span>'),eA=S.from_html("<span>MOVE</span>"),eN=S.from_html('<li>Bet <span class="badge text-bg-outline-secondary"> </span> on <!> <!></li>'),eC=S.from_html('<!> <ol class="list-unstyled"></ol>',1),ey=S.from_html("<li><span> </span> <!> <!></li>"),eT=S.from_html("<li>No players!</li>"),ex=S.from_html('<li>Insurance lost <span class="badge text-bg-outline-danger"> </span></li>'),eH=S.from_html("<li><!></li>"),eR=S.from_html('<li><span> </span> <span> </span> <ol class="list-unstyled"><!> <!></ol></li>'),eD=S.from_html('<b>Disconnected Players</b> <ol class="list-unstyled"></ol>',1),eP=S.from_html('<!> <!> <div class="text-center"><div class="d-inline-block text-start"><b>Active Players</b> <ol class="list-unstyled"></ol> <!></div></div>',1),eO=S.from_html('<div class="my-3 text-center"><div class="d-inline-block text-start"><!></div></div>'),eM=S.from_html("<p> </p>"),ek=S.from_html('<div class="mb-2"><!></div> <div class="mb-3 text-center"> <!></div> <!> <div class="mt-2"><!></div> <div> </div> <b>Lobby</b> <!>',1);S.delegate(["change","click"]);var eU=S.from_html('<span class="badge text-bg-light">?</span>'),eL=S.from_html('<span class="badge text-bg-light"> </span>'),eB=S.from_html("<!> <!> (<!> ",1);function ew(e,t){S.push(t,!0);var s=eB(),a=S.first_child(s),n=e=>{var t=eU();S.append(e,t)};S.if(a,e=>{t.hole&&e(n)});var r=S.sibling(a,2);S.each(r,17,()=>t.hand.cards,S.index,(e,t)=>{var s=eL(),a=S.child(s,!0);S.reset(s),S.template_effect(()=>S.set_text(a,ea[S.get(t)])),S.append(e,s)});var i=S.sibling(r,2),d=e=>{var s=S.text();S.template_effect(()=>S.set_text(s,`${t.hand.valueHard??""}/`)),S.append(e,s)};S.if(i,e=>{!t.final&&t.hand.isSoft&&e(d)});var l=S.sibling(i);S.template_effect(()=>S.set_text(l,`${t.hand.value??""})`)),S.append(e,s),S.pop()}var e$=S.from_html('<li>Insurance <span class="badge text-bg-outline-secondary"> </span> <!></li>'),eY=S.from_html("<li><small> </small></li>"),eV=S.from_html("<li><!></li>"),eG=S.from_html('<li><span> </span> <!> <ol class="list-unstyled"><!> <!> <!></ol></li>'),eW=S.from_html('<div>Dealer: <!> <ul class="list-unstyled"></ul></div>');function eJ(e,t){S.push(t,!0);var s=eW(),a=S.sibling(S.child(s));ew(a,{get hand(){return t.result.dealerHand},final:!0});var n=S.sibling(a),r=S.sibling(n);S.each(r,21,()=>t.result.players,S.index,(e,t)=>{var s=eG(),a=S.child(s),n=S.child(a,!0);S.reset(a);var r=S.sibling(a,2);ee(r,{get delta(){return S.get(t).scoreChange},solid:!0});var i=S.sibling(r),d=S.sibling(i),l=S.child(d),o=e=>{var s=e$(),a=S.sibling(S.child(s)),n=S.child(a,!0);S.reset(a);var r=S.sibling(a);ee(S.sibling(r),{get delta(){return S.get(t).insuranceDelta}}),S.reset(s),S.template_effect(()=>{S.set_text(n,S.get(t).insurance),S.set_text(r,` ${S.get(t).insuranceDelta>0?"won":"lost"} `)}),S.append(e,s)};S.if(l,e=>{S.get(t).insurance&&e(o)});var h=S.sibling(l,2),c=e=>{var s=eY(),a=S.child(s),n=S.child(a);S.reset(a),S.reset(s),S.template_effect(()=>S.set_text(n,`Left when dealer blackjack was ${S.get(t).dealerCanBJ?"":"not"} possible`)),S.append(e,s)};S.if(h,e=>{S.get(t).hands.length&&null!=S.get(t).dealerCanBJ&&e(c)});var u=S.sibling(h,2);S.each(u,17,()=>S.get(t).hands,S.index,(e,t)=>{var s=eV();es(S.child(s),{get hand(){return S.get(t)}}),S.reset(s),S.append(e,s)}),S.reset(d),S.reset(s),S.template_effect(()=>{S.set_class(a,1,`badge text-bg-${S.get(t).isMe?"":"outline-"}secondary`),S.set_text(n,S.get(t).name),S.set_text(i,` →
        ${S.get(t).score??""} `)}),S.append(e,s)}),S.reset(r),S.reset(s),S.template_effect(e=>S.set_text(n,` after ${e??""} `),[()=>(0,F.a3)(t.result.duration)]),S.append(e,s),S.pop()}var ej=s(108),eK=S.from_html('<li class="list-group-item"><!></li>'),eF=S.from_html('<li class="list-group-item">No past games!</li>'),eq=S.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),eQ=S.from_html('<!> <div class="input-group mb-3"><span class="input-group-text flex-grow-1"><label class="form-check mx-auto"><input type="checkbox" class="form-check-input"/> Show Detailed Card Count</label></span></div> <!> <!> <div class="row"><div class="col-12 col-lg-8"><!> <!></div> <div class="col-12 col-lg-4 mb-3"><!></div></div>',1);(0,s(102).A)(function(e,t){let s;S.push(t,!0);let a=new A.Ay,n=new G(a),r=S.derived(()=>n.room),i=S.derived(()=>n.canReset),d=S.derived(()=>n.pastGames),l=S.derived(()=>n.leaderboard),o=S.derived(()=>n.localClient),h=S.derived(()=>n.roundState),c=(0,ej.C)("game/mp/_shared/name",""),u=(0,ej.C)("game/mp/_shared/cardCount",!0);var g=eQ(),p=S.first_child(g);(0,y.A)(p,{onchange:()=>n.sendRename(c.value),get value(){return c.value},set value($$value){c.value=$$value}});var O=S.sibling(p,2),M=S.child(O),k=S.child(M),U=S.child(k);S.remove_input_defaults(U),S.next(),S.reset(k),S.reset(M),S.reset(O);var L=S.sibling(O,2);S.bind_this((0,H.A)(L,{gameId:"blackjack-6zesndxegeqvedc1obxixa",roomType:"BlackjackRoom",get gameRoom(){return n.room},onJoinedRoom:e=>n.enterGame(e,c.value),formatGameMode:e=>P((0,x.e)(D,e)),get roomCreateOptions(){return D}}),e=>s=e,()=>s);var B=S.sibling(L,2);{let e=S.derived(()=>S.get(h)===R.mk.INTERMISSION);(0,T.A)(B,{get inGame(){return S.get(r)},get isActive(){return n.localClient.active},get canReady(){return S.get(e)},get isReady(){return n.localClient.ready},onActive:()=>n.sendActive(),onReady:()=>n.sendReady(),onDisconnect:()=>(n.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,a,r,i,d,l,o,h,c,g,p,I,A,N,C,y,T,x,H,D;let O,M,k,U,L,B,w,$,Y,V,G,W;s={get gameState(){return n},get showCardCount(){return u.value}},S.push(s,!0),O=S.prop(s,"gameState",7),M=S.derived(()=>O().localClient),k=S.derived(()=>O().roundState),U=S.derived(()=>O().canMove),L=S.derived(()=>O().playerInfo),B=S.derived(()=>O().turnIndex),w=S.derived(()=>O().playerDiscInfo),$=S.derived(()=>O().mode),Y=S.derived(()=>O().gamePhase),V=S.derived(()=>O().dealerHand),G=S.derived(()=>O().localPlayer),W=S.derived(()=>O().result),a=ek(),r=S.first_child(a),i=S.child(r),d=e=>{var t=S.text("Waiting for players…");S.append(e,t)},l=e=>{var t=en(),s=S.first_child(t),a=e=>{var t=S.text("Intermission:");S.append(e,t)},n=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{var t=S.text("Make a move:");S.append(e,t)},n=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{var t=S.text("Waiting for others to move…");S.append(e,t)},n=e=>{var t=S.text("Spectating:");S.append(e,t)};S.if(s,e=>{S.get(M).inRound?e(a):e(n,!1)},!0),S.append(e,t)};S.if(s,e=>{S.get(U)?e(a):e(n,!1)},!0),S.append(e,t)};S.if(s,e=>{S.get(k)===R.mk.INTERMISSION?e(a):e(n,!1)});var r=S.sibling(s,2);(0,z.A)(r,{get startTime(){return O().roundTimerStart},get endTime(){return O().roundTimerEnd},get active(){return O().room}}),S.append(e,t)},S.if(i,e=>{S.get(k)===R.mk.WAITING?e(d):e(l,!1)}),S.reset(r),o=S.sibling(r,2),h=S.child(o),c=S.sibling(h),g=e=>{var t=er(),s=S.sibling(S.first_child(t),2),a=S.child(s,!0);S.reset(s),S.template_effect(()=>S.set_text(a,S.get(M).balance)),S.append(e,t)},S.if(c,e=>{(S.get(M).balance||S.get(M).active)&&e(g)}),S.reset(o),p=S.sibling(o,2),I=e=>{var t=eP(),s=S.first_child(t),a=e=>{let t=S.derived(()=>S.get(V).cards.length<2&&!!S.get($).optDealer);var s=ed(),a=S.child(s);ew(S.sibling(S.child(a)),{get hand(){return S.get(V)},get hole(){return S.get(t)}}),S.reset(a);var n=S.sibling(a,2),r=e=>{var t=ei(),s=S.sibling(S.child(t));(0,q.A)(s,{get ranks(){return ea},get cards(){return O().cardCountHole}}),S.reset(t),S.append(e,t)};S.if(n,e=>{S.get(t)&&e(r)}),S.reset(s),S.append(e,s)};S.if(s,e=>{S.get(Y)!==_.BET&&e(a)});var n=S.sibling(s,2),r=e=>{var t=em(),s=S.child(t),a=e=>{let t,s=S.derived(()=>Math.max(2,S.get(M).balance<-100?100:S.get(M).balance<(Number(9000000000000000n)-200)/2?Number(S.get(M).balance)+200:Number(9000000000000000n-BigInt(S.get(M).balance))));var a=el(),n=S.first_child(a),r=S.sibling(S.child(n));S.remove_input_defaults(r),r.__change=()=>O().sendMoveInsurance();var i=S.sibling(r,2);S.remove_input_defaults(i),i.__change=()=>O().sendMoveBet(),S.reset(n);var d=S.sibling(n,2),l=S.child(d);l.__click=()=>O().sendMoveReady(),S.reset(d),S.template_effect(e=>{S.set_class(r,1,`form-control is-${e??""}valid`),S.set_attribute(r,"max",S.get(s)),S.set_attribute(i,"max",S.get(s)),t=S.set_class(l,1,"btn btn-info btn-lg",null,t,{disabled:S.get(G).ready})},[()=>O().pendingAmount===Number(S.get(G).bet)?"":"in"]),S.bind_value(r,()=>O().pendingAmount,e=>O().pendingAmount=e),S.bind_value(i,()=>O().pendingAmount,e=>O().pendingAmount=e),S.append(e,a)},n=e=>{var t=ep(),s=S.first_child(t),a=e=>{let t=S.derived(()=>S.get(G).hands[S.get(G).handIndex]),s=S.derived(()=>{let[e,s]=S.get(t);return{hand:e,bet:s}});var a=eo(),n=S.sibling(S.child(a)),r=S.child(n,!0);S.reset(n),ew(S.sibling(n,2),{get hand(){return S.get(s).hand}}),S.reset(a),S.template_effect(()=>S.set_text(r,S.get(s).bet)),S.append(e,a)};S.if(s,e=>{S.get(G).handIndex<S.get(G).hands.length&&e(a)});var n=S.sibling(s,2),r=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{let t=S.derived(()=>S.get(G).hands[S.get(G).handIndex]);var s=S.comment(),a=S.first_child(s),n=e=>{let s,a,n,r=S.derived(()=>{let[e]=S.get(t);return{hand:e}}),i=S.derived(()=>S.get(G).hands.length);var d=eh(),l=S.child(d);l.__click=()=>O().sendMove(b.DOUBLE);var o=S.sibling(l,2);o.__click=()=>O().sendMove(b.HIT);var h=S.sibling(o,2);h.__click=()=>O().sendMove(b.STAND);var c=S.sibling(h,2);c.__click=()=>O().sendMove(b.SPLIT);var u=S.sibling(c,2);u.__click=()=>O().sendMove(b.SURRENDER),S.reset(d),S.template_effect(e=>{s=S.set_class(l,1,`btn btn${S.get($).opt21||S.get(r).hand.cards.length>2||S.get(i)>1&&(!S.get($).optSplitDouble||!S.get($).optSplitAceAdd&&S.get(r).hand.cards[0]===E.Ace)||S.get($).optDouble!==f.ANY&&(S.get(r).hand.valueHard<(S.get($).optDouble===f.ON_10_11?10:9)||S.get(r).hand.valueHard>11)?"-outline":""}-warning btn-lg`,null,s,{"d-none":S.get($).opt21}),S.set_class(o,1,`btn btn${!S.get($).optSplitAceAdd&&S.get(i)>1&&S.get(r).hand.cards[0]===E.Ace?"-outline":""}-success btn-lg`),a=S.set_class(c,1,`btn btn${S.get($).opt21||S.get(r).hand.cards.length>2||S.get(r).hand.cards[0]!==S.get(r).hand.cards[1]||S.get(i)>(S.get(r).hand.cards[0]===E.Ace?S.get($).optSplitAce:S.get($).optSplitNonAce)?"-outline":""}-primary btn-lg`,null,a,{"d-none":S.get($).opt21||!S.get($).optSplitAce&&!S.get($).optSplitNonAce}),n=S.set_class(u,1,`btn btn${e??""}-secondary btn-lg`,null,n,{"d-none":S.get($).opt21||S.get($).optSurrender===v.OFF})},[()=>S.get($).opt21||!S.get($).optHitSurrender&&S.get(r).hand.cards.length>2||S.get($).optSurrender===v.OFF||S.get($).optSurrender===v.NOT_ACE&&S.get(V).cards.at(-1)===E.Ace||S.get(i)>1&&!S.get($).optSplitSurrender?"-outline":""]),S.append(e,d)};S.if(a,e=>{S.get(t)&&e(n)}),S.append(e,s)},n=e=>{let t;var s=eg(),a=S.first_child(s),n=e=>{let t=S.derived(()=>S.get(G).hands.map(([e,t])=>t<0?0:Number(t/2)).reduce((e,t)=>e+t,0)),s=S.derived(()=>S.get($).optInsurePartial?1:Number(S.get(G).bet/2));var a=ec(),n=S.sibling(S.child(a));S.remove_input_defaults(n),n.__change=()=>O().sendMoveInsurance();var r=S.sibling(n,2);S.remove_input_defaults(r),r.__change=()=>O().sendMoveInsurance(),S.reset(a),S.template_effect(e=>{S.set_class(n,1,`form-control is-${e??""}valid`),S.set_attribute(n,"max",S.get(t)),S.set_attribute(n,"step",S.get(s)),S.set_attribute(r,"max",S.get(t)),S.set_attribute(r,"step",S.get(s))},[()=>O().pendingAmount===Number(S.get(G).insurance)?"":"in"]),S.bind_value(n,()=>O().pendingAmount,e=>O().pendingAmount=e),S.bind_value(r,()=>O().pendingAmount,e=>O().pendingAmount=e),S.append(e,a)};S.if(a,e=>{S.get(V).cards.at(-1)!==E.Ace||S.get(Y)!==_.POST&&S.get($).optInsureLate||e(n)});var r=S.sibling(a,2),i=S.child(r);i.__click=()=>O().sendMoveReady();var d=S.sibling(i,2),l=e=>{let t;var s=eu();s.__click=()=>O().sendMove(b.SURRENDER),S.template_effect(e=>t=S.set_class(s,1,"btn btn-secondary btn",null,t,e),[()=>({disabled:S.get(G).handIndex||S.get($).optSurrender===v.NOT_ACE&&S.get(V).cards.at(-1)===E.Ace})]),S.append(e,s)};S.if(d,e=>{S.get(Y)===_.PRE&&S.get($).optSurrender!==v.OFF&&e(l)}),S.reset(r),S.template_effect(()=>t=S.set_class(i,1,"btn btn-info btn-lg",null,t,{disabled:S.get(G).ready})),S.append(e,s)};S.if(s,e=>{S.get(Y)===_.PLAY?e(a):e(n,!1)}),S.append(e,t)};S.if(n,e=>{S.get(U)&&e(r)}),S.append(e,t)};S.if(s,e=>{S.get(Y)===_.BET?e(a):e(n,!1)}),S.reset(t),S.append(e,t)};S.if(n,e=>{S.get(G)&&e(r)});var i=S.sibling(n,2),d=S.child(i),l=S.sibling(S.child(d),2);S.each(l,21,()=>S.get(L),S.index,(e,t,s)=>{let a=S.derived(()=>O().playerIsMe(S.get(t))),n=S.derived(()=>S.get(a)?"":"-outline");var r=ey(),i=S.child(r),d=S.child(i,!0);S.reset(i);var l=S.sibling(i,2),o=e=>{var s=ef(),a=S.child(s,!0);S.reset(s),S.template_effect(()=>{S.set_class(s,1,`badge text-bg-${S.get(t).ready?"":"outline-"}info`),S.set_text(a,S.get(t).ready?"READY":"UNREADY")}),S.append(e,s)};S.if(l,e=>{S.get(Y)!==_.PLAY&&e(o)});var h=S.sibling(l,2),c=e=>{var s=ev(),a=S.child(s,!0);S.reset(s),S.template_effect(()=>S.set_text(a,S.get(t).bet)),S.append(e,s)},u=e=>{var a=eC(),r=S.first_child(a),i=e=>{var s=eb(),a=S.sibling(S.first_child(s)),n=S.child(a,!0);S.reset(a);var r=S.sibling(a);S.template_effect(()=>{S.set_text(n,S.get(t).insurance),S.set_text(r,` ${S.get($).optDealer>=m.HOLE0&&S.get(Y)===_.PLAY?"lost":""}`)}),S.append(e,s)};S.if(r,e=>{S.get(t).insurance&&e(i)});var d=S.sibling(r,2);S.each(d,21,()=>S.get(t).hands,S.index,(e,a,r)=>{var i=S.derived(()=>S.to_array(S.get(a),2));let d=()=>S.get(i)[0],l=()=>S.get(i)[1];var o=eN(),h=S.sibling(S.child(o)),c=S.child(h,!0);S.reset(h);var u=S.sibling(h,2);{let e=S.derived(()=>r<S.get(t).handIndex);ew(u,{get hand(){return d()},get final(){return S.get(e)}})}var g=S.sibling(u,2),p=e=>{var t=e_();S.append(e,t)},m=e=>{var a=S.comment(),i=S.first_child(a),o=e=>{var s=S.comment(),a=S.first_child(s),i=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{var t=eE();S.append(e,t)},n=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{var t=eS();S.append(e,t)},n=e=>{var t=eI();S.append(e,t)};S.if(s,e=>{d().value>21?e(a):e(n,!1)},!0),S.append(e,t)};S.if(s,e=>{0>l()?e(a):e(n,!1)}),S.append(e,t)},o=e=>{var s=S.comment(),a=S.first_child(s),i=e=>{var t=eA();S.template_effect(()=>S.set_class(t,1,`badge text-bg${S.get(n)??""}-warning`)),S.append(e,t)};S.if(a,e=>{r===S.get(t).handIndex&&e(i)},!0),S.append(e,s)};S.if(a,e=>{r<S.get(t).handIndex?e(i):e(o,!1)}),S.append(e,s)};S.if(i,e=>{(S.get(Y)>_.PLAY||S.get($).optSpeed||s<=S.get(B))&&e(o)},!0),S.append(e,a)};S.if(g,e=>{!O().dealerCanBJ()&&d().isNaturalBlackjack(S.get(t).hands.length>1)?e(p):e(m,!1)}),S.reset(o),S.template_effect(()=>S.set_text(c,0>l()?-l():l())),S.append(e,o)}),S.reset(d),S.append(e,a)};S.if(h,e=>{S.get(Y)===_.BET?e(c):e(u,!1)}),S.reset(r),S.template_effect(e=>{S.set_class(i,1,`badge text-bg${S.get(n)??""}-secondary`),S.set_text(d,e)},[()=>O().formatPlayerName(S.get(t))]),S.append(e,r)},e=>{var t=eT();S.append(e,t)}),S.reset(l);var o=S.sibling(l,2),h=e=>{var t=eD(),s=S.sibling(S.first_child(t),2);S.each(s,21,()=>S.get(w),S.index,(e,t)=>{var s=eR(),a=S.child(s),n=S.child(a,!0);S.reset(a);var r=S.sibling(a,2),i=S.child(r);S.reset(r);var d=S.sibling(r),l=S.sibling(d),o=S.child(l),h=e=>{var s=ex(),a=S.sibling(S.child(s)),n=S.child(a);S.reset(a),S.reset(s),S.template_effect(()=>S.set_text(n,`-${S.get(t).insurance??""}`)),S.append(e,s)};S.if(o,e=>{S.get(t).insurance&&e(h)});var c=S.sibling(o,2);S.each(c,17,()=>S.get(t).hands,S.index,(e,t)=>{var s=eH();es(S.child(s),{get hand(){return S.get(t)}}),S.reset(s),S.append(e,s)}),S.reset(l),S.reset(s),S.template_effect(()=>{S.set_class(a,1,`badge text-bg${S.get(t).isMe?"":"-outline"}-secondary`),S.set_text(n,S.get(t).ownerName),S.set_class(r,1,`badge text-bg-${S.get(t).scoreChange?S.get(t).scoreChange<0?"danger":"success":"warning"}`),S.set_text(i,`${S.get(t).scoreChange>=0?"+":""}${S.get(t).scoreChange??""}`),S.set_text(d,` → ${S.get(t).score??""} `)}),S.append(e,s)}),S.reset(s),S.append(e,t)};S.if(o,e=>{S.get(w).length&&e(h)}),S.reset(d),S.reset(i),S.append(e,t)},A=e=>{var t=S.comment(),s=S.first_child(t),a=e=>{var t=eO(),s=S.child(t);eJ(S.child(s),{get result(){return S.get(W)}}),S.reset(s),S.reset(t),S.append(e,t)};S.if(s,e=>{S.get(W)&&e(a)},!0),S.append(e,t)},S.if(p,e=>{S.get(k)===R.mk.ACTIVE?e(I):e(A,!1)}),N=S.sibling(p,2),C=S.child(N),y=e=>{{let t=S.derived(()=>[[O().cardCountShoeHasHole?"Shoe+Hole":"Shoe",O().cardCountShoe],["Played",O().cardCountPlayed],["Total",O().cardCountTotal]]);(0,Q.A)(e,{get ranks(){return ea},get counts(){return S.get(t)}})}},T=e=>{var t=eM(),s=S.child(t);S.reset(t),S.template_effect(()=>S.set_text(s,`Shoe count: ${O().cardCountShoe[E.NUM]-(O().cardCountShoeHasHole?1n:0n)}`)),S.append(e,t)},S.if(C,e=>{s.showCardCount?e(y):e(T,!1)}),S.reset(N),x=S.sibling(N,2),H=S.child(x),S.reset(x),D=S.sibling(x,4),(0,X.A)(D,{get localClient(){return O().localClient},get inGame(){return O().roundPlayers},get inQueue(){return O().roundPlayerQueue},get spectators(){return O().spectators}}),S.template_effect(e=>{S.set_text(h,`Game Phase: ${(S.get(k)===R.mk.ACTIVE?["Bet","Pre-Play","Play","Post-Play"][S.get(Y)]:"Inactive")??""} `),S.set_text(H,`Game Mode: ${e??""}`)},[()=>P(S.get($))]),S.append(e,a),S.pop()},$$slots:{default:!0}})}var w=S.sibling(B,2),$=S.child(w),Y=S.child($);(0,N.A)(Y,{get canClear(){return S.get(d).length},onClear:()=>n.clearHistory(),children:(e,t)=>{var s=eq();S.each(s,21,()=>S.get(d),S.index,(e,t)=>{var s=eK();eJ(S.child(s),{get result(){return S.get(t)}}),S.reset(s),S.append(e,s)},e=>{var t=eF();S.append(e,t)}),S.reset(s),S.append(e,s)},$$slots:{default:!0}});var V=S.sibling(Y,2);(0,C.A)(V,{get leaderboard(){return S.get(l)},get localClient(){return S.get(o)},get inGame(){return S.get(r)},get canReset(){return S.get(i)},onReset:()=>n.sendReset(),columns:[["Balance",e=>e.balance],["Score",e=>e.wins-e.loss],["Wins",e=>[e.wins,e.total]],["Ties",e=>[e.ties,e.total]],["Loss",e=>[e.loss,e.total]],["Streak",e=>e.streak]]}),S.reset($);var W=S.sibling($,2),J=S.child(W);(0,I.A)(J,{get chatState(){return a},get canSend(){return n.room},onInput:e=>(0,A.Oo)(n,e)}),S.reset(W),S.reset(w),S.bind_checked(U,()=>u.value,e=>u.value=e),S.append(e,g),S.pop()})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return n[e](s,s.exports,i),s.exports}i.m=n,i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],i.O=(t,s,a,n)=>{if(s){n=n||0;for(var r=e.length;r>0&&e[r-1][2]>n;r--)e[r]=e[r-1];e[r]=[s,a,n];return}for(var d=1/0,r=0;r<e.length;r++){for(var[s,a,n]=e[r],l=!0,o=0;o<s.length;o++)(!1&n||d>=n)&&Object.keys(i.O).every(e=>i.O[e](s[o]))?s.splice(o--,1):(l=!1,n<d&&(d=n));if(l){e.splice(r--,1);var h=a();void 0!==h&&(t=h)}}return t},i.rv=()=>"1.7.3",t={93:0},i.O.j=e=>0===t[e],s=(e,s)=>{var a,n,[r,d,l]=s,o=0;if(r.some(e=>0!==t[e])){for(a in d)i.o(d,a)&&(i.m[a]=d[a]);if(l)var h=l(i)}for(e&&e(s);o<r.length;o++)n=r[o],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(h)},(a=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a)),i.ruid="bundler=rspack@1.7.3";var d=i.O(void 0,["14","21","37","22","39","36","40"],()=>i(143));d=i.O(d)})();