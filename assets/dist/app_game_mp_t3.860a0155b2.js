(()=>{"use strict";var e,t,r,n,a={157(e,t,r){r(1);var n,a,o,s,i,d,l,c,p=r(2),g=r(108),m=r(127),h=r(128),v=r(129),u=r(130),f=r(131),b=r(132),E=r(158),_=r(133),R=r(134),T=r(137),y=r(144);function O(e,t,r=t){return t.some((t,n)=>t===(e&r[n]))}(n=i||(i={}))[n.None=0]="None",n[n.P1=1]="P1",n[n.P2=2]="P2",(a=d||(d={}))[a.None=0]="None",a[a.P1=1]="P1",a[a.P2=2]="P2",a[a.Tie=3]="Tie";let S=[86016,1344,21,66576,16644,4161,65793,4368],I=[172032,2688,42,133152,33288,8322,131586,8736],A=[258048,258048,258048,4032,4032,4032,63,63,63,199728,199728,199728,49932,49932,49932,12483,12483,12483,197379,197379,197379,13104,13104,13104],N=[20480,69632,81920,320,1088,1280,5,17,20,1040,65552,66560,260,16388,16640,65,4097,4160,257,65537,65792,272,4112,4352],k=[40960,139264,163840,640,2176,2560,10,34,40,2080,131104,133120,520,32776,33280,130,8194,8320,514,131074,131584,544,8224,8704];var w=r(140),M=r(159);let C=[["optTurnTime","i",1e4,"Turn Time / ms","duration of each turn, in milliseconds",1500,2e4],["optInverted","b",!1,"Inverted","switch winning and losing"],["optChecked","b",!1,"Checked","disallow obviously bad moves"],["optQuick","b",!1,"Quick","end early for guaranteed outcomes"]];function x(e){let t=[e.optInverted&&"inverted",e.optChecked&&"checked",e.optQuick&&"quick"].filter(e=>e);return`${t.length?t.join(" "):"standard"} ${e.optTurnTime}ms`}(o=l||(l={}))[o.WELCOME=0]="WELCOME",o[o.JOIN=1]="JOIN",o[o.LEAVE=2]="LEAVE",o[o.RESET=3]="RESET",o[o.RENAME=4]="RENAME",o[o.PING=5]="PING",o[o.PING_TIME=6]="PING_TIME",o[o.CHAT=7]="CHAT",o[o.ACTIVE=8]="ACTIVE",o[o.ROUND_WAIT=9]="ROUND_WAIT",o[o.ROUND_INTERM=10]="ROUND_INTERM",o[o.ROUND_START=11]="ROUND_START",o[o.READY=12]="READY",o[o.END_ROUND=13]="END_ROUND",o[o.MOVE_CONFIRM=14]="MOVE_CONFIRM",o[o.END_TURN=15]="END_TURN",o[o.OFFER_DRAW=16]="OFFER_DRAW",(s=c||(c={}))[s.RESET=0]="RESET",s[s.RENAME=1]="RENAME",s[s.PONG=2]="PONG",s[s.CHAT=3]="CHAT",s[s.ACTIVE=4]="ACTIVE",s[s.READY=5]="READY",s[s.MOVE=6]="MOVE",s[s.MOVE_END=7]="MOVE_END",s[s.FORFEIT=8]="FORFEIT",s[s.OFFER_DRAW=9]="OFFER_DRAW",s[s.REJECT_DRAW=10]="REJECT_DRAW";class D extends M.V{#e=p.state(p.proxy((0,_.q)(C)));get mode(){return p.get(this.#e)}set mode(e){p.set(this.#e,e,!0)}#t=p.state(0);get boardState(){return p.get(this.#t)}set boardState(e){p.set(this.#t,e,!0)}#r=p.state(0);get boardBad(){return p.get(this.#r)}set boardBad(e){p.set(this.#r,e,!0)}#n=p.state(p.proxy([]));get moveHistory(){return p.get(this.#n)}set moveHistory(e){p.set(this.#n,e,!0)}get ROUND_TIME(){return this.mode.optTurnTime}INTERMISSION_TIME=3e4;enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",c.RESET)}sendRename(e){this.sendf("is",c.RENAME,e)}sendPong(e){this.sendf("i2",c.PONG,e)}sendChat(e,t,r=-1){this.sendf("i3s",c.CHAT,t,r,(0,w.JK)(e))}sendActive(){this.sendf("i",c.ACTIVE)}sendReady(){this.sendf("i",c.READY)}sendMove(e){this.sendf("i2",c.MOVE,e)}sendMoveEnd(){this.sendf("i",c.MOVE_END)}sendResign(){this.sendf("i",c.FORFEIT)}sendDrawOffer(){this.sendf("i",c.OFFER_DRAW)}sendDrawReject(){this.sendf("i",c.REJECT_DRAW)}MESSAGE_HANDLERS={[l.WELCOME]:this.processWelcome,[l.JOIN]:this.processJoin,[l.LEAVE]:this.processLeave,[l.RESET]:this.processReset,[l.RENAME]:this.processRename,[l.PING]:this.processPing,[l.PING_TIME]:this.processPingTime,[l.CHAT]:this.processChat,[l.ACTIVE]:this.processActive,[l.ROUND_WAIT]:this.processRoundWait,[l.ROUND_INTERM]:this.processRoundInterm,[l.ROUND_START]:this.processRoundStart,[l.READY]:this.processReady,[l.END_ROUND]:this.processEndRound,[l.MOVE_CONFIRM]:this.processMoveConfirm,[l.END_TURN]:this.processEndTurn,[l.OFFER_DRAW]:this.processOfferDraw};processWelcomeMode(e){this.mode.optTurnTime=e.getInt();let t=e.get();this.mode.optInverted=!!(1&t),this.mode.optChecked=!!(2&t),this.mode.optQuick=!!(4&t)}processMoveConfirm(e){e.getInt()}processEndTurn(e){let t=(0,y.q)(e.getInt(),0,8);this.applyMove(t),this.nextTurn(),this.setTimer(this.mode.optTurnTime)}processRoundInfo(e){this.reset();for(let t=0;t<=9;t++){this.ply=t;let r=e.getInt();if(r<0)break;this.applyMove(r)}}processRoundStartInfo(e){this.reset()}reset(){this.boardState=0,this.boardBad=0,this.moveHistory=[]}applyMove(e){let t=1<<(1&this.ply),r=this.boardState|t<<(e<<1);this.boardState=r,this.boardBad=function(e,t,r){let n=0;if(e.optChecked){let a=1&r,o=1<<a;for(let r=0;r<9;r++){let s=t|o<<(r<<1);(e.optInverted?O(s,a?I:S):O(s,a?N:k,A))&&(n|=1<<r)}}return n}(this.mode,r,this.ply+1),this.moveHistory.push(e)}}var W=p.from_html("<tr></tr>"),P=p.from_html("<table><tbody></tbody></table>");let G={hash:"svelte-1st18yg",code:"table.svelte-1st18yg {background-color:#add8e6;border-collapse:separate;border-radius:12px;border-spacing:10px;margin:auto;margin-bottom:10px;&.w1 {background-color:#008000}&.w2 {background-color:#ffa07a}&.w3 {background-color:#a9a9a9}}"};var F=p.from_html("<td></td>");let V={hash:"svelte-1ey9tag",code:'td.svelte-1ey9tag {background-color:#98afc7;border-radius:0.5em;cursor:not-allowed;height:7rem;margin:0.6em;position:relative;width:7rem;&.win {background-color:#696969;}&:before, &:after {position:absolute;}&:before {color:#eee;left:0.3em;top:0; /* there is spacing from the font? */}&:after {color:white;bottom:0;left:0;right:0;top:0;text-align:center;line-height:7rem;}&:before {font-size:2em}&:after {font-size:5.6em}&.p0:after {font-size:4.6rem}&.hlose,\n  &.htie.noW {background-color:#cd5c5c}&.hwin,\n  &.htie.noL {background-color:#20b2aa}\n\n  /* current player can force a win */&.hwin {&.noL:after {content:"+T"}&.noT:after {content:"+-"}&.noL.noT:after {content:"+"}}\n\n  /* opponent can force a win */&.hlose {&.noW:after {content:"-T"}&.noT:after {content:"-+"}&.noW.noT:after {content:"-"}}\n\n  /* win by move number (hide if pending) */&[data-hintTurn]:not(:hover):before {content:attr(data-hintTurn)}\n\n  /* no player can force a win */&.htie {&.noL,\n    &.noW {opacity:0.5}&.noL.noW {opacity:inherit}&.noW:after {content:"T-"}&.noL:after {content:"T+"}&.noL.noW {background-color:#ffa500}&.noL.noW:after {content:"T"}}\n\n  /* made and pending moves */&.p1, &.p0.n1:hover {background-color:#9acd32;&:after {content:"X"}}&.p2, &.p0.n2:hover {background-color:#ff7f50;&:after {content:"O"}}&.p0.n1, &.p0.n2 {cursor:pointer;&:hover {opacity:0.5}}}'};p.delegate(["click"]);var $=r(135),L=r(142),H=r(160),U=p.from_html("<!> <!>",1),j=p.from_html('<span class="badge text-bg-secondary">spectating</span>.',1),J=p.from_html('<span class="badge text-bg-success">player X</span>.',1),B=p.from_html('<span class="badge text-bg-danger">player O</span>.',1),Y=p.from_html("<span> </span>"),Q=p.from_html("<p>You are <!> Get 3 in a row to win.</p> <!> <div>Moves: <!></div>",1),q=p.from_html('<span class="badge text-bg-secondary">spectating</span>.',1),z=p.from_html('<span class="badge text-bg-success">player X</span>.',1),X=p.from_html('<span class="badge text-bg-primary">player O</span>.',1),K=p.from_html("<button> </button>"),Z=p.from_html('<p>You are <!> </p> <div class="m-auto text-center"><div class="btn-group"></div></div>',1),ee=p.from_html('<button class="btn btn-outline-secondary d-block w-100 my-2">End Turn (Auto Random)</button>'),et=p.from_html("<!> <!>",1),er=p.from_html('<div class="mb-2"><!></div> <!> <!> <div> </div> <b>Lobby</b> <!>',1);p.delegate(["click"]);var en=p.from_html('<!> <div class="btn-group d-flex mb-3" role="group"><span class="input-group-text">Isomorphism</span> <button>Tic-Tac-Toe</button> <button>Pick15</button> <button>Words</button></div> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);p.delegate(["click"]),(0,r(102).A)(function(e,t){let r,n,a,o;p.push(t,!0);let s=new h.Ay,i=new D(s),d=p.derived(()=>i.room),l=p.derived(()=>i.canReset),c=p.derived(()=>i.pastGames),y=p.derived(()=>i.leaderboard),O=p.derived(()=>i.localClient),S=p.derived(()=>i.roundState),I=(0,g.C)("game/mp/_shared/name",""),A=(0,g.C)("game/mp/t3/isomorphism",0);var N=en(),k=p.first_child(N);(0,f.A)(k,{onchange:()=>i.sendRename(I.value),get value(){return I.value},set value($$value){I.value=$$value}});var w=p.sibling(k,2),M=p.sibling(p.child(w),2);M.__click=()=>{A.value=0};var ea=p.sibling(M,2);ea.__click=()=>{A.value=1};var eo=p.sibling(ea,2);eo.__click=()=>{A.value=2},p.reset(w);var es=p.sibling(w,2);p.bind_this((0,R.A)(es,{gameId:"t3-k9s5th8thueeuso1rkilqw",roomType:"T3Room",get gameRoom(){return i.room},onJoinedRoom:e=>i.enterGame(e,I.value),formatGameMode:e=>x((0,_.e)(C,e)),get roomCreateOptions(){return C}}),e=>r=e,()=>r);var ei=p.sibling(es,2);{let e=p.derived(()=>p.get(S)===T.mk.INTERMISSION);(0,b.A)(ei,{get inGame(){return p.get(d)},get isActive(){return i.localClient.active},get canReady(){return p.get(e)},get isReady(){return i.localClient.ready},onActive:()=>i.sendActive(),onReady:()=>i.sendReady(),onDisconnect:()=>(i.leaveGame(),r.refreshRooms()),children:(e,t)=>{var r,n,a,o,s,d,l,c,g,m,h,v,u,f;let b,E,_,R,y,O,S,I,N,k,w,M;r={get gameState(){return i},get t3Isomorphism(){return A.value}},p.push(r,!0),b=p.derived(()=>r.gameState.localClient),E=p.derived(()=>r.gameState.roundState),_=p.derived(()=>r.gameState.playing),R=p.derived(()=>r.gameState.canMove),y=p.derived(()=>r.gameState.myPlayer),O=p.derived(()=>r.gameState.drawOffer),S=p.derived(()=>r.gameState.boardState),I=p.derived(()=>r.gameState.boardBad),N=p.derived(()=>r.gameState.winner),k=p.derived(()=>r.gameState.moveHistory),w=[[1,5],[2,0],[3,7],[4,6],[5,4],[6,2],[7,1],[8,8],[9,3]],M=[["air",3],["bee",1],["bits",4],["book",7],["eat",0],["less",2],["lip",5],["lot",8],["soda",6]],n=er(),a=p.first_child(n),o=p.child(a),s=e=>{var t=p.text("Waiting for players…");p.append(e,t)},d=e=>{var t=U(),n=p.first_child(t),a=e=>{var t=p.text("Intermission:");p.append(e,t)},o=e=>{var t=p.comment(),r=p.first_child(t),n=e=>{var t=p.text("Make a move:");p.append(e,t)},a=e=>{var t=p.comment(),r=p.first_child(t),n=e=>{var t=p.text("Waiting for opponent to move…");p.append(e,t)},a=e=>{var t=p.text("Spectating:");p.append(e,t)};p.if(r,e=>{p.get(b).inRound?e(n):e(a,!1)},!0),p.append(e,t)};p.if(r,e=>{p.get(R)?e(n):e(a,!1)},!0),p.append(e,t)};p.if(n,e=>{p.get(E)===T.mk.INTERMISSION?e(a):e(o,!1)});var s=p.sibling(n,2);(0,$.A)(s,{get startTime(){return r.gameState.roundTimerStart},get endTime(){return r.gameState.roundTimerEnd},get active(){return r.gameState.room}}),p.append(e,t)},p.if(o,e=>{p.get(E)===T.mk.WAITING?e(s):e(d,!1)}),p.reset(a),l=p.sibling(a,2),c=e=>{var t,n,a,o=Q(),s=p.first_child(o),i=p.sibling(p.child(s)),d=e=>{var t=j();p.next(),p.append(e,t)},l=e=>{var t=p.comment(),r=p.first_child(t),n=e=>{var t=J();p.next(),p.append(e,t)},a=e=>{var t=B();p.next(),p.append(e,t)};p.if(r,e=>{1===p.get(y)?e(n):e(a,!1)},!0),p.append(e,t)};p.if(i,e=>{p.get(y)?e(l,!1):e(d)}),p.next(),p.reset(s);var c=p.sibling(s,2);{let e;t={get winner(){return p.get(N)},cell:(e,t=p.noop)=>{{var n,a;let o,s,i,d,l=p.derived(()=>p.get(S)>>(t()<<1)&3),c=p.derived(()=>p.get(R)&&!(p.get(I)>>t()&1)?p.get(y):0),g=p.derived(()=>p.get(S)>>(t()<<1)&3||!(p.get(I)>>t()&1)?"":"hlose");n={get winner(){return p.get(N)},get mark(){return p.get(l)},get markHover(){return p.get(c)},get hintClass(){return p.get(g)},onMove:()=>r.gameState.sendMove(t())},p.append_styles(e,V),s=p.prop(n,"markHover",3,0),i=p.prop(n,"hintClass",3,""),d=p.prop(n,"hintVal",3,0),(a=F()).__click=function(...e){n.onMove?.apply(this,e)},p.template_effect(()=>{o=p.set_class(a,1,`p${n.mark??""} n${(n.winner?0:s())??""} ${i()??""}`,"svelte-1ey9tag",o,{win:n.winner}),p.set_attribute(a,"data-hintturn",d()?d()>0?10-d():10+d():void 0)}),p.append(e,a)}},$$slots:{cell:!0}},p.append_styles(c,G),e=[[0,1,2],[3,4,5],[6,7,8]],n=P(),a=p.child(n),p.each(a,21,()=>e,p.index,(e,r)=>{var n=W();p.each(n,21,()=>p.get(r),p.index,(e,r)=>{var n=p.comment(),a=p.first_child(n);p.snippet(a,()=>t.cell,()=>p.get(r)),p.append(e,n)}),p.reset(n),p.append(e,n)}),p.reset(a),p.reset(n),p.template_effect(()=>p.set_class(n,1,`w${t.winner??""}`,"svelte-1st18yg")),p.append(c,n)}var g=p.sibling(c,2),m=p.sibling(p.child(g));p.each(m,17,()=>p.get(k),p.index,(e,t,r)=>{var n=Y(),a=p.child(n,!0);p.reset(n),p.template_effect(()=>{p.set_class(n,1,`badge text-bg${p.get(y)==(1&r)+1?"":"-outline"}-${1&r?"danger":"success"} me-1`),p.set_text(a,p.get(t))}),p.append(e,n)},e=>{p.next();var t=p.text("(none)");p.append(e,t)}),p.reset(g),p.append(e,o)},g=e=>{var t=Z(),n=p.first_child(t),a=p.sibling(p.child(n)),o=e=>{var t=q();p.next(),p.append(e,t)},s=e=>{var t=p.comment(),r=p.first_child(t),n=e=>{var t=z();p.next(),p.append(e,t)},a=e=>{var t=X();p.next(),p.append(e,t)};p.if(r,e=>{1===p.get(y)?e(n):e(a,!1)},!0),p.append(e,t)};p.if(a,e=>{p.get(y)?e(s,!1):e(o)});var i=p.sibling(a);p.reset(n);var d=p.sibling(n,2),l=p.child(d);p.each(l,21,()=>1===r.t3Isomorphism?w:M,p.index,(e,t)=>{var n=p.derived(()=>p.to_array(p.get(t),2));let a=()=>p.get(n)[1];var o=K();o.__click=()=>r.gameState.sendMove(a());var s=p.child(o,!0);p.reset(o),p.template_effect(e=>{p.set_class(o,1,`btn btn-${e??""}`),p.set_text(s,p.get(n)[0])},[()=>{var e,t,r,n;let o,s;return e=a(),t=p.get(S),r=p.get(I),n=p.get(R),o=t>>(e<<1)&3,s=r>>e&1,`${o?"":"outline-"}${["secondary","success","primary","danger"][o||3*!!s]}${o||s||!n?" disabled":""}`}]),p.append(e,o)}),p.reset(l),p.reset(d),p.template_effect(()=>p.set_text(i,` Take 3 ${["numbers that sum to 15","words that have the same letter"][r.t3Isomorphism-1]??""}.`)),p.append(e,t)},p.if(l,e=>{r.t3Isomorphism?e(g,!1):e(c)}),m=p.sibling(l,2),h=e=>{var t=et(),n=p.first_child(t),a=e=>{var t=ee();t.__click=()=>r.gameState.sendMoveEnd(),p.append(e,t)};p.if(n,e=>{p.get(R)&&e(a)});var o=p.sibling(n,2);(0,H.A)(o,{get drawOffer(){return p.get(O)},onResign:()=>r.gameState.sendResign(),onDrawOffer:()=>r.gameState.sendDrawOffer(),onDrawReject:()=>r.gameState.sendDrawReject()}),p.append(e,t)},p.if(m,e=>{p.get(_)&&e(h)}),v=p.sibling(m,2),u=p.child(v),p.reset(v),f=p.sibling(v,4),(0,L.A)(f,{get localClient(){return r.gameState.localClient},get inGame(){return r.gameState.roundPlayers},get inQueue(){return r.gameState.roundPlayerQueue},get spectators(){return r.gameState.spectators}}),p.template_effect(e=>p.set_text(u,`Game Mode: ${e??""}`),[()=>x(r.gameState.mode)]),p.append(e,n),p.pop()},$$slots:{default:!0}})}var ed=p.sibling(ei,2),el=p.child(ed),ec=p.child(el);(0,v.A)(ec,{get canClear(){return p.get(c).length},onClear:()=>i.clearHistory(),children:(e,t)=>{(0,E.A)(e,{get results(){return p.get(c)}})},$$slots:{default:!0}});var ep=p.sibling(ec,2);(0,u.A)(ep,{get leaderboard(){return p.get(y)},get localClient(){return p.get(O)},get inGame(){return p.get(d)},get canReset(){return p.get(l)},onReset:()=>i.sendReset(),columns:[["Streak",e=>e.streak],["Score",e=>e.score],["Win",e=>[e.wins,e.total]],["Loss",e=>[e.loss,e.total]],["Ties",e=>[e.ties,e.total]]]}),p.reset(el);var eg=p.sibling(el,2),em=p.child(eg);(0,m.A)(em,{get chatState(){return s},get canSend(){return i.room},onInput:e=>(0,h.Oo)(i,e)}),p.reset(eg),p.reset(ed),p.template_effect(()=>{n=p.set_class(M,1,"w-100 btn btn-outline-secondary",null,n,{active:!A.value}),a=p.set_class(ea,1,"w-50 btn btn-outline-secondary",null,a,{active:1===A.value}),o=p.set_class(eo,1,"w-50 btn btn-outline-secondary",null,o,{active:2===A.value})}),p.append(e,N),p.pop()})}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return a[e](r,r.exports,s),r.exports}s.m=a,s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],s.O=(t,r,n,a)=>{if(r){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[r,n,a];return}for(var i=1/0,o=0;o<e.length;o++){for(var[r,n,a]=e[o],d=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every(e=>s.O[e](r[l]))?r.splice(l--,1):(d=!1,a<i&&(i=a));if(d){e.splice(o--,1);var c=n();void 0!==c&&(t=c)}}return t},s.rv=()=>"1.7.3",t={103:0},s.O.j=e=>0===t[e],r=(e,r)=>{var n,a,[o,i,d]=r,l=0;if(o.some(e=>0!==t[e])){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(d)var c=d(s)}for(e&&e(r);l<o.length;l++)a=o[l],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(c)},(n=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n)),s.ruid="bundler=rspack@1.7.3";var i=s.O(void 0,["14","21","37","38","36","50"],()=>s(157));i=s.O(i)})();