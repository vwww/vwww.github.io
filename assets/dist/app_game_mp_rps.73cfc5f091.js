(()=>{"use strict";var e,t,s,r,i={154(e,t,s){s(1);var r,i,a,n,o,l,d=s(2),c=s(127),u=s(128),h=d.from_html('<div class="card mb-3"><div class="card-header"><h4 class="float-start">Past Games</h4> <button>Clear</button></div> <!></div>');d.delegate(["click"]);var g=s(130),p=s(131),m=s(132),_=s(133),b=s(134),v=s(139);function f(e){return(e=e.replace(/[^\w ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}function y(){let e=new v.k(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",e.debugBuf,e),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}function S(e,t){return e?`${e.name} (${e.cn})`:`<unknown${void 0===t?"":` (${t})`}>`}var T=s(141);class R{#e=d.state(-1);get cn(){return d.get(this.#e)}set cn(e){d.set(this.#e,e,!0)}#t=d.state("unnamed");get name(){return d.get(this.#t)}set name(e){d.set(this.#t,e,!0)}#s=d.state(!1);get active(){return d.get(this.#s)}set active(e){d.set(this.#s,e,!0)}#r=d.state(0);get rank(){return d.get(this.#r)}set rank(e){d.set(this.#r,e,!0)}#i=d.state(-1);get ping(){return d.get(this.#i)}set ping(e){d.set(this.#i,e,!0)}formatName(){return`${this.name} (${this.cn})`}processJoin(e,t){this.cn=e,this.ping=t.getInt(),this.name=f(t.getString(20))}readWelcome(e){let t=e.getInt();this.active=!!(1&t),this.name=f(e.getString(20)),this.ping=t>>1}}class I{#a;get canReset(){return d.get(this.#a)}set canReset(e){d.set(this.#a,e)}chat;PROTOCOL_VERSION=0;#n=d.state();get room(){return d.get(this.#n)}set room(e){d.set(this.#n,e,!0)}localClient;clients=[];#o=d.state(d.proxy([]));get leaderboard(){return d.get(this.#o)}set leaderboard(e){d.set(this.#o,e,!0)}#l=d.state(d.proxy([]));get spectators(){return d.get(this.#l)}set spectators(e){d.set(this.#l,e,!0)}constructor(e){this.chat=e,this.localClient=this.newClient(),this.#a=d.derived(()=>this.room&&this.localClient.canResetScore()),setTimeout(y,100)}setupGame(e){this.room?.disconnect(),this.room=e,e.registerRecv(t=>{if(this.room===e){let e=new v.k(t);try{for(;e.remaining>0;){let t=e.getInt(),s=this.MESSAGE_HANDLERS[t];if(!s)throw Error("tag type "+t);s.call(this,e)}}catch(t){console.error("neterr",t),console.log(e.debugBuf,e),this.room.disconnect()}}}),e.registerDisc(()=>{this.room===e?(this.chat.addSysMessage("You disconnected."),this.room=void 0):this.chat.addSysMessage("You disconnected from the old room.")}),this.chat.addSysMessage("You are joining the game.")}leaveGame(){this.room?.disconnect()}sendf(e,...t){this.room?.send(new T.U().putFmt(e,...t).toArray())}updatePlayers(){var e,t;let s,r;this.leaderboard=(e=this.clients,t=this.playersSortProps,s=e.filter(e=>e).sort((e,s)=>{for(let r of t){let t=r(e),i=r(s);if(t<i)return 1;if(t>i)return -1}return e.cn-s.cn}),r=1,s.forEach((e,i)=>{if(i){let a=s[i-1];t.some(t=>t(e)!==t(a))&&(r=i+1)}s[i].rank=r}),s.sort((e,t)=>t.active-e.active))}processWelcome(e){let t=e.getInt();t!==this.PROTOCOL_VERSION&&alert(`different protocol version (client: ${this.PROTOCOL_VERSION}, server: ${t})
refresh the page for updates?`),this.clients.length=0;let s=e.getCN();this.processWelcomeMode(e);for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let r=t===s?this.localClient:this.newClient();r.cn=t,r.readWelcome(e),this.clients[t]=r}this.processWelcomeGame(e),this.spectators=this.clients.filter(e=>!e.active),this.updatePlayers()}processJoin(e){let t=e.getCN();if(this.clients[t])throw Error("invalid join cn "+t);let s=this.newClient();s.processJoin(t,e),this.clients[t]=s,this.chat.playerJoined(s.formatName()),this.updatePlayers()}processLeave(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid leave cn "+t);s.active&&this.playerDeactivated(s),this.chat.playerLeft(s.formatName()),delete this.clients[t],this.updatePlayers()}processReset(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid reset cn "+t);s.resetScore(),this.updatePlayers(),this.chat.playerReset(s.formatName())}processRename(e){let t=e.getCN(),s=f(e.getString(20)),r=this.clients[t];if(!r)throw Error("invalid rename cn "+t);this.chat.playerRename(r.formatName(),s),r.name=s}processPing(e){this.sendPong(e.getInt())}processPingTime(e){for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=e.getInt(),r=this.clients[t];if(!r)throw Error("invalid ping cn "+t);r.ping=s}}processChat(e){let t=e.getCN(),s=e.getInt(),r=1==(3&s)?e.getInt():-1,i=e.getString(100),a=S(this.clients[t],t),n=this.clients[r],o=n?n===this.localClient?"you":S(n,r):void 0;this.chat.addChatMessage(a,i,s,o)}processActive(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid active cn "+t);if(s.active=!s.active)this.playerActivated(s),this.spectators=this.spectators.filter(e=>e!==s);else{this.playerDeactivated(s);let e=0,t=this.spectators.length;for(;e<t;){let r=e+t>>>1;this.spectators[r].cn<s.cn?e=r+1:t=r}this.spectators.splice(e,0,s)}this.updatePlayers()}}(r=n||(n={}))[r.WAITING=0]="WAITING",r[r.INTERMISSION=1]="INTERMISSION",r[r.ACTIVE=2]="ACTIVE";class E extends R{#d=d.state(!1);get ready(){return d.get(this.#d)}set ready(e){d.set(this.#d,e,!0)}#c=d.state(!1);get inRound(){return d.get(this.#c)}set inRound(e){d.set(this.#c,e,!0)}readWelcome(e){super.readWelcome(e),this.ready=!1,this.inRound=!1}}class N extends I{#u=d.state(d.proxy(n.WAITING));get roundState(){return d.get(this.#u)}set roundState(e){d.set(this.#u,e,!0)}#h=d.state(0);get roundTimerStart(){return d.get(this.#h)}set roundTimerStart(e){d.set(this.#h,e,!0)}#g=d.state(0);get roundTimerEnd(){return d.get(this.#g)}set roundTimerEnd(e){d.set(this.#g,e,!0)}#p=d.derived(()=>this.room&&this.localClient.active&&this.roundState==n.ACTIVE&&this.localClient.inRound);get playing(){return d.get(this.#p)}set playing(e){d.set(this.#p,e)}#m=d.state(d.proxy([]));get roundPlayers(){return d.get(this.#m)}set roundPlayers(e){d.set(this.#m,e,!0)}#_=d.state(d.proxy([]));get roundPlayerQueue(){return d.get(this.#_)}set roundPlayerQueue(e){d.set(this.#_,e,!0)}#b=d.state(d.proxy([]));get pastGames(){return d.get(this.#b)}set pastGames(e){d.set(this.#b,e,!0)}addHistory(e){this.pastGames.length>=100&&this.pastGames.pop(),this.pastGames.unshift(e)}clearHistory(){this.pastGames=[]}processWelcomeGame(e){let t=e.getInt();if(0===t)this.roundWait();else if(1===t){this.roundIntermission(e.getInt(),this.INTERMISSION_TIME);for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=this.clients[t];if(!s)throw Error("invalid welcome round ready cn "+t);s.ready=!0}}else 2===t&&this.roundStart(e.getInt(),this.ROUND_TIME);let s=[];for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let r=this.clients[t];if(!r)throw Error("invalid welcome round player cn "+t);r.inRound=!0,s.push(r)}this.roundPlayers=s;let r=[];for(let t=0;t<=64;t++){let t=e.getCN();if(t<0)break;let s=this.clients[t];if(!s)throw Error("invalid welcome round queue cn "+t);r.push(s)}this.roundPlayerQueue=r}processRoundWait(e){this.roundWait()}processRoundInterm(e){this.roundIntermission(this.INTERMISSION_TIME)}processRoundStart(e){this.unsetInRound();let t=[];for(let s=0;s<=64;s++){let s=e.getCN();if(s<0)break;let r=this.clients[s];if(!r)throw Error("invalid round start player cn "+s);r.inRound=!0,t.push(r)}this.roundPlayers=t,this.roundPlayerQueue=[],this.roundStart(this.ROUND_TIME)}processReady(e){let t=e.getCN(),s=this.clients[t];if(!s)throw Error("invalid ready cn "+t);s.ready=!s.ready}roundWait(){this.roundState=n.WAITING,this.unsetReady()}roundIntermission(e,t){this.roundState=n.INTERMISSION,this.setTimer(e,t),this.unsetReady()}roundStart(e,t){this.roundState=n.ACTIVE,this.setTimer(e,t),this.unsetReady()}setTimer(e,t=e){let s=Date.now()+e;this.roundTimerStart=s-Math.max(t,e),this.roundTimerEnd=s}unsetReady(){this.clients.forEach(e=>e.ready=!1)}unsetInRound(){this.clients.forEach(e=>e.inRound=!1)}playerActivated(e){this.roundPlayerQueue.push(e)}playerDeactivated(e){this.roundPlayers=this.roundPlayers.filter(t=>t!==e),this.roundPlayerQueue=this.roundPlayerQueue.filter(t=>t!==e),e.inRound=!1}}let C=[["optClassic","b",!1,"Classic","no streak bonuses"],["optInverted","b",!1,"Inverted","switch default winning and losing direction"],["optCount","b",!1,"Count","larger group never loses to smaller group, 2x size can reverse winning direction"],["optRoundTime","i",5e3,"Round Time / ms","duration of each round, in milliseconds",3e3,3e4],["optBotBalance","I",0,"Bot Balance","if negative, balance total players to absolute value; otherwise, add this number of bots",-0x20000000000000,0x20000000000000]];function x(e){let{optBotBalance:t}=e;return(e.optInverted?"Inverted ":"")+(e.optCount?"Count ":"")+(e.optClassic?"Classic":"Regular")+" ("+(t>0?t+" bots":t<0?"bots balance to "+-t:"no bots")+", "+e.optRoundTime+" ms)"}let k=E;class w extends N{}(i=o||(o={}))[i.WELCOME=0]="WELCOME",i[i.JOIN=1]="JOIN",i[i.LEAVE=2]="LEAVE",i[i.RESET=3]="RESET",i[i.RENAME=4]="RENAME",i[i.PING=5]="PING",i[i.PING_TIME=6]="PING_TIME",i[i.CHAT=7]="CHAT",i[i.ACTIVE=8]="ACTIVE",i[i.ROUND_WAIT=9]="ROUND_WAIT",i[i.ROUND_INTERM=10]="ROUND_INTERM",i[i.ROUND_START=11]="ROUND_START",i[i.READY=12]="READY",i[i.END_ROUND=13]="END_ROUND",i[i.MOVE_CONFIRM=14]="MOVE_CONFIRM",(a=l||(l={}))[a.RESET=0]="RESET",a[a.RENAME=1]="RENAME",a[a.PONG=2]="PONG",a[a.CHAT=3]="CHAT",a[a.ACTIVE=4]="ACTIVE",a[a.READY=5]="READY",a[a.MOVE=6]="MOVE";class M extends k{#v=d.state(0);get roundScore(){return d.get(this.#v)}set roundScore(e){d.set(this.#v,e,!0)}#f=d.state(0);get roundStreak(){return d.get(this.#f)}set roundStreak(e){d.set(this.#f,e,!0)}#y=d.state(0);get roundWins(){return d.get(this.#y)}set roundWins(e){d.set(this.#y,e,!0)}#S=d.state(0);get roundLosses(){return d.get(this.#S)}set roundLosses(e){d.set(this.#S,e,!0)}#T=d.state(0);get roundTies(){return d.get(this.#T)}set roundTies(e){d.set(this.#T,e,!0)}#R=d.state(0n);get battleWins(){return d.get(this.#R)}set battleWins(e){d.set(this.#R,e,!0)}#I=d.state(0n);get battleLosses(){return d.get(this.#I)}set battleLosses(e){d.set(this.#I,e,!0)}#E=d.state(0n);get battleTies(){return d.get(this.#E)}set battleTies(e){d.set(this.#E,e,!0)}#N=d.state(0);get roundTotal(){return d.get(this.#N)}set roundTotal(e){d.set(this.#N,e,!0)}#C=d.state(0n);get battleTotal(){return d.get(this.#C)}set battleTotal(e){d.set(this.#C,e,!0)}#x=d.state(0n);get battleScore(){return d.get(this.#x)}set battleScore(e){d.set(this.#x,e,!0)}resetScore(){this.roundScore=0,this.roundStreak=0,this.roundWins=0,this.roundLosses=0,this.roundTies=0,this.battleWins=0n,this.battleLosses=0n,this.battleTies=0n,this.roundTotal=0,this.battleTotal=0n,this.battleScore=0n}canResetScore(){return this.roundTotal}readWelcome(e){super.readWelcome(e),this.roundScore=e.getInt(),this.roundStreak=e.getInt(),this.roundWins=e.getInt(),this.roundLosses=e.getInt(),this.roundTies=e.getInt(),this.battleWins=e.getUint64(),this.battleLosses=e.getUint64(),this.battleTies=e.getUint64(),this.roundTotal=this.roundWins+this.roundLosses+this.roundTies,this.battleTotal=this.battleWins+this.battleLosses+this.battleTies,this.battleScore=this.battleWins-this.battleLosses}}class O extends w{#k=d.state(d.proxy((0,_.q)(C)));get mode(){return d.get(this.#k)}set mode(e){d.set(this.#k,e,!0)}#w=d.state(0);get pendingMove(){return d.get(this.#w)}set pendingMove(e){d.set(this.#w,e,!0)}get ROUND_TIME(){return this.mode.optRoundTime}INTERMISSION_TIME=5e3;newClient(){return new M}enterGame(e,t){this.setupGame(e),this.sendf("is",this.PROTOCOL_VERSION,t)}sendReset(){this.sendf("i",l.RESET)}sendRename(e){this.sendf("is",l.RENAME,e)}sendPong(e){this.sendf("i2",l.PONG,e)}sendChat(e,t,s=-1){this.sendf("i3s",l.CHAT,t,s,e.slice(0,100))}sendActive(){this.sendf("i",l.ACTIVE)}sendReady(){this.sendf("i",l.READY)}sendMove(e){this.sendf("i2",l.MOVE,e)}MESSAGE_HANDLERS={[o.WELCOME]:this.processWelcome,[o.JOIN]:this.processJoin,[o.LEAVE]:this.processLeave,[o.RESET]:this.processReset,[o.RENAME]:this.processRename,[o.PING]:this.processPing,[o.PING_TIME]:this.processPingTime,[o.CHAT]:this.processChat,[o.ACTIVE]:this.processActive,[o.ROUND_WAIT]:this.processRoundWait,[o.ROUND_INTERM]:this.processRoundInterm,[o.ROUND_START]:this.processRoundStart,[o.READY]:this.processReady,[o.END_ROUND]:this.processEndRound,[o.MOVE_CONFIRM]:this.processMoveConfirm};processWelcomeMode(e){let t=e.get();this.mode.optClassic=!!(1&t),this.mode.optInverted=!!(2&t),this.mode.optCount=!!(4&t),this.mode.optRoundTime=e.getInt(),this.mode.optBotBalance=e.getInt64()}processMoveConfirm(e){this.pendingMove=e.getInt()}processEndRound(e){let t,s=e.getInt(),r=[A(e.getInt()),A(e.getInt()),A(e.getInt())],i=[e.getUint64(),e.getUint64(),e.getUint64()],a=i.slice(),n=Math.min(e.getInt(),this.clients.length),o=function(e,t){let s=[[0n,0n,0n],[0n,0n,0n],[0n,0n,0n]];for(let r=0;r<3;r++)e[r]&&(s[r][1]+=e[r]-1n,s[r][1+t[r]]+=e[(r+1)%3],s[r][1-t[(r+2)%3]]+=e[(r+2)%3]);return s}(i,r),l=o.map(e=>({ltw:e,players:[]}));for(let s=0;s<n;s++){let s=e.getCN(),r=e.getInt(),i=this.clients[s];if(!(i&&0<=r&&r<3))continue;a[r]--,l[r].players.push(i.formatName());let n=o[r];i.battleLosses+=n[0],i.battleTies+=n[1],i.battleWins+=n[2],i.battleTotal+=n[0]+n[1]+n[2],i.battleScore+=n[2]-n[0],n[2]>n[0]?(i.roundWins++,i.roundStreak<0&&(i.roundStreak=0),i.roundStreak++,i.roundScore+=i.roundStreak>2&&!this.mode.optClassic?i.roundStreak-1:1):n[2]<n[0]?(i.roundLosses++,i.roundStreak>0&&(i.roundStreak=0),i.roundStreak--,i.roundScore--):i.roundTies++,i.roundTotal++,i===this.localClient&&(l[r].meIndex=l[r].players.length-1,t={move:r,battleLTW:n,newStreak:i.roundStreak})}let d={local:t,outcomes:r,count:i,botCount:a,moves:l,detRandBits:s};this.updatePlayers(),this.addHistory(d)}playersSortProps=[e=>e.roundStreak,e=>e.roundScore,e=>e.roundWins,e=>e.battleWins-e.battleLosses,e=>e.battleWins]}function A(e){return e<0?-1:+(e>0)}var P=d.from_html('<p>You: <span class="badge text-bg-primary"> </span> streak; <span class="badge text-bg-success"> </span> win, <span class="badge text-bg-danger"> </span> lose, <span class="badge text-bg-warning"> </span> tie</p>'),W=d.from_html("<tr><td> </td><td> <span><!> <!></span> </td><td> </td></tr>"),L=d.from_html("<span> </span>"),G=d.from_html('<span class="badge text-bg-outline-secondary"> </span>'),D=d.from_html("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> <!> <!> <!></td></tr>"),$=d.from_html('<li class="list-group-item"><!> <div class="row"><div class="col-auto"><table class="table table-sm"><tbody><tr class="text-center"><th>#</th><th>Outcome</th><th>#</th></tr><!></tbody></table></div> <div class="col-auto"><table class="table table-sm"><tbody><tr class="text-center"><th>Move</th><th>Wins</th><th>Ties</th><th>Loss</th><th>Score</th><th>Players</th></tr><!></tbody></table></div></div></li>'),U=d.from_html('<li class="list-group-item">No past games!</li>'),V=d.from_html('<ul class="list-group list-group-flush overflow-auto" style="max-height: 15rem"></ul>'),B=s(135),Y=s(142),j=d.from_html("<!> <!>",1),Q=d.from_html("<button> </button>"),J=d.from_html('<div class="btn-group d-flex mb-3" role="group"><span class="input-group-text">Next Move</span> <!></div>'),z=d.from_html('<div class="mb-2"><!></div> <div> </div> <!> <!>',1);d.delegate(["click"]);var H=s(108),q=d.from_html('<!> <!> <!> <div class="row"><div class="col-12 col-xl-8"><!> <!></div> <div class="col-12 col-xl-4 mb-3"><!></div></div>',1);(0,s(102).A)(function(e,t){let s,r;d.push(t,!0);let i=new u.Ay,a=new O(i),o=d.derived(()=>a.room),l=d.derived(()=>a.canReset),v=d.derived(()=>a.pastGames),f=d.derived(()=>a.leaderboard),y=d.derived(()=>a.localClient),S=d.derived(()=>a.roundState),T=(0,H.C)("game/mp/_shared/name","");var R,I,E,N,k,w=q(),M=d.first_child(w);(0,p.A)(M,{onchange:()=>a.sendRename(T.value),get value(){return T.value},set value($$value){T.value=$$value}});var A=d.sibling(M,2);d.bind_this((0,b.A)(A,{gameId:"rps-oj40aopjv0w7gnc1pj9zpq",roomType:"RPSRoom",get gameRoom(){return a.room},onJoinedRoom:e=>a.enterGame(e,T.value),formatGameMode:e=>x((0,_.e)(C,e)),get roomCreateOptions(){return C}}),e=>s=e,()=>s);var F=d.sibling(A,2);{let e=d.derived(()=>d.get(S)===n.INTERMISSION);(0,m.A)(F,{get inGame(){return d.get(o)},get isActive(){return a.localClient.active},get canReady(){return d.get(e)},get isReady(){return a.localClient.ready},onActive:()=>a.sendActive(),onReady:()=>a.sendReady(),onDisconnect:()=>(a.leaveGame(),s.refreshRooms()),children:(e,t)=>{var s,r,i,o,l,c,u,h,g,p,m;let _,b,v;s={get gameState(){return a}},d.push(s,!0),_=d.derived(()=>s.gameState.localClient),b=d.derived(()=>s.gameState.roundState),v=d.derived(()=>d.get(_).active&&d.get(b)==n.ACTIVE&&d.get(_).inRound),r=z(),i=d.first_child(r),o=d.child(i),l=e=>{var t=d.text("Waiting for players…");d.append(e,t)},c=e=>{var t=j(),r=d.first_child(t),i=e=>{var t=d.text("Intermission:");d.append(e,t)},a=e=>{var t=d.comment(),s=d.first_child(t),r=e=>{var t=d.text("Make a move:");d.append(e,t)},i=e=>{var t=d.text("Results are coming soon:");d.append(e,t)};d.if(s,e=>{d.get(v)?e(r):e(i,!1)},!0),d.append(e,t)};d.if(r,e=>{d.get(b)===n.INTERMISSION?e(i):e(a,!1)});var o=d.sibling(r,2);(0,B.A)(o,{get startTime(){return s.gameState.roundTimerStart},get endTime(){return s.gameState.roundTimerEnd},get active(){return s.gameState.room}}),d.append(e,t)},d.if(o,e=>{d.get(b)===n.WAITING?e(l):e(c,!1)}),d.reset(i),u=d.sibling(i,2),h=d.child(u),d.reset(u),g=d.sibling(u,2),p=e=>{var t=J(),r=d.sibling(d.child(t),2);d.each(r,16,()=>["Auto","\uD83E\uDD4C Rock","\uD83D\uDCC4 Paper","✂ Scissors"],d.index,(e,t,r)=>{let i;var a=Q();a.__click=()=>s.gameState.sendMove(r);var n=d.child(a,!0);d.reset(a),d.template_effect(()=>{i=d.set_class(a,1,"w-100 btn btn-outline-secondary",null,i,{active:s.gameState.pendingMove===r}),d.set_text(n,t)}),d.append(e,a)}),d.reset(t),d.append(e,t)},d.if(g,e=>{d.get(v)&&e(p)}),m=d.sibling(g,2),(0,Y.A)(m,{get localClient(){return s.gameState.localClient},get inGame(){return s.gameState.roundPlayers},get inQueue(){return s.gameState.roundPlayerQueue},get spectators(){return s.gameState.spectators}}),d.template_effect(e=>d.set_text(h,`Game Mode: ${e??""}`),[()=>x(s.gameState.mode)]),d.append(e,r),d.pop()},$$slots:{default:!0}})}var K=d.sibling(F,2),X=d.child(K),Z=d.child(X);R={get canClear(){return d.get(v).length},onClear:()=>a.clearHistory(),children:(e,t)=>{var s,r;let i;s={get results(){return d.get(v)}},d.push(s,!0),i=[{a:"R",b:"P",text:[["covers","hides"],["matches"],["punctures"]],textBitShift:0},{a:"P",b:"S",text:[["cuts","slices"],["matches"],["jams"]],textBitShift:1},{a:"S",b:"R",text:[["smashes","obliterates","breaks","destroys"],["matches"],["slashes","scratches"]],textBitShift:2}],r=V(),d.each(r,21,()=>s.results,d.index,(e,t)=>{var s=$(),r=d.child(s),a=e=>{var s=P(),r=d.sibling(d.child(s)),i=d.child(r);d.reset(r);var a=d.sibling(r,2),n=d.child(a,!0);d.reset(a);var o=d.sibling(a,2),l=d.child(o,!0);d.reset(o);var c=d.sibling(o,2),u=d.child(c,!0);d.reset(c),d.next(),d.reset(s),d.template_effect(()=>{d.set_text(i,`${d.get(t).local.newStreak>0?"+":""}${d.get(t).local.newStreak??""}`),d.set_text(n,d.get(t).local.battleLTW[2]),d.set_text(l,d.get(t).local.battleLTW[0]),d.set_text(u,d.get(t).local.battleLTW[1])}),d.append(e,s)};d.if(r,e=>{d.get(t).local&&e(a)});var n=d.sibling(r,2),o=d.child(n),l=d.child(o),c=d.child(l),u=d.sibling(d.child(c));d.each(u,17,()=>i,d.index,(e,s,r)=>{let i=d.derived(()=>(r+1)%3),a=d.derived(()=>d.get(t).local?.move);var n=W(),o=d.child(n),l=d.child(o,!0);d.reset(o);var c=d.sibling(o),u=d.child(c),h=d.sibling(u),g=d.child(h),p=e=>{var t=d.text("<");d.append(e,t)};d.if(g,e=>{d.get(t).outcomes[r]>0&&e(p)});var m=d.sibling(g),_=d.sibling(m),b=e=>{var t=d.text(">");d.append(e,t)};d.if(_,e=>{d.get(t).outcomes[r]<0&&e(b)}),d.reset(h);var v=d.sibling(h);d.reset(c);var f=d.sibling(c),y=d.child(f,!0);d.reset(f),d.reset(n),d.template_effect(e=>{d.set_class(o,1,d.clsx(d.get(a)==r?"table-danger":d.get(a)==d.get(i)?"table-primary":"")),d.set_text(l,d.get(t).count[(r+1)%3]),d.set_text(u,`${d.get(s).b??""} `),d.set_class(h,1,`badge text-bg-${d.get(t).outcomes[r]<0?"primary":d.get(t).outcomes[r]>0?"danger":"secondary"}`),d.set_text(m,` ${e??""} `),d.set_text(v,` ${d.get(s).a??""}`),d.set_class(f,1,d.clsx(d.get(a)==d.get(i)?"table-success":d.get(a)==r?"table-primary":"")),d.set_text(y,d.get(t).count[r])},[()=>{var e,i,a;let n;return e=d.get(s).text[d.get(t).outcomes[r]+1],i=d.get(s).textBitShift,a=d.get(t).detRandBits,n=e.length-1,e[a>>i&n]}]),d.append(e,n)}),d.reset(c),d.reset(l),d.reset(o);var h=d.sibling(o,2),g=d.child(h),p=d.child(g),m=d.sibling(d.child(p));d.each(m,17,()=>d.get(t).moves,d.index,(e,s,r)=>{let i,a=d.derived(()=>d.get(s).ltw[2]-d.get(s).ltw[0]);var n=D(),o=d.child(n),l=d.child(o,!0);d.reset(o);var c=d.sibling(o),u=d.child(c,!0);d.reset(c);var h=d.sibling(c),g=d.child(h,!0);d.reset(h);var p=d.sibling(h),m=d.child(p,!0);d.reset(p);var _=d.sibling(p),b=d.child(_);d.reset(_);var v=d.sibling(_),f=d.child(v),y=d.sibling(f);d.each(y,17,()=>d.get(s).players,d.index,(e,t,r,i)=>{var a=L(),n=d.child(a,!0);d.reset(a),d.template_effect(()=>{d.set_class(a,1,`badge text-bg${r==d.get(s).meIndex?"":"-outline"}-secondary`),d.set_text(n,d.get(t))}),d.append(e,a)});var S=d.sibling(y,2),T=e=>{var s=G(),i=d.child(s);d.reset(s),d.template_effect(()=>d.set_text(i,`+${d.get(t).botCount[r]??""}`)),d.append(e,s)};d.if(S,e=>{d.get(t).botCount[r]&&e(T)});var R=d.sibling(S,2),I=e=>{var t=d.text("nobody");d.append(e,t)};d.if(R,e=>{d.get(s).players.length||d.get(t).botCount[r]||e(I)}),d.reset(v),d.reset(n),d.template_effect(()=>{i=d.set_class(n,1,"",null,i,{"table-primary":d.get(t).local&&d.get(t).local.move===r}),d.set_text(l,["Rock","Paper","Scissors"][r]),d.set_text(u,d.get(s).ltw[2]),d.set_text(g,d.get(s).ltw[1]),d.set_text(m,d.get(s).ltw[0]),d.set_text(b,`${d.get(a)>0?"+":""}${d.get(a)??""}`),d.set_text(f,`${d.get(t).count[r]??""}: `)}),d.append(e,n)}),d.reset(p),d.reset(g),d.reset(h),d.reset(n),d.reset(s),d.append(e,s)},e=>{var t=U();d.append(e,t)}),d.reset(r),d.append(e,r),d.pop()},$$slots:{default:!0}},I=h(),E=d.child(I),(N=d.sibling(d.child(E),2)).__click=function(...e){R.onClear?.apply(this,e)},d.reset(E),k=d.sibling(E,2),d.snippet(k,()=>R.children),d.reset(I),d.template_effect(()=>r=d.set_class(N,1,"btn btn-sm btn-danger float-end",null,r,{"d-none":!R.canClear})),d.append(Z,I);var ee=d.sibling(Z,2);(0,g.A)(ee,{get leaderboard(){return d.get(f)},get localClient(){return d.get(y)},get inGame(){return d.get(o)},get canReset(){return d.get(l)},onReset:()=>a.sendReset(),columns:[["Streak",e=>e.roundStreak],["Score",e=>e.roundScore],["Round Win",e=>[e.roundWins,e.roundTotal]],["Tie",e=>[e.roundTies,e.roundTotal]],["Loss",e=>[e.roundLosses,e.roundTotal]],["Battle Score",e=>e.battleScore],["Win",e=>[e.battleWins,e.battleTotal]],["Tie",e=>[e.battleTies,e.battleTotal]],["Loss",e=>[e.battleLosses,e.battleTotal]]]}),d.reset(X);var et=d.sibling(X,2),es=d.child(et);(0,c.A)(es,{get chatState(){return i},get canSend(){return a.room},onInput:e=>(0,u.Oo)(a,e)}),d.reset(et),d.reset(K),d.append(e,w),d.pop()})},122(e,t,s){s.d(t,{JY:()=>r});function r(e){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="";for(;e--;)s+=t[Math.random()*t.length|0];return s}},2(e,t,s){s.r(t),s.d(t,{CLASS:()=>w.tp,FILENAME:()=>i.Uh,HMR:()=>i.OM,NAMESPACE_SVG:()=>i.pQ,STYLE:()=>w.Y,aborted:()=>et.QH,action:()=>x.X,active_effect:()=>el.Fg,add_legacy_event_listener:()=>F.oe,add_locations:()=>l.D,add_svelte_meta:()=>a.G7,animation:()=>L.lY,append:()=>K.BC,append_styles:()=>C.k,apply:()=>O.Bb,assign:()=>n.kp,assign_and:()=>n._R,assign_nullish:()=>n.Sc,assign_or:()=>n.im,async:()=>p.b,async_derived:()=>ee.zx,attach:()=>k.K,attachment:()=>r.r,attr:()=>ep.CF,attribute_effect:()=>w.p_,autofocus:()=>A.wC,await:()=>_.x,bind_active_element:()=>G.m,bind_buffered:()=>$.w$,bind_checked:()=>D.mS,bind_content_editable:()=>Q.b1,bind_current_time:()=>$.M$,bind_element_size:()=>Y.B,bind_ended:()=>$.$T,bind_files:()=>D.md,bind_focused:()=>Q.oP,bind_group:()=>D.CJ,bind_muted:()=>$.iX,bind_online:()=>U.s,bind_paused:()=>$.lY,bind_playback_rate:()=>$.hc,bind_played:()=>$.YL,bind_prop:()=>V.E,bind_property:()=>Q.IY,bind_ready_state:()=>$.mM,bind_resize_observer:()=>Y.y,bind_seekable:()=>$.xx,bind_seeking:()=>$.Je,bind_select_value:()=>B.$t,bind_this:()=>j.L,bind_value:()=>D.oJ,bind_volume:()=>$.Jo,bind_window_scroll:()=>J.f,bind_window_size:()=>J.r,boundary:()=>ea.pP,bubble_event:()=>F.Ib,check_target:()=>u.X,child:()=>eg.jf,cleanup_styles:()=>o.O,clsx:()=>ep.$z,comment:()=>K.Im,component:()=>I.s,create_custom_element:()=>eh.Q,create_ownership_validator:()=>c.a,css_props:()=>f.d,customizable_select:()=>P.M,deep_read:()=>el.o1,deep_read_state:()=>el.iT,deferred_template_effect:()=>et.vc,delegate:()=>O.Mm,derived:()=>ee.eO,derived_safe_equal:()=>ee.Xd,document:()=>eg.gk,each:()=>y._,eager:()=>Z.no,effect:()=>et.QZ,effect_root:()=>et.Fc,effect_tracking:()=>et.oJ,element:()=>E.N,equals:()=>ev.aI,event:()=>O.f0,exclude_from_object:()=>el.SE,fallback:()=>e_.Np,first_child:()=>eg.es,flush:()=>Z.qX,for_await_track_reactivity_loss:()=>X.IP,from_html:()=>K.vU,from_mathml:()=>K.$N,from_svg:()=>K._i,from_tree:()=>K.el,get:()=>el.Jt,head:()=>N.d,hmr:()=>d.c,html:()=>S.q,hydrate_template:()=>z.PK,if:()=>b.A,index:()=>y.P,init:()=>q.T,init_select:()=>B.wf,inspect:()=>g.N,invalid_default_snippet:()=>eb.y8,invalidate_inner_signals:()=>en.p,invalidate_store:()=>ei.qB,invoke_error_boundary:()=>ey.n,key:()=>v.E,legacy_api:()=>u.j,legacy_pre_effect:()=>et.M3,legacy_pre_effect_reset:()=>et.iq,legacy_rest_props:()=>er.gj,log_if_contains_state:()=>ef.f,mark_store_binding:()=>ei.io,mutable_source:()=>es.zg,mutate:()=>es.Tk,next:()=>z.K2,noop:()=>e_.lQ,once:()=>H.Oo,pending:()=>ea.Ub,pop:()=>a.uY,preventDefault:()=>H.wo,prevent_snippet_stringification:()=>eb.bk,prop:()=>er._w,props_id:()=>K.zA,proxy:()=>eu.B,push:()=>a.VC,raf:()=>ec.e,reactive_import:()=>F.Iu,remove_input_defaults:()=>w.R0,remove_textarea_child:()=>A.VU,render_effect:()=>et.VB,replay_events:()=>O.ES,reset:()=>z.cL,rest_props:()=>er.iR,run:()=>X.eF,run_after_blockers:()=>X.db,safe_get:()=>el.$i,sanitize_slots:()=>T.i,save:()=>X.UN,select_option:()=>B.fs,selectedcontent:()=>P.B,self:()=>H.bg,set:()=>es.hZ,set_attribute:()=>w.aI,set_checked:()=>w.BY,set_class:()=>M.y,set_custom_element_data:()=>w.p,set_default_checked:()=>w.V$,set_default_value:()=>w.xp,set_selected:()=>w.$Z,set_style:()=>W.h,set_text:()=>eo.j,set_value:()=>w.to,set_xlink_attribute:()=>w.To,setup_stores:()=>ei.DZ,sibling:()=>eg.hg,slot:()=>T.N,snapshot:()=>em.P,snippet:()=>R.UA,spread_props:()=>er.Du,state:()=>es.wk,stopImmediatePropagation:()=>H.CA,stopPropagation:()=>H.dG,store_get:()=>ei.Hz,store_mutate:()=>ei.hY,store_set:()=>ei.fT,store_unsub:()=>ei.QK,strict_equals:()=>ev.IP,tag:()=>h.Tc,tag_proxy:()=>h._e,template_effect:()=>et.vN,text:()=>K.Qq,tick:()=>el.io,to_array:()=>e_._N,trace:()=>h.uP,track_reactivity_loss:()=>X.t_,transition:()=>L.kY,trusted:()=>H.IZ,untrack:()=>el.vz,update:()=>es.yo,update_legacy_props:()=>F.hp,update_pre:()=>es.cE,update_pre_prop:()=>er.CB,update_pre_store:()=>ei.IL,update_prop:()=>er.k$,update_store:()=>ei.yb,user_effect:()=>et.MW,user_pre_effect:()=>et.Go,validate_binding:()=>ed.R,validate_dynamic_element_tag:()=>eb.Bm,validate_each_keys:()=>ed.e,validate_snippet_args:()=>m.j,validate_store:()=>eb.T3,validate_void_dynamic_element:()=>eb.zA,wait:()=>X.uk,window:()=>eg.Lk,with_script:()=>K.jB,wrap_snippet:()=>R.DK});var r=s(3),i=s(4),a=s(23),n=s(46),o=s(47),l=s(48),d=s(49),c=s(50),u=s(51),h=s(20),g=s(52),p=s(53),m=s(111),_=s(54),b=s(55),v=s(56),f=s(57),y=s(58),S=s(59),T=s(60),R=s(43),I=s(61),E=s(62),N=s(66),C=s(67),x=s(68),k=s(69),w=s(70),M=s(72),O=s(39),A=s(34),P=s(75),W=s(73),L=s(63),G=s(76),D=s(77),$=s(78),U=s(79),V=s(80),B=s(74),Y=s(81),j=s(82),Q=s(83),J=s(84),z=s(13),H=s(85),q=s(86),F=s(87),K=s(40),X=s(32),Z=s(24),ee=s(29),et=s(9),es=s(17),er=s(88),ei=s(89),ea=s(30),en=s(35),eo=s(38),el=s(6),ed=s(92),ec=s(64),eu=s(16),eh=s(93),eg=s(12),ep=s(71),em=s(21),e_=s(8),eb=s(44),ev=s(15),ef=s(95),ey=s(26)}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return i[e](s,s.exports,n),s.exports}n.m=i,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],n.O=(t,s,r,i)=>{if(s){i=i||0;for(var a=e.length;a>0&&e[a-1][2]>i;a--)e[a]=e[a-1];e[a]=[s,r,i];return}for(var o=1/0,a=0;a<e.length;a++){for(var[s,r,i]=e[a],l=!0,d=0;d<s.length;d++)(!1&i||o>=i)&&Object.keys(n.O).every(e=>n.O[e](s[d]))?s.splice(d--,1):(l=!1,i<o&&(o=i));if(l){e.splice(a--,1);var c=r();void 0!==c&&(t=c)}}return t},n.rv=()=>"1.7.3",t={100:0},n.O.j=e=>0===t[e],s=(e,s)=>{var r,i,[a,o,l]=s,d=0;if(a.some(e=>0!==t[e])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)var c=l(n)}for(e&&e(s);d<a.length;d++)i=a[d],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},(r=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r)),n.ruid="bundler=rspack@1.7.3";var o=n.O(void 0,["14","21","37","38","36"],()=>n(154));o=n.O(o)})();