(()=>{"use strict";var e,t,n,r,o={162(e,t,n){let r;n(1);var o,a,i,l,s=n(2),u=n(5);function c(e,t){return e&3<<(t<<1)}function d(e,t){return!function(e,t,n=t){return t.some((t,r)=>t===(e&n[r]))}(e,1&t?p:v)?9===t?l.Tie:l.None:1&t?l.P1:l.P2}(o=i||(i={}))[o.None=0]="None",o[o.P1=1]="P1",o[o.P2=2]="P2",(a=l||(l={}))[a.None=0]="None",a[a.P1=1]="P1",a[a.P2=2]="P2",a[a.Tie=3]="Tie";function g(e){return e.reduceRight((e,t)=>t-1+3*e,0)}let p=[86016,1344,21,66576,16644,4161,65793,4368],v=[172032,2688,42,133152,33288,8322,131586,8736],b=[["Human"],["First",function(e){for(let t=0;t<9;++t)if(!c(e,t))return[[t],"First bot always chooses the first available slot."];throw Error("No slots left for nice bot")}],["Random",function(e,t){let n=[];for(let t=0;t<9;++t)c(e,t)||n.push(t);return[n,w(n.length,t)]}],["Nice",function(e,t,n){return _(e,t,n.map(e=>e<l.Tie?3^e:e),"lose")}],["Optimal",function(e,t,n){return _(e,t,n,"win")}]],f={};function m(e){return f[e]}function h(e,t){let n=[e[0],0,0,0];for(let r=1;r<=3;r++)n[t[r-1]]+=e[r];return n}function w(e,t){return"The bot "+(1===e?"really had no choice":"had "+e+" choices")+" for move #"+t+"."}function _(e,t,n,r){let o=f[e][0][g(n)],a=o[0]>0&&10-o[0]-t>>1,i=o[1];return[i,(a?a<2?`The bot is <strong>about to ${r}</strong>. `:`The bot <strong>will ${r}</strong> within ${a} moves. `:"")+w(i.length,t+1)]}var y=s.from_html("<tr></tr>"),x=s.from_html("<table><tbody></tbody></table>");let k={hash:"svelte-1st18yg",code:"table.svelte-1st18yg {background-color:#add8e6;border-collapse:separate;border-radius:12px;border-spacing:10px;margin:auto;margin-bottom:10px;&.w1 {background-color:#008000}&.w2 {background-color:#ffa07a}&.w3 {background-color:#a9a9a9}}"};var T=s.from_html("<td></td>");let $={hash:"svelte-1ey9tag",code:'td.svelte-1ey9tag {background-color:#98afc7;border-radius:0.5em;cursor:not-allowed;height:7rem;margin:0.6em;position:relative;width:7rem;&.win {background-color:#696969;}&:before, &:after {position:absolute;}&:before {color:#eee;left:0.3em;top:0; /* there is spacing from the font? */}&:after {color:white;bottom:0;left:0;right:0;top:0;text-align:center;line-height:7rem;}&:before {font-size:2em}&:after {font-size:5.6em}&.p0:after {font-size:4.6rem}&.hlose,\n  &.htie.noW {background-color:#cd5c5c}&.hwin,\n  &.htie.noL {background-color:#20b2aa}\n\n  /* current player can force a win */&.hwin {&.noL:after {content:"+T"}&.noT:after {content:"+-"}&.noL.noT:after {content:"+"}}\n\n  /* opponent can force a win */&.hlose {&.noW:after {content:"-T"}&.noT:after {content:"-+"}&.noW.noT:after {content:"-"}}\n\n  /* win by move number (hide if pending) */&[data-hintTurn]:not(:hover):before {content:attr(data-hintTurn)}\n\n  /* no player can force a win */&.htie {&.noL,\n    &.noW {opacity:0.5}&.noL.noW {opacity:inherit}&.noW:after {content:"T-"}&.noL:after {content:"T+"}&.noL.noW {background-color:#ffa500}&.noL.noW:after {content:"T"}}\n\n  /* made and pending moves */&.p1, &.p0.n1:hover {background-color:#9acd32;&:after {content:"X"}}&.p2, &.p0.n2:hover {background-color:#ff7f50;&:after {content:"O"}}&.p0.n1, &.p0.n2 {cursor:pointer;&:hover {opacity:0.5}}}'};s.delegate(["click"]);var L=s.from_html("<td> </td>"),O=s.from_html("<tr><td></td><td> </td><td> </td><!></tr>"),P=s.from_html('<table class="table table-striped table-bordered"><thead><tr><th>Move</th><th>Paths</th><th>Position</th><th>X Win</th><th>O Win</th><th>Tie</th></tr></thead><tbody></tbody></table>');function M(e,t,n=!1){let r=s.state(s.proxy(t));function o(e){return"undefined"===e?void 0:JSON.parse(e)}if(window.localStorage){let a=localStorage.getItem(e);null!==a&&s.set(r,o(a),!0),s.user_effect(()=>localStorage.setItem(e,void 0===s.get(r)?"undefined":JSON.stringify(s.get(r)))),n&&window.addEventListener("storage",n=>n.storageArea===localStorage&&n.key===e&&s.set(r,null==n.newValue?t:o(n.newValue),!0))}return{get value(){return s.get(r)},set value(newVal){s.set(r,newVal,!0)}}}var S=s.from_html("<button> </button>"),W=s.from_html('<div class="btn-group d-flex mb-2" role="group"></div>'),N=s.from_html("<button> </button>"),I=s.from_html("<button> </button>"),X=s.from_html("<button> </button>"),C=s.from_html("<button> </button>"),H=s.from_html('<div class="row"><div class="col-md-6"><strong>Player X</strong> <!></div> <div class="col-md-6"><strong>Player O</strong> <!></div> <div class="col-12"><strong>Options</strong> <div class="btn-group d-flex mb-2" role="group"><button>Hints</button> <button class="w-100 btn btn-outline-secondary">Swap Types</button> <button class="w-100 btn btn-outline-secondary">Undo</button></div></div></div> <h2>Board</h2> <div class="row"><div class="col-sm-6"><p><!></p> <!></div> <div class="col-sm-6"><!></div></div> <h2>Rules</h2> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">X Wins</span> <!></div> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">O Wins</span> <!></div> <div class="btn-group d-flex mb-2" role="group"><span class="input-group-text">Tie</span> <!></div> <div class="input-group d-flex mb-2" role="group"><button class="flex-grow-1 btn btn-outline-secondary">Invert</button> <span class="input-group-text">Presets: X wants</span> <!></div> <h3>Prefer Outcome Timing <span class="badge text-bg-secondary">TODO</span></h3> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">Win</span> <button class="w-100 btn btn-outline-primary active">Earlier</button> <button class="w-100 btn btn-outline-warning disabled" title="not implemented yet">Anytime</button> <button class="w-100 btn btn-outline-success disabled" title="not implemented yet">Later</button></div> <div class="btn-group d-flex mb-1" role="group"><span class="input-group-text">Tie</span> <button class="w-100 btn btn-outline-primary disabled" title="not implemented yet">Earlier</button> <button class="w-100 btn btn-outline-warning active">Anytime</button> <button class="w-100 btn btn-outline-success disabled" title="not implemented yet">Later</button></div> <div class="btn-group d-flex mb-3" role="group"><span class="input-group-text">Lose</span> <button class="w-100 btn btn-outline-primary disabled" title="not implemented yet">Earlier</button> <button class="w-100 btn btn-outline-warning disabled" title="not implemented yet">Anytime</button> <button class="w-100 btn btn-outline-success active">Later</button></div>',1);s.delegate(["click"]),r=document.getElementById("app"),(0,u.Or)(function(e,t){let n;s.push(t,!0);let r=M("game/sp/t3/showHints",!0),o=M("game/sp/t3/playerType",[0,4]),a=M("game/sp/t3/winnerX",1),i=M("game/sp/t3/winnerO",2),p=M("game/sp/t3/winnerTie",3),v=s.derived(()=>[a.value,i.value,p.value]);s.user_effect(()=>{a.value,i.value,p.value,J()});let w=s.state(void 0),_=s.state(void 0),A=s.state(void 0),E=s.state(void 0),R=s.state(void 0),V=s.proxy(Array(9)),j=s.proxy(Array(10)),B=s.state(""),F=s.state(void 0);function z(){s.set(w,0),s.set(_,1),s.set(A,0),s.set(E,0),s.set(R,0),j[0]=0,s.set(B,"Click to make the first move. It&rsquo;s an exciting new game."),U()}function D(e){return!(s.get(A)||c(s.get(w),e))}function q(e){s.set(w,s.get(w)|s.get(_)<<(e<<1)),s.set(_,3^s.get(_)),V[s.update(E)]=e,j[s.get(E)]=s.get(w),J()}function J(){var e,t;s.set(A,(e=d(s.get(w),s.get(E)),t=s.get(v),e?t[e-1]:e),!0),s.get(A)&&s.set(B,3===s.get(A)?"It&rsquo;s a tie.":(1===s.get(A)?"X":"O")+" wins!",!0)}function U(){for(;!s.get(A);){var e;let t,n=b[o.value[1&s.get(E)]][1];if(!n)break;(e=>{var n=s.to_array(e,2);t=n[0],s.set(B,n[1],!0)})(n(s.get(w),s.get(E),s.get(v)));let r=(e=t)[Math.floor(Math.random()*e.length)];D(r)&&q(r)}}setTimeout(function(){s.set(B,"(Building game tables&hellip; This should take less than a second.)");let e=Date.now();(function e(t,n,r){let o;if(f[t])return f[t];let a=d(t,r),i=[0,0,0,0];if(a)o=[...Array(27).keys()].map(e=>{var t;let o=(t=[1+e%3,1+(e/3|0)%3,1+(e/9|0)%3],a?t[a-1]:a);return[3===o?0:o===n?10-r:r-10]}),i[0]++,i[a]++;else{for(let o=0;o<9;++o)if(!c(t,o)){let a=e(t|n<<(o<<1),3^n,r+1)[1];for(let e=0;e<4;++e)i[e]+=a[e]}o=[...Array(27).keys()].map(o=>{let a=-2e9,i=[],l=-1,s=0,u=0;for(let d=0;d<9;++d)if(!c(t,d)){let c=e(t|n<<(d<<1),3^n,r+1)[0][o],g=-c[0];a===g?(i.push(d),s+=c[2]??1):a<g&&(a=g,i=[d],s=c[2]??1);let p=Math.sign(g);l<p&&(l=p,u=0),l===p&&(u+=c[3]??1)}return[a,i,s,u]})}return f[t]=[o,i]})(0,1,0),s.set(F,m,!0),s.set(B,"To build game tables, it took "+(Date.now()-e)+" ms.")},1),(0,u.Rc)(z);let Y=[["X wins (Normal)","success"],["O wins (Inverted)","danger"],["Tie","warning"]],G=[["X wins (Inverted)","danger"],["O wins (Normal)","success"],["Tie","warning"]],K=[["X wins","primary"],["O wins","info"],["Tie (Normal)","success"]],Q=[[1,2,3,"success","win (Normal)"],[2,1,3,"danger","loss (Inverted)"],[2,2,1,"warning","Tie"],[1,1,2,"info","not Tie"],[1,2,1,"primary","Last move"],[2,1,2,"dark","not Last move"]];var Z,ee,et,en,er,eo,ea,ei,el,es=H(),eu=s.first_child(es);{let e=(e,t=s.noop)=>{var n=W();s.each(n,21,()=>b,s.index,(e,n,r)=>{let a;var i=s.derived(()=>s.to_array(s.get(n),1)),l=S();l.__click=()=>{var e;return e=t(),void(o.value[e]=r,z())};var u=s.child(l,!0);s.reset(l),s.template_effect(()=>{a=s.set_class(l,1,"w-100 btn btn-outline-secondary",null,a,{active:r===o.value[t()]}),s.set_text(u,s.get(i)[0])}),s.append(e,l)}),s.reset(n),s.append(e,n)};var ec=s.child(eu);e(s.sibling(s.child(ec),2),()=>0),s.reset(ec);var ed=s.sibling(ec,2);e(s.sibling(s.child(ed),2),()=>1),s.reset(ed);var eg=s.sibling(ed,2),ep=s.sibling(s.child(eg),2),ev=s.child(ep);ev.__click=()=>{r.value=!r.value};var eb=s.sibling(ev,2);eb.__click=function(){o.value=[o.value[1],o.value[0]],z()};var ef=s.sibling(eb,2);ef.__click=function(){if(s.get(R)){do{let e=V[s.update_pre(E,-1)];s.set(_,3^s.get(_)),s.set(w,s.get(w)^s.get(_)<<(e<<1))}while(b[o.value[1&s.get(E)]][1]);s.set(A,0),s.update(R,-1),s.set(B,"You undid your move.")}},s.reset(ep),s.reset(eg),s.reset(eu),s.template_effect(()=>{s.set_class(ev,1,`w-100 btn btn-${r.value?"success active":"outline-primary"}`),ef.disabled=!s.get(R)})}var em=s.sibling(eu,4),eh=s.child(em),ew=s.child(eh),e_=s.child(ew);s.html(e_,()=>s.get(B)),s.reset(ew),Z=s.sibling(ew,2),ee={get board(){return s.get(w)},get winner(){return s.get(A)},get winnerMap(){return s.get(v)},get mark(){return s.get(_)},get showHints(){return r.value},get getMemo(){return s.get(F)},onMove:function(e){D(e)&&(s.set(B,"Click to make a move."),q(e),s.update(R),U())}},s.push(ee,!0),et={get winner(){return ee.winner},cell:(e,t=s.noop)=>{var n,r;let o,a,i,l,u=s.derived(()=>ee.board>>(t()<<1)&3),c=s.derived(()=>!s.get(u)&&ee.showHints&&!ee.winner&&ee.getMemo?.(ee.board|ee.mark<<(t()<<1))),d=s.derived(()=>{let[e,t]=function(){if(!s.get(c))return[];let[e,t]=s.get(c),n=e[g(ee.winnerMap)][0],r=h(t,ee.winnerMap),o=!r[3],a=!r[3^ee.mark],i=!r[ee.mark];return[`h${n?n<0?"win":"lose":"tie"}${i?" noW":""}${o?" noT":""}${a?" noL":""}`,n]}();return{hintClass:e,hintVal:t}});n={get winner(){return ee.winner},get mark(){return s.get(u)},get markHover(){return ee.mark},get hintClass(){return s.get(d).hintClass},get hintVal(){return s.get(d).hintVal},onMove:()=>ee.onMove(t())},s.append_styles(e,$),a=s.prop(n,"markHover",3,0),i=s.prop(n,"hintClass",3,""),l=s.prop(n,"hintVal",3,0),(r=T()).__click=function(...e){n.onMove?.apply(this,e)},s.template_effect(()=>{o=s.set_class(r,1,`p${n.mark??""} n${(n.winner?0:a())??""} ${i()??""}`,"svelte-1ey9tag",o,{win:n.winner}),s.set_attribute(r,"data-hintturn",l()?l()>0?10-l():10+l():void 0)}),s.append(e,r)},$$slots:{cell:!0}},s.append_styles(Z,k),n=[[0,1,2],[3,4,5],[6,7,8]],en=x(),er=s.child(en),s.each(er,21,()=>n,s.index,(e,t)=>{var n=y();s.each(n,21,()=>s.get(t),s.index,(e,t)=>{var n=s.comment(),r=s.first_child(n);s.snippet(r,()=>et.cell,()=>s.get(t)),s.append(e,n)}),s.reset(n),s.append(e,n)}),s.reset(er),s.reset(en),s.template_effect(()=>s.set_class(en,1,`w${et.winner??""}`,"svelte-1st18yg")),s.append(Z,en),s.pop(),s.reset(eh);var ey=s.sibling(eh,2);eo=s.child(ey),ea={get boardHistory(){return j},get moveStack(){return V},get moveLength(){return s.get(E)},get winner(){return s.get(A)},get winnerMap(){return s.get(v)},get getMemo(){return s.get(F)}},s.push(ea,!0),ei=P(),el=s.sibling(s.child(ei)),s.each(el,20,()=>({length:9}),s.index,(e,t,n)=>{let r,o=s.derived(()=>ea.moveLength>n),a=s.derived(()=>s.get(o)||ea.moveLength===n&&!ea.winner),i=s.derived(()=>s.get(a)?ea.getMemo?.(ea.boardHistory[n]):void 0);var u=O(),c=s.child(u);c.textContent=`#${n+1}`;var d=s.sibling(c),p=s.child(d,!0);s.reset(d);var v=s.sibling(d),b=s.child(v,!0);s.reset(v);var f=s.sibling(v);s.each(f,17,()=>[l.P1,l.P2,l.Tie],s.index,(e,t)=>{let r=s.derived(()=>{let[e,r,o]=s.get(i)?function(e,t,n,r){let[o,a]=t,i=h(a,n),l=i[r],s=1!==r&&i[1]||2!==r&&i[2]||3!==r&&i[3],u=o[g(n.map(t=>((e^t!==r)&1)+1))],c=u[0],d=c>0?10-c:0,p=d?`${s?"Forcable":"Result"} (${d===e+1?"now":"by #"+d})`:l?"Possible":"Impossible",v=`table-${d?"info":l?"success":"danger"}`,b=u[2]??0,f=u[3]??0;return[p,v,`Path Count: ${l.toLocaleString()}

${c>0?"Forced":"Lost"}:
${b.toLocaleString()}
${f.toLocaleString()} (without timing)`]}(n,s.get(i),ea.winnerMap,s.get(t)):[];return{text:e,className:r,title:o}});var o=L(),a=s.child(o,!0);s.reset(o),s.template_effect(()=>{s.set_class(o,1,s.clsx(s.get(r).className)),s.set_attribute(o,"title",s.get(r).title),s.set_text(a,s.get(r).text)}),s.append(e,o)}),s.reset(u),s.template_effect((e,t)=>{s.set_attribute(d,"title",e),s.set_text(p,t),r=s.set_class(v,1,"",null,r,{"table-warning":s.get(o)}),s.set_text(b,s.get(o)?ea.moveStack[n]+1:"")},[()=>s.get(i)&&function(e,t){let n=e[1],r=h(n,t);return`Path Count:

${o(r)}

Unmapped
${o(n)}`;function o(e){return`X Win: ${e[1].toLocaleString()}
O Win: ${e[2].toLocaleString()}
Tie: ${e[3].toLocaleString()}
Total: ${e[0].toLocaleString()}`}}(s.get(i),ea.winnerMap),()=>s.get(i)?.[1][0].toLocaleString()??""]),s.append(e,u)}),s.reset(el),s.reset(ei),s.append(eo,ei),s.pop(),s.reset(ey),s.reset(em);var ex=s.sibling(em,4),ek=s.sibling(s.child(ex),2);s.each(ek,17,()=>Y,s.index,(e,t,n)=>{let r;var o=N();o.__click=()=>{a.value=n+1};var i=s.child(o,!0);s.reset(o),s.template_effect(()=>{r=s.set_class(o,1,`w-100 btn btn-outline-${s.get(t)[1]??""}`,null,r,{active:a.value===n+1}),s.set_text(i,s.get(t)[0])}),s.append(e,o)}),s.reset(ex);var eT=s.sibling(ex,2),e$=s.sibling(s.child(eT),2);s.each(e$,17,()=>G,s.index,(e,t,n)=>{let r;var o=I();o.__click=()=>{i.value=n+1};var a=s.child(o,!0);s.reset(o),s.template_effect(()=>{r=s.set_class(o,1,`w-100 btn btn-outline-${s.get(t)[1]??""}`,null,r,{active:i.value===n+1}),s.set_text(a,s.get(t)[0])}),s.append(e,o)}),s.reset(eT);var eL=s.sibling(eT,2),eO=s.sibling(s.child(eL),2);s.each(eO,17,()=>K,s.index,(e,t,n)=>{let r;var o=X();o.__click=()=>{p.value=n+1};var a=s.child(o,!0);s.reset(o),s.template_effect(()=>{r=s.set_class(o,1,`w-100 btn btn-outline-${s.get(t)[1]??""}`,null,r,{active:p.value===n+1}),s.set_text(a,s.get(t)[0])}),s.append(e,o)}),s.reset(eL);var eP=s.sibling(eL,2),eM=s.child(eP);eM.__click=()=>{a.value=3===a.value?3:3^a.value,i.value=3===i.value?3:3^i.value,p.value=3===p.value?3:3^p.value};var eS=s.sibling(eM,4);s.each(eS,17,()=>Q,s.index,(e,t)=>{let n;var r=C();r.__click=()=>{a.value=s.get(t)[0],i.value=s.get(t)[1],p.value=s.get(t)[2]};var o=s.child(r,!0);s.reset(r),s.template_effect(()=>{n=s.set_class(r,1,`flex-grow-1 btn btn-outline-${s.get(t)[3]??""}`,null,n,{active:a.value===s.get(t)[0]&&i.value===s.get(t)[1]&&p.value===s.get(t)[2]}),s.set_text(o,s.get(t)[4])}),s.append(e,r)}),s.reset(eP),s.next(8),s.append(e,es),s.pop()},{target:r}),document.getElementById("appLoading")?.remove()}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,i),n.exports}i.m=o,i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],i.O=(t,n,r,o)=>{if(n){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[n,r,o];return}for(var l=1/0,a=0;a<e.length;a++){for(var[n,r,o]=e[a],s=!0,u=0;u<n.length;u++)(!1&o||l>=o)&&Object.keys(i.O).every(e=>i.O[e](n[u]))?n.splice(u--,1):(s=!1,o<l&&(l=o));if(s){e.splice(a--,1);var c=r();void 0!==c&&(t=c)}}return t},i.rv=()=>"1.7.3",t={105:0},i.O.j=e=>0===t[e],n=(e,n)=>{var r,o,[a,l,s]=n,u=0;if(a.some(e=>0!==t[e])){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(s)var c=s(i)}for(e&&e(n);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},(r=self.webpackChunkvwww=self.webpackChunkvwww||[]).forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r)),i.ruid="bundler=rspack@1.7.3";var l=i.O(void 0,["14","1","2","13","7","6","18","54","52","53","51"],()=>i(162));l=i.O(l)})();